---
title: "drbbdup_options_t Struct Reference"
layout: default
permalink: /structdrbbdup__options__t.html
---
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DynamoRIO
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-attribs">Data Fields</a>  </div>
  <div class="headertitle">
<div class="title">drbbdup_options_t Struct Reference<div class="ingroups"><a class="el" href="group__drbbdup.html">Basic Block Duplicator</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;drbbdup.h&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Data Fields</h2></td></tr>
<tr class="memitem:a52583a66d35fdff96ca0d026bd9feb47"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdrbbdup__options__t.html#a52583a66d35fdff96ca0d026bd9feb47">struct_size</a></td></tr>
<tr class="separator:a52583a66d35fdff96ca0d026bd9feb47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5dd8cb68eb994d2bfbfbfbed53f8fc2d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__drbbdup.html#gafc69f147f9c66259b8890b0d5aef38d8">drbbdup_set_up_bb_dups_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdrbbdup__options__t.html#a5dd8cb68eb994d2bfbfbfbed53f8fc2d">set_up_bb_dups</a></td></tr>
<tr class="separator:a5dd8cb68eb994d2bfbfbfbed53f8fc2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a918b3cdf905307fc21b7b44785d56087"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__drbbdup.html#gae2bf28a5b20a165d4d07325a49c12c4a">drbbdup_insert_encode_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdrbbdup__options__t.html#a918b3cdf905307fc21b7b44785d56087">insert_encode</a></td></tr>
<tr class="separator:a918b3cdf905307fc21b7b44785d56087"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea8adb27125bcdf46c358ce282f4c34e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__drbbdup.html#ga9ad6ccdf892113423001b6559e4ee8e8">drbbdup_analyze_orig_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdrbbdup__options__t.html#aea8adb27125bcdf46c358ce282f4c34e">analyze_orig</a></td></tr>
<tr class="separator:aea8adb27125bcdf46c358ce282f4c34e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24e6986254698a9807505f6c08ca1034"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__drbbdup.html#gafa4a35ea9eab76f19c533b7944ee3ff8">drbbdup_destroy_orig_analysis_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdrbbdup__options__t.html#a24e6986254698a9807505f6c08ca1034">destroy_orig_analysis</a></td></tr>
<tr class="separator:a24e6986254698a9807505f6c08ca1034"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cf6d9b91857d223856703b3376c9759"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__drbbdup.html#ga1635c9540f9b8de24bfc0e37a5ba60da">drbbdup_analyze_case_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdrbbdup__options__t.html#a4cf6d9b91857d223856703b3376c9759">analyze_case</a></td></tr>
<tr class="separator:a4cf6d9b91857d223856703b3376c9759"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb343d2e84dfe7174526f98e4557dfd9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__drbbdup.html#gacfdd196f0a774cc7086fff7a2fed0ce1">drbbdup_destroy_case_analysis_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdrbbdup__options__t.html#afb343d2e84dfe7174526f98e4557dfd9">destroy_case_analysis</a></td></tr>
<tr class="separator:afb343d2e84dfe7174526f98e4557dfd9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2eb5d5ba93368430c03838f6b6f92a7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__drbbdup.html#ga8928e3a20e86418d0371b3ec4e69d8cc">drbbdup_instrument_instr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdrbbdup__options__t.html#ab2eb5d5ba93368430c03838f6b6f92a7">instrument_instr</a></td></tr>
<tr class="separator:ab2eb5d5ba93368430c03838f6b6f92a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b31d1d0f5323af61fb8240737f84525"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__drbbdup.html#ga793b9eacde5c3bd10f43336079d8b53a">drbbdup_allow_gen_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdrbbdup__options__t.html#a2b31d1d0f5323af61fb8240737f84525">allow_gen</a></td></tr>
<tr class="separator:a2b31d1d0f5323af61fb8240737f84525"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7fb17bcf671377cff01cf91615462b55"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structopnd__t.html">opnd_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdrbbdup__options__t.html#a7fb17bcf671377cff01cf91615462b55">runtime_case_opnd</a></td></tr>
<tr class="separator:a7fb17bcf671377cff01cf91615462b55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa29a2ace2e4e90ed0d34404cf923fcca"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdrbbdup__options__t.html#aa29a2ace2e4e90ed0d34404cf923fcca">atomic_load_encoding</a></td></tr>
<tr class="separator:aa29a2ace2e4e90ed0d34404cf923fcca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb057479b1a676648560cb6a16fc732f"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdrbbdup__options__t.html#adb057479b1a676648560cb6a16fc732f">user_data</a></td></tr>
<tr class="separator:adb057479b1a676648560cb6a16fc732f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a893267daa77c51732baca99cb695cd96"><td class="memItemLeft" align="right" valign="top">ushort&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdrbbdup__options__t.html#a893267daa77c51732baca99cb695cd96">non_default_case_limit</a></td></tr>
<tr class="separator:a893267daa77c51732baca99cb695cd96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d4bd55a2cecb0f9e449a36e522fb4a5"><td class="memItemLeft" align="right" valign="top">ushort&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdrbbdup__options__t.html#a0d4bd55a2cecb0f9e449a36e522fb4a5">hit_threshold</a></td></tr>
<tr class="separator:a0d4bd55a2cecb0f9e449a36e522fb4a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49613a119d398f0385d5d97a39fadc10"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdrbbdup__options__t.html#a49613a119d398f0385d5d97a39fadc10">is_stat_enabled</a></td></tr>
<tr class="separator:a49613a119d398f0385d5d97a39fadc10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af05addf6a30e11e91b3d7e0ab2c7e221"><td class="memItemLeft" align="right" valign="top">uintptr_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdrbbdup__options__t.html#af05addf6a30e11e91b3d7e0ab2c7e221">max_case_encoding</a></td></tr>
<tr class="separator:af05addf6a30e11e91b3d7e0ab2c7e221"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Specifies the options when initialising drbbdup. <code>set_up_bb_dups</code> and <code>instrument_instr</code> cannot be NULL, while <code>non_default_case_limit</code> must be greater than zero. </p>
</div><h2 class="groupheader">Field Documentation</h2>
<a id="a2b31d1d0f5323af61fb8240737f84525"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b31d1d0f5323af61fb8240737f84525">&#9670;&nbsp;</a></span>allow_gen</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__drbbdup.html#ga793b9eacde5c3bd10f43336079d8b53a">drbbdup_allow_gen_t</a> drbbdup_options_t::allow_gen</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A user-defined call-back function that determines whether to dynamically generate a basic block copy to handle a new case encountered at runtime. The function may be NULL, and in this case drbbdup will always consider dynamic handling for new cases. </p>

</div>
</div>
<a id="a4cf6d9b91857d223856703b3376c9759"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4cf6d9b91857d223856703b3376c9759">&#9670;&nbsp;</a></span>analyze_case</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__drbbdup.html#ga1635c9540f9b8de24bfc0e37a5ba60da">drbbdup_analyze_case_t</a> drbbdup_options_t::analyze_case</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A user-defined call-back function that analyzes a basic block for a particular case. </p>

</div>
</div>
<a id="aea8adb27125bcdf46c358ce282f4c34e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea8adb27125bcdf46c358ce282f4c34e">&#9670;&nbsp;</a></span>analyze_orig</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__drbbdup.html#ga9ad6ccdf892113423001b6559e4ee8e8">drbbdup_analyze_orig_t</a> drbbdup_options_t::analyze_orig</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A user-defined call-back function that conducts an analysis of the original basic block. </p>

</div>
</div>
<a id="aa29a2ace2e4e90ed0d34404cf923fcca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa29a2ace2e4e90ed0d34404cf923fcca">&#9670;&nbsp;</a></span>atomic_load_encoding</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool drbbdup_options_t::atomic_load_encoding</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Instructs drbbdup whether or not the loading of the runtime case should use release-acquire semantics. </p>

</div>
</div>
<a id="afb343d2e84dfe7174526f98e4557dfd9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb343d2e84dfe7174526f98e4557dfd9">&#9670;&nbsp;</a></span>destroy_case_analysis</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__drbbdup.html#gacfdd196f0a774cc7086fff7a2fed0ce1">drbbdup_destroy_case_analysis_t</a> drbbdup_options_t::destroy_case_analysis</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A user-defined call-back function that destroys analysis data for a particular case. </p>

</div>
</div>
<a id="a24e6986254698a9807505f6c08ca1034"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24e6986254698a9807505f6c08ca1034">&#9670;&nbsp;</a></span>destroy_orig_analysis</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__drbbdup.html#gafa4a35ea9eab76f19c533b7944ee3ff8">drbbdup_destroy_orig_analysis_t</a> drbbdup_options_t::destroy_orig_analysis</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A user-defined call-back function that destroys analysis data of the original basic block. </p>

</div>
</div>
<a id="a0d4bd55a2cecb0f9e449a36e522fb4a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d4bd55a2cecb0f9e449a36e522fb4a5">&#9670;&nbsp;</a></span>hit_threshold</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ushort drbbdup_options_t::hit_threshold</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Approximately, the number of times an unhandled case should be encountered by a thread before it becomes a candidate for dynamic generation. </p>

</div>
</div>
<a id="a918b3cdf905307fc21b7b44785d56087"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a918b3cdf905307fc21b7b44785d56087">&#9670;&nbsp;</a></span>insert_encode</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__drbbdup.html#gae2bf28a5b20a165d4d07325a49c12c4a">drbbdup_insert_encode_t</a> drbbdup_options_t::insert_encode</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A user-defined call-back function that inserts code to encode the runtime case. The resulting encoding is used by the dispatcher to direct control to the appropriate basic block.</p>
<p>It can be left NULL. In such cases, it is expected that the runtime case encoding of a thread is done by external code and updated on demand. Essentially, drbbdup guarantees that it won't change the client's memory that stores the encoding, thus enabling insert_encode to perform no operation and not be needed. </p>

</div>
</div>
<a id="ab2eb5d5ba93368430c03838f6b6f92a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab2eb5d5ba93368430c03838f6b6f92a7">&#9670;&nbsp;</a></span>instrument_instr</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__drbbdup.html#ga8928e3a20e86418d0371b3ec4e69d8cc">drbbdup_instrument_instr_t</a> drbbdup_options_t::instrument_instr</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A user-defined call-back function that instruments an instruction with respect to a particular case. </p>

</div>
</div>
<a id="a49613a119d398f0385d5d97a39fadc10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a49613a119d398f0385d5d97a39fadc10">&#9670;&nbsp;</a></span>is_stat_enabled</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool drbbdup_options_t::is_stat_enabled</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Determines whether drbbdup should track a variety of statistics. Note, keeping track of statistics incurs additional overhead and it is not recommended at deployment.</p>
<p>In order for the client to successfully call <a class="el" href="group__drbbdup.html#ga4743c5b48f29c25dcf7ea08329dc96a8">drbbdup_get_stats()</a>, the flag must be set to true. </p>

</div>
</div>
<a id="af05addf6a30e11e91b3d7e0ab2c7e221"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af05addf6a30e11e91b3d7e0ab2c7e221">&#9670;&nbsp;</a></span>max_case_encoding</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uintptr_t drbbdup_options_t::max_case_encoding</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Gives an upper bound on the value of all case encodings. This is used to optimize the dispatch code on AArchXX: in particular, an upper bound &lt;256 avoids an extra scratch register. Set to 0 to indicate there is no bound. </p>

</div>
</div>
<a id="a893267daa77c51732baca99cb695cd96"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a893267daa77c51732baca99cb695cd96">&#9670;&nbsp;</a></span>non_default_case_limit</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ushort drbbdup_options_t::non_default_case_limit</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The maximum number of alternative cases, excluding the default case, that can be associated with a basic block. Once the limit is reached and an unhandled case is encountered, control is directed to the default case. </p>

</div>
</div>
<a id="a7fb17bcf671377cff01cf91615462b55"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7fb17bcf671377cff01cf91615462b55">&#9670;&nbsp;</a></span>runtime_case_opnd</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structopnd__t.html">opnd_t</a> drbbdup_options_t::runtime_case_opnd</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>An operand that refers to the memory containing the current runtime case encoding. During runtime, the dispatcher loads the runtime encoding via this operand in order to direct control to the appropriate basic block. The opnd must be pointer-sized. </p>

</div>
</div>
<a id="a5dd8cb68eb994d2bfbfbfbed53f8fc2d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5dd8cb68eb994d2bfbfbfbed53f8fc2d">&#9670;&nbsp;</a></span>set_up_bb_dups</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__drbbdup.html#gafc69f147f9c66259b8890b0d5aef38d8">drbbdup_set_up_bb_dups_t</a> drbbdup_options_t::set_up_bb_dups</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A user-defined call-back function that sets up how to duplicate a basic block. Cannot be NULL. </p>

</div>
</div>
<a id="a52583a66d35fdff96ca0d026bd9feb47"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52583a66d35fdff96ca0d026bd9feb47">&#9670;&nbsp;</a></span>struct_size</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t drbbdup_options_t::struct_size</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set this to the size of this structure. </p>

</div>
</div>
<a id="adb057479b1a676648560cb6a16fc732f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb057479b1a676648560cb6a16fc732f">&#9670;&nbsp;</a></span>user_data</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* drbbdup_options_t::user_data</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>User-data made available to user-defined call-back functions that drbbdup invokes to manage basic block duplication. </p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>/home/runner/work/dynamorio/dynamorio/ext/drbbdup/<a class="el" href="drbbdup_8h.html">drbbdup.h</a></li>
</ul>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.17-->
<!-- start footer part -->
<!--BEGIN GENERATE_TREEVIEW-->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer" style="float:none;text-align:center"><img border=0 src="favicon.png"> &nbsp;  DynamoRIO version 9.0.1 --- Mon Feb 14 2022 19:02:58 &nbsp; <img border=0 src="favicon.png">
</small></address>
