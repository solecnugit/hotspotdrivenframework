---
title: "Analysis Tool Suite"
layout: default
permalink: /sec_drcachesim_tools.html
---
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DynamoRIO
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Analysis Tool Suite </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>In addition to a CPU cache simulator, other analysis tools are available that operate on memory address traces. Which tool is used can be selected with the <code>-simulator_type</code> parameter. New, custom tools can also be created, as described in <a class="el" href="sec_drcachesim_newtool.html">Creating New Analysis Tools</a>.</p>
<ul>
<li><a class="el" href="sec_drcachesim_tools.html#sec_tool_cache_sim">Cache Simulator</a></li>
<li><a class="el" href="sec_drcachesim_tools.html#sec_tool_TLB_sim">TLB Simulator</a></li>
<li><a class="el" href="sec_drcachesim_tools.html#sec_tool_reuse_distance">Reuse Distance</a></li>
<li><a class="el" href="sec_drcachesim_tools.html#sec_tool_reuse_time">Reuse Time</a></li>
<li><a class="el" href="sec_drcachesim_tools.html#sec_tool_basic_counts">Event Counts</a></li>
<li><a class="el" href="sec_drcachesim_tools.html#sec_tool_opcode_mix">Opcode Mix</a></li>
<li><a class="el" href="sec_drcachesim_tools.html#sec_tool_view">Human-Readable View</a></li>
<li><a class="el" href="sec_drcachesim_tools.html#sec_tool_func_view">View Function Calls</a></li>
<li><a class="el" href="sec_drcachesim_tools.html#sec_tool_histogram">Cache Line Histogram</a></li>
<li><a class="el" href="sec_drcachesim_tools.html#sec_tool_invariant_checker">Invariant Checker</a></li>
</ul>
<h1><a class="anchor" id="sec_tool_cache_sim"></a>
Cache Simulator</h1>
<p>This is the default tool. Here is an exmample of running it on an offline trace: </p><div class="fragment"><div class="line">$ bin64/drrun -t drcachesim -offline -- ~/test/pi_estimator</div>
<div class="line">Estimation of pi is 3.142425985001098</div>
<div class="line">$ bin64/drrun -t drcachesim -indir drmemtrace.*.dir</div>
<div class="line">Cache simulation results:</div>
<div class="line">Core #0 (1 thread(s))</div>
<div class="line">  L1I stats:</div>
<div class="line">    Hits:                          258,433</div>
<div class="line">    Misses:                          1,148</div>
<div class="line">    Miss rate:                        0.44%</div>
<div class="line">  L1D stats:</div>
<div class="line">    Hits:                           93,654</div>
<div class="line">    Misses:                          2,624</div>
<div class="line">    Prefetch hits:                     458</div>
<div class="line">    Prefetch misses:                 2,166</div>
<div class="line">    Miss rate:                        2.73%</div>
<div class="line">Core #1 (1 thread(s))</div>
<div class="line">  L1I stats:</div>
<div class="line">    Hits:                            8,895</div>
<div class="line">    Misses:                             99</div>
<div class="line">    Miss rate:                        1.10%</div>
<div class="line">  L1D stats:</div>
<div class="line">    Hits:                            3,448</div>
<div class="line">    Misses:                            156</div>
<div class="line">    Prefetch hits:                      26</div>
<div class="line">    Prefetch misses:                   130</div>
<div class="line">    Miss rate:                        4.33%</div>
<div class="line">Core #2 (1 thread(s))</div>
<div class="line">  L1I stats:</div>
<div class="line">    Hits:                            4,150</div>
<div class="line">    Misses:                            101</div>
<div class="line">    Miss rate:                        2.38%</div>
<div class="line">  L1D stats:</div>
<div class="line">    Hits:                            1,578</div>
<div class="line">    Misses:                            130</div>
<div class="line">    Prefetch hits:                      25</div>
<div class="line">    Prefetch misses:                   105</div>
<div class="line">    Miss rate:                        7.61%</div>
<div class="line">Core #3 (0 thread(s))</div>
<div class="line">LL stats:</div>
<div class="line">    Hits:                            1,414</div>
<div class="line">    Misses:                          2,844</div>
<div class="line">    Prefetch hits:                     824</div>
<div class="line">    Prefetch misses:                 1,577</div>
<div class="line">    Local miss rate:                 66.79%</div>
<div class="line">    Child hits:                    370,667</div>
<div class="line">    Total miss rate:                  0.76%</div>
</div><!-- fragment --><h1><a class="anchor" id="sec_tool_TLB_sim"></a>
TLB Simulator</h1>
<p>To simulate TLB devices instead of caches, pass <code>TLB</code> to <code>-simulator_type:</code> </p>
<div class="fragment"><div class="line">$ bin64/drrun -t drcachesim -simulator_type TLB -- ~/test/pi_estimator</div>
<div class="line">Estimation of pi is 3.142425985001098</div>
<div class="line">---- &lt;application exited with code 0&gt; ----</div>
<div class="line">TLB simulation results:</div>
<div class="line">Core #0 (1 thread(s))</div>
<div class="line">  L1I stats:</div>
<div class="line">    Hits:                          252,412</div>
<div class="line">    Misses:                            401</div>
<div class="line">    Miss rate:                        0.16%</div>
<div class="line">  L1D stats:</div>
<div class="line">    Hits:                           87,132</div>
<div class="line">    Misses:                          9,127</div>
<div class="line">    Miss rate:                        9.48%</div>
<div class="line">  LL stats:</div>
<div class="line">    Hits:                            9,315</div>
<div class="line">    Misses:                            213</div>
<div class="line">    Local miss rate:                  2.24%</div>
<div class="line">    Child hits:                    339,544</div>
<div class="line">    Total miss rate:                  0.06%</div>
<div class="line">Core #1 (1 thread(s))</div>
<div class="line">  L1I stats:</div>
<div class="line">    Hits:                            8,709</div>
<div class="line">    Misses:                             20</div>
<div class="line">    Miss rate:                        0.23%</div>
<div class="line">  L1D stats:</div>
<div class="line">    Hits:                            3,544</div>
<div class="line">    Misses:                             55</div>
<div class="line">    Miss rate:                        1.53%</div>
<div class="line">  LL stats:</div>
<div class="line">    Hits:                               15</div>
<div class="line">    Misses:                             60</div>
<div class="line">    Local miss rate:                 80.00%</div>
<div class="line">    Child hits:                     12,253</div>
<div class="line">    Total miss rate:                  0.49%</div>
<div class="line">Core #2 (1 thread(s))</div>
<div class="line">  L1I stats:</div>
<div class="line">    Hits:                            1,622</div>
<div class="line">    Misses:                             21</div>
<div class="line">    Miss rate:                        1.28%</div>
<div class="line">  L1D stats:</div>
<div class="line">    Hits:                              689</div>
<div class="line">    Misses:                             35</div>
<div class="line">    Miss rate:                        4.83%</div>
<div class="line">  LL stats:</div>
<div class="line">    Hits:                                3</div>
<div class="line">    Misses:                             53</div>
<div class="line">    Local miss rate:                 94.64%</div>
<div class="line">    Child hits:                      2,311</div>
<div class="line">    Total miss rate:                  2.24%</div>
<div class="line">Core #3 (0 thread(s))</div>
</div><!-- fragment --><h1><a class="anchor" id="sec_tool_reuse_distance"></a>
Reuse Distance</h1>
<p>To compute reuse distance metrics:</p>
<div class="fragment"><div class="line">$ bin64/drrun -t drcachesim -simulator_type reuse_distance -reuse_distance_histogram -- ~/test/pi_estimator</div>
<div class="line">Estimation of pi is 3.142425985001098</div>
<div class="line">---- &lt;application exited with code 0&gt; ----</div>
<div class="line">Reuse distance tool aggregated results:</div>
<div class="line">Total accesses: 349632</div>
<div class="line">Unique accesses: 196603</div>
<div class="line">Unique cache lines accessed: 4235</div>
<div class="line"> </div>
<div class="line">Reuse distance mean: 14.64</div>
<div class="line">Reuse distance median: 1</div>
<div class="line">Reuse distance standard deviation: 104.10</div>
<div class="line">Reuse distance histogram:</div>
<div class="line">Distance       Count  Percent  Cumulative</div>
<div class="line">       0      153029   44.36%   44.36%</div>
<div class="line">       1      101294   29.37%   73.73%</div>
<div class="line">       2       14116    4.09%   77.82%</div>
<div class="line">       3       14248    4.13%   81.95%</div>
<div class="line">       4        8894    2.58%   84.53%</div>
<div class="line">       5        2733    0.79%   85.32%</div>
<div class="line">...</div>
<div class="line">==================================================</div>
<div class="line">Reuse distance tool results <span class="keywordflow">for</span> shard 29327 (thread 29327):</div>
<div class="line">Total accesses: 335084</div>
<div class="line">Unique accesses: 187927</div>
<div class="line">Unique cache lines accessed: 4148</div>
<div class="line"> </div>
<div class="line">Reuse distance mean: 14.77</div>
<div class="line">Reuse distance median: 1</div>
<div class="line">Reuse distance standard deviation: 106.02</div>
<div class="line">Reuse distance histogram:</div>
<div class="line">Distance       Count  Percent  Cumulative</div>
<div class="line">       0      147157   44.47%   44.47%</div>
<div class="line">       1       96820   29.26%   73.72%</div>
<div class="line">       2       13613    4.11%   77.84%</div>
<div class="line">       3       13834    4.18%   82.02%</div>
<div class="line">       4        8666    2.62%   84.64%</div>
<div class="line">       5        2552    0.77%   85.41%</div>
<div class="line">...</div>
<div class="line">    3658          29    0.01%  100.00%</div>
<div class="line">    3851           1    0.00%  100.00%</div>
<div class="line"> </div>
<div class="line">Reuse distance threshold = 100 cache lines</div>
<div class="line">Top 10 frequently referenced cache lines</div>
<div class="line">        cache line:     #references   #distant refs</div>
<div class="line">    0x7f2a86b3fd80:        27980,            0</div>
<div class="line">    0x7f2a86b3fdc0:        18823,            0</div>
<div class="line">    0x7f2a88388fc0:        16409,          111</div>
<div class="line">    0x7f2a8838abc0:        15176,            6</div>
<div class="line">    0x7f2a883884c0:         9930,           20</div>
<div class="line">    0x7f2a88388480:         7944,           20</div>
<div class="line">    0x7f2a88388500:         7574,           20</div>
<div class="line">    0x7f2a88398d00:         7390,          100</div>
<div class="line">    0x7f2a86b3fd40:         6668,            0</div>
<div class="line">    0x7f2a88388440:         5717,           20</div>
<div class="line">Top 10 distant repeatedly referenced cache lines</div>
<div class="line">        cache line:     #references   #distant refs</div>
<div class="line">    0x7f2a885a4180:          246,          132</div>
<div class="line">    0x7f2a87504ec0:          202,          128</div>
<div class="line">    0x7f2a875044c0:          323,          126</div>
<div class="line">    0x7f2a885a4480:          220,          126</div>
<div class="line">    0x7f2a87504f00:          293,          124</div>
<div class="line">    0x7f2a86fd7e00:          289,          124</div>
<div class="line">    0x7f2a875049c0:          221,          124</div>
<div class="line">    0x7f2a875053c0:          270,          122</div>
<div class="line">    0x7f2a86db9c00:          269,          122</div>
<div class="line">    0x7f2a875047c0:          201,          122</div>
<div class="line"> </div>
<div class="line">==================================================</div>
<div class="line">Reuse distance tool results <span class="keywordflow">for</span> shard 29328 (thread 29328):</div>
<div class="line">Total accesses: 12216</div>
<div class="line">Unique accesses: 7251</div>
<div class="line">Unique cache lines accessed: 319</div>
<div class="line"> </div>
<div class="line">Reuse distance mean: 12.98</div>
<div class="line">Reuse distance median: 1</div>
<div class="line">Reuse distance standard deviation: 38.19</div>
<div class="line">Reuse distance histogram:</div>
<div class="line">Distance       Count  Percent  Cumulative</div>
<div class="line">       0        4965   41.73%   41.73%</div>
<div class="line">       1        3758   31.59%   73.32%</div>
<div class="line">       2         411    3.45%   76.78%</div>
<div class="line">       3         348    2.93%   79.70%</div>
<div class="line">       4         179    1.50%   81.21%</div>
<div class="line">       5         152    1.28%   82.48%</div>
<div class="line">...</div>
</div><!-- fragment --><h1><a class="anchor" id="sec_tool_reuse_time"></a>
Reuse Time</h1>
<p>A reuse time tool is also provided, which counts the total number of memory accesses (without considering uniqueness) between accesses to the same address:</p>
<div class="fragment"><div class="line">$ bin64/drrun -t drcachesim -simulator_type reuse_time -- ~/test/pi_estimator</div>
<div class="line">Estimation of pi is 3.142425985001098</div>
<div class="line">---- &lt;application exited with code 0&gt; ----</div>
<div class="line">Reuse time tool aggregated results:</div>
<div class="line">Total accesses: 88281</div>
<div class="line">Total instructions: 261315</div>
<div class="line">Mean reuse time: 433.47</div>
<div class="line">Reuse time histogram:</div>
<div class="line">Distance       Count  Percent  Cumulative</div>
<div class="line">       1       27893   32.84%      32.84%</div>
<div class="line">       2       10948   12.89%      45.73%</div>
<div class="line">       3        5789    6.82%      52.54%</div>
<div class="line">...</div>
<div class="line">==================================================</div>
<div class="line">Reuse time tool results <span class="keywordflow">for</span> shard 29482 (thread 29482):</div>
<div class="line">Total accesses: 84194</div>
<div class="line">Total instructions: 250854</div>
<div class="line">Mean reuse time: 450.01</div>
<div class="line">Reuse time histogram:</div>
<div class="line">Distance       Count  Percent  Cumulative</div>
<div class="line">       1       26677   32.86%      32.86%</div>
<div class="line">       2       10508   12.95%      45.81%</div>
<div class="line">       3        5427    6.69%      52.50%</div>
<div class="line">...</div>
<div class="line">==================================================</div>
<div class="line">Reuse time tool results <span class="keywordflow">for</span> shard 29483 (thread 29483):</div>
<div class="line">Total accesses: 3411</div>
<div class="line">Total instructions: 8805</div>
<div class="line">Mean reuse time: 86.36</div>
<div class="line">Reuse time histogram:</div>
<div class="line">Distance       Count  Percent  Cumulative</div>
<div class="line">       1        1014   31.56%      31.56%</div>
<div class="line">       2         363   11.30%      42.86%</div>
<div class="line">       3         308    9.59%      52.44%</div>
</div><!-- fragment --><h1><a class="anchor" id="sec_tool_basic_counts"></a>
Event Counts</h1>
<p>To simply see the counts of instructions and memory references broken down by thread use the basic counts tool:</p>
<div class="fragment"><div class="line">$ bin64/drrun -t drcachesim -simulator_type basic_counts -- ~/test/pi_estimator</div>
<div class="line">Estimation of pi is 3.142425985001098</div>
<div class="line">---- &lt;application exited with code 0&gt; ----</div>
<div class="line">Basic counts tool results:</div>
<div class="line">Total counts:</div>
<div class="line">      267193 total (fetched) instructions</div>
<div class="line">         345 total non-fetched instructions</div>
<div class="line">           0 total prefetches</div>
<div class="line">       67686 total data loads</div>
<div class="line">       22503 total data stores</div>
<div class="line">           3 total threads</div>
<div class="line">         280 total scheduling markers</div>
<div class="line">           0 total transfer markers</div>
<div class="line">           3 total other markers</div>
<div class="line">Thread 247451 counts:</div>
<div class="line">      255009 (fetched) instructions</div>
<div class="line">         345 non-fetched instructions</div>
<div class="line">           0 prefetches</div>
<div class="line">       64453 data loads</div>
<div class="line">       21243 data stores</div>
<div class="line">         258 scheduling markers</div>
<div class="line">           0 transfer markers</div>
<div class="line">           1 other markers</div>
<div class="line">Thread 247453 counts:</div>
<div class="line">        9195 (fetched) instructions</div>
<div class="line">           0 non-fetched instructions</div>
<div class="line">           0 prefetches</div>
<div class="line">        2444 data loads</div>
<div class="line">         937 data stores</div>
<div class="line">          12 scheduling markers</div>
<div class="line">           0 transfer markers</div>
<div class="line">           1 other markers</div>
<div class="line">Thread 247454 counts:</div>
<div class="line">        2989 (fetched) instructions</div>
<div class="line">           0 non-fetched instructions</div>
<div class="line">           0 prefetches</div>
<div class="line">         789 data loads</div>
<div class="line">         323 data stores</div>
<div class="line">          10 scheduling markers</div>
<div class="line">           0 transfer markers</div>
<div class="line">           1 other markers</div>
</div><!-- fragment --><p>The non-fetched instructions are x86 string loop instructions, where subsequent iterations do not incur a fetch. They are included in the trace as a different type of trace entry to support core simulators in addition to cache simulators.</p>
<h1><a class="anchor" id="sec_tool_opcode_mix"></a>
Opcode Mix</h1>
<p>The opcode_mix tool uses the non-fetched instruction information along with the preserved libraries and binaries from the traced execution to gather more information on each executed instruction than was stored in the trace. It only supports offline traces, and the <code>modules.log</code> file created during post-processing of the trace must be preserved. The results are broken down by the opcodes used in DR's IR, where for x86 <code>mov</code> is split into a separate opcode for load and store but both have the same public string "mov":</p>
<div class="fragment"><div class="line">$ bin64/drrun -t drcachesim -offline -- ~/test/pi_estimator</div>
<div class="line">Estimation of pi is 3.142425985001098</div>
<div class="line">$ bin64/drrun -t drcachesim -simulator_type opcode_mix -indir drmemtrace.*.dir</div>
<div class="line">Opcode mix tool results:</div>
<div class="line">         267271 : total executed instructions</div>
<div class="line">          36432 :       mov</div>
<div class="line">          31075 :       mov</div>
<div class="line">          24715 :       add</div>
<div class="line">          22579 :      test</div>
<div class="line">          22539 :       cmp</div>
<div class="line">          12137 :       lea</div>
<div class="line">          11136 :       jnz</div>
<div class="line">          10568 :     movzx</div>
<div class="line">          10243 :        jz</div>
<div class="line">           9056 :       and</div>
<div class="line">           8064 :       jnz</div>
<div class="line">           7279 :        jz</div>
<div class="line">           5659 :      push</div>
<div class="line">           4528 :       sub</div>
<div class="line">           4357 :       pop</div>
<div class="line">           4001 :       shr</div>
<div class="line">           3427 :      jnbe</div>
<div class="line">           2634 :       mov</div>
<div class="line">           2469 :       shl</div>
<div class="line">           2344 :        jb</div>
<div class="line">           2291 :       ret</div>
<div class="line">           2178 :       xor</div>
<div class="line">           2164 :      call</div>
<div class="line">           2111 :   pcmpeqb</div>
<div class="line">           1472 :    movdqa</div>
<div class="line">...</div>
</div><!-- fragment --><h1><a class="anchor" id="sec_tool_view"></a>
Human-Readable View</h1>
<p>The view tool prints out the contents of the trace for human viewing, including disassembling instructions in AT&amp;T, Intel, Arm, or DR format, for offline traces. The -skip_refs and -sim_refs flags can be used to set a start point and end point for the disassembled view. Note that these flags compute the number of instructions which are skipped or displayed which is distinct from the number of trace entries.</p>
<p>The tool displays loads and stores, as well as metadata marker entries for timestamps, on which core and thread the subsequent instruction sequence was executed, and kernel and system call transfers (these correspond to signal or event handler interruptions of the regular execution flow).</p>
<div class="fragment"><div class="line">$ bin64/drrun -t drcachesim -simulator_type view -sim_refs 20 -indir drmemtrace.*.dir</div>
<div class="line">T80431 &lt;marker: version 3&gt;</div>
<div class="line">T80431 &lt;marker: filetype 0x40&gt;</div>
<div class="line">T80431 &lt;marker: cache line size 64&gt;</div>
<div class="line">T80431 &lt;marker: timestamp 13269546858099127&gt;</div>
<div class="line">T80431 &lt;marker: tid 80431 on core 1&gt;</div>
<div class="line">T80431   0x00007f2ae335d090  48 89 e7             mov    %rsp, %rdi</div>
<div class="line">T80431   0x00007f2ae335d093  e8 48 0d 00 00       call   $0x00007f2ae335dde0</div>
<div class="line">T80431     write 8 byte(s) @ 0x7ffdf5770ac8</div>
<div class="line">T80431   0x00007f2ae335dde0  55                   push   %rbp</div>
<div class="line">T80431     write 8 byte(s) @ 0x7ffdf5770ac0</div>
<div class="line">T80431   0x00007f2ae335dde1  48 89 e5             mov    %rsp, %rbp</div>
<div class="line">T80431   0x00007f2ae335dde4  41 57                push   %r15</div>
<div class="line">T80431     write 8 byte(s) @ 0x7ffdf5770ab8</div>
<div class="line">T80431   0x00007f2ae335dde6  49 89 ff             mov    %rdi, %r15</div>
<div class="line">T80431   0x00007f2ae335dde9  41 56                push   %r14</div>
<div class="line">T80431     write 8 byte(s) @ 0x7ffdf5770ab0</div>
<div class="line">T80431   0x00007f2ae335ddeb  41 55                push   %r13</div>
<div class="line">T80431     write 8 byte(s) @ 0x7ffdf5770aa8</div>
<div class="line">T80431   0x00007f2ae335dded  41 54                push   %r12</div>
<div class="line">T80431     write 8 byte(s) @ 0x7ffdf5770aa0</div>
<div class="line">T80431   0x00007f2ae335ddef  53                   push   %rbx</div>
<div class="line">T80431     write 8 byte(s) @ 0x7ffdf5770a98</div>
<div class="line">T80431   0x00007f2ae335ddf0  48 83 ec 38          sub    $0x38, %rsp</div>
<div class="line">T80431   0x00007f2ae335ddf4  0f 31                rdtsc</div>
<div class="line">T80431   0x00007f2ae335ddf6  48 c1 e2 20          shl    $0x20, %rdx</div>
<div class="line">T80431   0x00007f2ae335ddfa  48 09 d0             or     %rdx, %rax</div>
<div class="line">T80431   0x00007f2ae335ddfd  48 8d 15 74 90 02 00 lea    &lt;rel&gt; 0x00007f2ae3386e78, %rdx</div>
<div class="line">T80431   0x00007f2ae335de04  48 89 05 75 87 02 00 mov    %rax, &lt;rel&gt; 0x00007f2ae3386580</div>
<div class="line">T80431     write 8 byte(s) @ 0x7f2ae3386580</div>
<div class="line">T80431   0x00007f2ae335de0b  48 8b 05 66 90 02 00 mov    &lt;rel&gt; 0x00007f2ae3386e78, %rax</div>
<div class="line">T80431     read  8 byte(s) @ 0x7f2ae3386e78</div>
<div class="line">T80431   0x00007f2ae335de12  49 89 d4             mov    %rdx, %r12</div>
<div class="line">T80431   0x00007f2ae335de15  4c 2b 25 e4 91 02 00 sub    &lt;rel&gt; 0x00007f2ae3387000, %r12</div>
<div class="line">T80431     read  8 byte(s) @ 0x7f2ae3387000</div>
<div class="line">T80431   0x00007f2ae335de1c  48 89 15 d5 9b 02 00 mov    %rdx, &lt;rel&gt; 0x00007f2ae33879f8</div>
<div class="line">View tool results:</div>
<div class="line">             20 : total disassembled instructions</div>
</div><!-- fragment --><p>An example of thread switches:</p>
<div class="fragment"><div class="line">------------------------------------------------------------</div>
<div class="line">T342625 &lt;marker: timestamp 13260900247983768&gt;</div>
<div class="line">T342625 &lt;marker: tid 342625 on core 3&gt;</div>
<div class="line">T342625   0x0000000000402460  31 ed                xor    %ebp, %ebp</div>
<div class="line">T342625   0x0000000000402462  49 89 d1             mov    %rdx, %r9</div>
<div class="line">T342625   0x0000000000402465  5e                   pop    %rsi</div>
<div class="line">T342625     read  8 byte(s) @ 0x7ffe70dce480</div>
<div class="line">T342625   0x0000000000402466  48 89 e2             mov    %rsp, %rdx</div>
<div class="line">...</div>
<div class="line">T342625   0x0000000000467c42  4d 89 c8             mov    %r9, %r8</div>
<div class="line">T342625   0x0000000000467c45  4c 8b 54 24 08       mov    0x08(%rsp), %r10</div>
<div class="line">T342625     read  8 <span class="keywordtype">byte</span>(s) @ 0x7ffe70dce100</div>
<div class="line">T342625   0x0000000000467c4a  b8 38 00 00 00       mov    $0x00000038, %eax</div>
<div class="line">T342625   0x0000000000467c4f  0f 05                syscall</div>
<div class="line">------------------------------------------------------------</div>
<div class="line">T342626 &lt;marker: timestamp 13260900248221723&gt;</div>
<div class="line">T342626 &lt;marker: tid 342626 on core 0&gt;</div>
<div class="line">T342626   0x0000000000467c51  48 85 c0             test   %rax, %rax</div>
<div class="line">T342626   0x0000000000467c54  7c 13                jl     $0x0000000000467c69</div>
<div class="line">T342626   0x0000000000467c56  74 01                jz     $0x0000000000467c59</div>
<div class="line">T342626   0x0000000000467c59  31 ed                xor    %ebp, %ebp</div>
<div class="line">T342626   0x0000000000467c5b  58                   pop    %rax</div>
<div class="line">T342626     read  8 byte(s) @ 0x7f899f928e70</div>
<div class="line">T342626   0x0000000000467c5c  5f                   pop    %rdi</div>
<div class="line">T342626     read  8 byte(s) @ 0x7f899f928e78</div>
<div class="line">T342626   0x0000000000467c5d  ff d0                call   %rax</div>
<div class="line">T342626     write 8 byte(s) @ 0x7f899f928e78</div>
<div class="line">T342626   0x0000000000404a30  41 54                push   %r12</div>
<div class="line">T342626     write 8 byte(s) @ 0x7f899f928e70</div>
<div class="line">...</div>
</div><!-- fragment --><p>Here is an example of a signal handler interrupting the regular flow, with metadata showing that the signal was delivered just after a non-taken conditional branch:</p>
<div class="fragment"><div class="line">T585061   0x00007fdb4e95128f  41 f6 44 24 08 08    test   0x08(%r12), $0x08</div>
<div class="line">T585061     read  1 <span class="keywordtype">byte</span>(s) @ 0x7ffd5af76b08</div>
<div class="line">T585061   0x00007fdb4e951295  0f 85 28 04 00 00    jnz    $0x00007fdb4e9516c3</div>
<div class="line">T585061 &lt;marker: kernel xfer from 0x7fdb4e95129b to handler&gt;</div>
<div class="line">T585061 &lt;marker: timestamp 13269730052517230&gt;</div>
<div class="line">T585061 &lt;marker: tid 585061 on core 3&gt;</div>
<div class="line">T585061   0x00007fdb4ace9dba  55                   push   %rbp</div>
<div class="line">T585061     write 8 byte(s) @ 0x7ffd5af763d0</div>
<div class="line">T585061   0x00007fdb4ace9dbb  48 89 e5             mov    %rsp, %rbp</div>
<div class="line">T585061   0x00007fdb4ace9dbe  89 7d fc             mov    %edi, -0x04(%rbp)</div>
<div class="line">T585061     write 4 <span class="keywordtype">byte</span>(s) @ 0x7ffd5af763cc</div>
<div class="line">T585061   0x00007fdb4ace9dc1  48 89 75 f0          mov    %rsi, -0x10(%rbp)</div>
<div class="line">T585061     write 8 <span class="keywordtype">byte</span>(s) @ 0x7ffd5af763c0</div>
<div class="line">T585061   0x00007fdb4ace9dc5  48 89 55 e8          mov    %rdx, -0x18(%rbp)</div>
<div class="line">T585061     write 8 <span class="keywordtype">byte</span>(s) @ 0x7ffd5af763b8</div>
<div class="line">T585061   0x00007fdb4ace9dc9  83 7d fc 1a          cmp    -0x04(%rbp), $0x1a</div>
<div class="line">T585061     read  4 <span class="keywordtype">byte</span>(s) @ 0x7ffd5af763cc</div>
<div class="line">T585061   0x00007fdb4ace9dcd  75 0f                jnz    $0x00007fdb4ace9dde</div>
<div class="line">T585061   0x00007fdb4ace9dcf  8b 05 7f 23 20 00    mov    &lt;rel&gt; 0x00007fdb4aeec154, %eax</div>
<div class="line">T585061     read  4 byte(s) @ 0x7fdb4aeec154</div>
<div class="line">T585061   0x00007fdb4ace9dd5  83 c0 01             add    $0x01, %eax</div>
<div class="line">T585061   0x00007fdb4ace9dd8  89 05 76 23 20 00    mov    %eax, &lt;rel&gt; 0x00007fdb4aeec154</div>
<div class="line">T585061     write 4 byte(s) @ 0x7fdb4aeec154</div>
<div class="line">T585061   0x00007fdb4ace9dde  90                   nop</div>
<div class="line">T585061   0x00007fdb4ace9ddf  5d                   pop    %rbp</div>
<div class="line">T585061     read  8 byte(s) @ 0x7ffd5af763d0</div>
<div class="line">T585061   0x00007fdb4ace9de0  c3                   ret</div>
<div class="line">T585061     read  8 byte(s) @ 0x7ffd5af763d8</div>
<div class="line">T585061   0x00007fdb4e95c140  48 c7 c0 0f 00 00 00 mov    $0x0000000f, %rax</div>
<div class="line">T585061   0x00007fdb4e95c147  0f 05                syscall</div>
<div class="line">T585061 &lt;marker: timestamp 13269730052517239&gt;</div>
<div class="line">T585061 &lt;marker: tid 585061 on core 3&gt;</div>
<div class="line">T585061 &lt;marker: syscall xfer from 0x7fdb4e95c149&gt;</div>
<div class="line">T585061 &lt;marker: timestamp 13269730052520271&gt;</div>
<div class="line">T585061 &lt;marker: tid 585061 on core 3&gt;</div>
<div class="line">T585061   0x00007fdb4e95129b  48 8b 1d 8e 40 01 00 mov    &lt;rel&gt; 0x00007fdb4e965330, %rbx</div>
<div class="line">T585061     read  8 byte(s) @ 0x7fdb4e965330</div>
</div><!-- fragment --><h1><a class="anchor" id="sec_tool_func_view"></a>
View Function Calls</h1>
<p>The func_view tool records function argument and return values for function names specified at tracing time. See <a class="el" href="sec_drcachesim_funcs.html">Tracing Function Calls</a> for more information.</p>
<div class="fragment"><div class="line">$ bin64/drrun -t drcachesim -offline -record_function <span class="stringliteral">&#39;fib|1&#39;</span> -- ~/test/fib 5</div>
<div class="line">Estimation of pi is 3.142425985001098</div>
<div class="line">$ bin64/drrun -t drcachesim -simulator_type func_view -indir drmemtrace.*.dir</div>
<div class="line">0x7fc06d2288eb =&gt; common.fib!fib(0x5)</div>
<div class="line">    0x7fc06d22888e =&gt; common.fib!fib(0x4)</div>
<div class="line">        0x7fc06d22888e =&gt; common.fib!fib(0x3)</div>
<div class="line">            0x7fc06d22888e =&gt; common.fib!fib(0x2)</div>
<div class="line">                0x7fc06d22888e =&gt; common.fib!fib(0x1) =&gt; 0x1</div>
<div class="line">                0x7fc06d22889d =&gt; common.fib!fib(0x0) =&gt; 0x1</div>
<div class="line">            =&gt; 0x2</div>
<div class="line">            0x7fc06d22889d =&gt; common.fib!fib(0x1) =&gt; 0x1</div>
<div class="line">        =&gt; 0x3</div>
<div class="line">        0x7fc06d22889d =&gt; common.fib!fib(0x2)</div>
<div class="line">            0x7fc06d22888e =&gt; common.fib!fib(0x1) =&gt; 0x1</div>
<div class="line">            0x7fc06d22889d =&gt; common.fib!fib(0x0) =&gt; 0x1</div>
<div class="line">        =&gt; 0x2</div>
<div class="line">    =&gt; 0x5</div>
<div class="line">    0x7fc06d22889d =&gt; common.fib!fib(0x3)</div>
<div class="line">        0x7fc06d22888e =&gt; common.fib!fib(0x2)</div>
<div class="line">            0x7fc06d22888e =&gt; common.fib!fib(0x1) =&gt; 0x1</div>
<div class="line">            0x7fc06d22889d =&gt; common.fib!fib(0x0) =&gt; 0x1</div>
<div class="line">        =&gt; 0x2</div>
<div class="line">        0x7fc06d22889d =&gt; common.fib!fib(0x1) =&gt; 0x1</div>
<div class="line">    =&gt; 0x3</div>
<div class="line">=&gt; 0x8</div>
<div class="line">Function view tool results:</div>
<div class="line">Function <span class="keywordtype">id</span>=0: common.fib!fib</div>
<div class="line">       15 calls</div>
<div class="line">       15 returns</div>
</div><!-- fragment --><h1><a class="anchor" id="sec_tool_histogram"></a>
Cache Line Histogram</h1>
<p>The top referenced cache lines are displayed by the <code>histogram</code> tool:</p>
<div class="fragment"><div class="line">$ bin64/drrun -t drcachesim -simulator_type histogram -- ~/test/pi_estimator</div>
<div class="line">Estimation of pi is 3.142425985001098</div>
<div class="line">---- &lt;application exited with code 0&gt; ----</div>
<div class="line">Cache line histogram tool results:</div>
<div class="line">icache: 1134 unique cache lines</div>
<div class="line">dcache: 3062 unique cache lines</div>
<div class="line">icache top 10</div>
<div class="line">    0x7facdd013780: 30929</div>
<div class="line">    0x7facdb789fc0: 27664</div>
<div class="line">    0x7facdb78a000: 18629</div>
<div class="line">    0x7facdd003e80: 18176</div>
<div class="line">    0x7facdd003500: 11121</div>
<div class="line">    0x7facdd0034c0: 9763</div>
<div class="line">    0x7facdd005940: 8865</div>
<div class="line">    0x7facdd003480: 8277</div>
<div class="line">    0x7facdb789f80: 6660</div>
<div class="line">    0x7facdd003540: 5888</div>
<div class="line">dcache top 10</div>
<div class="line">    0x7ffcc35e7d80: 4088</div>
<div class="line">    0x7ffcc35e7d40: 3497</div>
<div class="line">    0x7ffcc35e7e00: 3478</div>
<div class="line">    0x7ffcc35e7f40: 2919</div>
<div class="line">    0x7ffcc35e7dc0: 2837</div>
<div class="line">    0x7facdbe2e980: 2452</div>
<div class="line">    0x7facdbe2ec80: 2273</div>
<div class="line">    0x7ffcc35e7e80: 2194</div>
<div class="line">    0x7facdb6625c0: 2016</div>
<div class="line">    0x7ffcc35e7e40: 1997</div>
</div><!-- fragment --><h1><a class="anchor" id="sec_tool_invariant_checker"></a>
Invariant Checker</h1>
<p>The invariant_checker tool performs sanity checks on a trace, focusing on program counter continuity and guarantees around kernel control transfer interruptions. It optionally checks for restricted behavior that technically is legal but is not expected to happen in the target trace, helping to identify tracing problems and suitability for use of a trace for core simulation. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.8.17-->
<!-- start footer part -->
<!--BEGIN GENERATE_TREEVIEW-->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer" style="float:none;text-align:center"><img border=0 src="favicon.png"> &nbsp;  DynamoRIO version 9.0.1 --- Mon Feb 14 2022 19:02:58 &nbsp; <img border=0 src="favicon.png">
</small></address>
