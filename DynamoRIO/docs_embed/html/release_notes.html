---
title: "Release Notes for Version 9.0.1"
layout: default
permalink: /release_notes.html
---
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DynamoRIO
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Release Notes for Version 9.0.1 </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This section is divided into the following subsections:</p>
<ul>
<li><a class="el" href="release_notes.html#sec_package">Distribution Contents</a></li>
<li><a class="el" href="release_notes.html#sec_changes">Changes Since Prior Releases</a></li>
<li><a class="el" href="release_notes.html#sec_limits">Limitations</a></li>
<li><a class="el" href="release_notes.html#sec_future">Plans for Future Releases</a></li>
</ul>
<p> 
<table width=100% bgcolor="#000000" cellspacing=0 cellpadding=2 border=0>
  <tr><td><table width=100% bgcolor="#0000C0" cellspacing=0 cellpadding=1 border=0>
  <tr><td><table width=100% bgcolor="#0000C0" cellspacing=0 cellpadding=1 border=0>
  <tr><td></td></tr></table></td></tr></table></td></tr></table>
 </p>
<h1><a class="anchor" id="sec_package"></a>
Distribution Contents</h1>
<p>The following are part of the DynamoRIO release distribution:</p>
<ul>
<li>Four different DynamoRIO libraries: debug and release for each of 32-bit and 64-bit (for ARM or AArch64 builds, only a single bitwidth matching the ISA is provided). The debug library enables assertion messages to more easily diagnose API usage errors.</li>
<li>Four different IA-32/AMD64/ARM/AArch64 decoding static libraries: debug and release for each of 32-bit and 64-bit (only 32-bit for ARM and 64-bit for AArch64). The debug library enables assertion messages to more easily diagnose API usage errors.</li>
<li>A variety of DynamoRIO Extension libraries that augment the core DynamoRIO API (see <a class="el" href="page_ext.html">Extension API</a>).</li>
<li>Additional Extension libraries from the Dr. Memory Framework (DRMF). If this documentation is part of a DynamoRIO public release, <a href="../../drmemory/drmemory/docs/html/page_drmf.html">this link</a> should point at the local documentation for DRMF.</li>
<li>The DynamoRIO configuration and execution libraries and command-line utilities <code>drconfiglib.dll</code>, <code>drinjectlib.dll</code>, <code>drfrontendlib.lib</code>, <code>drconfig.exe</code>, <code>drrun.exe</code>, and <code>drinject.exe</code>. On Linux, the tools are named <code>drconfig</code>, <code>drrun</code>, and <code>drinject</code>.</li>
<li>A utility <code>drview.exe</code> for viewing which processes are running under DynamoRIO control (Windows package only).</li>
<li>Header files for the DynamoRIO APIs.</li>
<li>This documentation.</li>
<li><a class="el" href="API_samples.html">Sample clients</a>.</li>
<li>A graphical statistics viewer <code>DRstats.exe</code> that displays internal DynamoRIO statistics as well as custom statistics defined by a client (see <a class="el" href="API_samples.html#sec_drstats">Use of Custom Client Statistics with the Windows GUI</a>) (Windows package only). DynamoRIO exports a large number of statistics in its debug build, and a handful in release builds.</li>
<li>A binary tracedump reader, which also functions as a sample client using DynamoRIO as a standalone library (see <a class="el" href="page_standalone.html#sec_standalone">Using DynamoRIO as a Standalone Library</a>).</li>
<li>A number of end-user tools including a code coverage tool (see <a class="el" href="page_drcov.html">Code Coverage Tool</a>), a multi-process cache simulator (see <a class="el" href="page_drcachesim.html">Tracing and Analysis Framework</a>), a last-level cache miss analyzer (see <a class="el" href="page_drcachesim.html">Tracing and Analysis Framework</a>), and a legacy CPU testing tool (see <a class="el" href="page_drcpusim.html">CPU Simulator</a>). If this is a DynamoRIO public release, it also includes the Dr. Memory memory debugging tool (see <a class="el" href="page_drmemory.html">Dr. Memory Memory Debugging Tool</a>), a system call tracer for Windows (see <a class="el" href="page_drstrace.html">System Call Tracer for Windows</a>), a library tracing tool (see <a class="el" href="page_drltrace.html">Library Call Tracer</a>), and a symbol querying tool (see <a class="el" href="page_symquery.html">Symbol Query Tool</a>).</li>
</ul>
<p>When unpacking the release package on Windows, be aware that the Cygwin unzip utility does not preserve executable permissions properly. After unzipping with Cygwin, add ugo+rx permissions to all of the .dll and .exe files in the resulting directory tree: </p><div class="fragment"><div class="line">find . -name \*.dll -exec chmod ugo+rx {} \; -o -name \*.exe -exec chmod ugo+rx {} \;</div>
</div><!-- fragment --><p> 
<table width=100% bgcolor="#000000" cellspacing=0 cellpadding=2 border=0>
  <tr><td><table width=100% bgcolor="#0000C0" cellspacing=0 cellpadding=1 border=0>
  <tr><td><table width=100% bgcolor="#0000C0" cellspacing=0 cellpadding=1 border=0>
  <tr><td></td></tr></table></td></tr></table></td></tr></table>
 </p>
<h1><a class="anchor" id="sec_changes"></a>
Changes Since Prior Releases</h1>
<p>The current version is 9.0.1. It includes Dr. Memory and the Dr. Memory Framework (DRMF) in the same package as DynamoRIO. DRMF provides the umbra, drsyscall, and drsymcache Extensions for use by clients.</p>
<p>The changes between version 9.0.1 and 9.0.0 include the following compatibility changes:</p><ul>
<li>Introduced a new CMake option called BUILD_PACKAGE to skip glibc compatibility checks. This is off by default such that building DynamoRIO from source is straight-forward to do on rolling release Linux distributions, and enabled by make/package.cmake when building a distributable version of DynamoRIO.</li>
</ul>
<p>Further non-compatibility-affecting changes include:</p><ul>
<li>Fixed a significant performance regression between 8.0.0 and 9.0.0 (between 8.0.18740 and 8.0.18747) affecting Windows programs with varying indirect branches on hot code paths.</li>
<li>Added alias support to droption.</li>
<li>The drcpusim option -blacklist was renamed to -blocklist but the old name is still accepted.</li>
<li>Added <a class="el" href="classdroption__parser__t.html#aeee4e7eee1281e71464fb1ffc5d1a743">droption_parser_t::clear_values()</a> for re-setting accumulating option values on re-attach for statically linked clients.</li>
<li>Added the count of cache exits to <a class="el" href="dr__defines_8h.html#a213f155f07a830b79111449062545352">dr_stats_t</a>.</li>
</ul>
<p>The changes between version 9.0.0 and 8.0.0 include the following compatibility changes:</p>
<ul>
<li>The AArch64 opcode enum ordering changed.</li>
<li>A source compatibilty change in drcachesim analysis tools for users who have created derived classes from existing analysis tools: member fields of classes are now following a consistent style with an underscore suffix. References to renamed fields will need to be updated.</li>
<li>A change in the load callbacks used with <a class="el" href="group__drcovlib.html#ga9c2889006a80254645521f81a1a486f5">drmodtrack_add_custom_data()</a> and <a class="el" href="drmemtrace_8h.html#a8644981035cdedfafb000d03cd223399">drmemtrace_custom_module_data()</a>: they each take an additional parameter, the segment index. The custom data field is now per-segment and not per-module, and all callbacks are invoked separately for each segment.</li>
</ul>
<p>The changes between version 9.0.1 and 8.0.0 include the following minor compatibility changes:</p>
<ul>
<li>drconfiglib (and thus drrun and drconfig) now sets only the new client path options which are added in this release to support other-bitwidth child processes. This means that a drconfiglib from this version will not properly configure for a DynamoRIO core library from a prior version.</li>
<li>A new option -ldstex2cas is on by default on ARM and AArch64. This converts load-exclusive store-exclusive sequences to use compare-and-swap instead, which enables normal instrumentation of such sequences without clearing the exclusive monitor and causing infinite loops. However, the compare- and-swap's semantics are not identical: it does not detect "ABA" changes and could cause errors in lock-free data structures or other application constructs. See <a class="el" href="API_BT.html#sec_ldrex">Exclusive Monitor Instrumentation</a> for more information.</li>
<li>The header file <a class="el" href="dr__tools_8h.html" title="Main API routines, including transparency support.">dr_tools.h</a> has been split up, with module information now in a new file <a class="el" href="dr__modules_8h.html" title="Application module (library) querying routines.">dr_modules.h</a>, os-specific queries in dr_os_api.h, and tracedump types in <a class="el" href="dr__tracedump_8h.html" title="Binary trace dump format for the -tracedump_binary option.">dr_tracedump.h</a>. <a class="el" href="dr__api_8h.html" title="Top-level include file for DynamoRIO API.">dr_api.h</a> includes the new files, so users including <a class="el" href="dr__api_8h.html" title="Top-level include file for DynamoRIO API.">dr_api.h</a> are unaffected.</li>
<li>The header files <a class="el" href="dr__ir__utils_8h.html" title="Code transformation utilities.">dr_ir_utils.h</a>, <a class="el" href="dr__ir__opnd_8h.html" title="Functions and defines to create and manipulate instruction operands.">dr_ir_opnd.h</a>, <a class="el" href="dr__ir__instr_8h.html" title="Functions to create and manipulate instructions.">dr_ir_instr.h</a>, and <a class="el" href="dr__ir__instrlist_8h.html" title="Functions to create and manipulate lists of instructions.">dr_ir_instrlist.h</a> have been split up, with encoding routines now in a new file <a class="el" href="dr__ir__encode_8h.html" title="Encoding routines.">dr_ir_encode.h</a>, decoding routines in <a class="el" href="dr__ir__decode_8h.html" title="Decoding routines.">dr_ir_decode.h</a>, disassembly routines in <a class="el" href="dr__ir__disassemble_8h.html" title="Disassembly routines.">dr_ir_disassemble.h</a>. <a class="el" href="dr__api_8h.html" title="Top-level include file for DynamoRIO API.">dr_api.h</a> includes the new files, so users including <a class="el" href="dr__api_8h.html" title="Top-level include file for DynamoRIO API.">dr_api.h</a> are unaffected.</li>
<li>The routines <a class="el" href="dr__ir__utils_8h.html#aa23665c11b7d79a29ea185113d07944f">dr_insert_save_fpstate()</a>, <a class="el" href="dr__ir__utils_8h.html#a74016eacf3a9cfc20a93a9ac0bca9c59">dr_insert_restore_fpstate()</a>, and <a class="el" href="dr__ir__utils_8h.html#a9038ab78f7bc0385b10ea256610022ca">dr_insert_get_seg_base()</a> moved from <a class="el" href="dr__proc_8h.html" title="Utility routines for identifying features of the processor.">dr_proc.h</a> to <a class="el" href="dr__ir__utils_8h.html" title="Code transformation utilities.">dr_ir_utils.h</a>.</li>
<li>Added a flags field to <a class="el" href="group__drmgr.html#gac779b3f5c1076450ad32083da0921768">emulated_instr_t</a> and two emulator-set flags values: <a class="el" href="group__drmgr.html#ggaaa131b3cd2bf8aadb9ac196911aa6b32a60a60d7210d981f2fb0692e125e00dc4">DR_EMULATE_REST_OF_BLOCK</a>, indicating an emulation sequence that has no end label and includes the rest of the block; and <a class="el" href="group__drmgr.html#ggaaa131b3cd2bf8aadb9ac196911aa6b32a526e36749e0fb1ca4e2a00a095a42efb">DR_EMULATE_INSTR_ONLY</a>, indicating an emulation for which instrumentation should still examine the emulation sequence for observing data operations. A third value is set by <a class="el" href="group__drmgr.html#ga37ca9b0961ad0b562318702897df729b">drmgr_in_emulation_region()</a>: <a class="el" href="group__drmgr.html#ggaaa131b3cd2bf8aadb9ac196911aa6b32abba41ccc153c360ffe9bf664eca14c74">DR_EMULATE_IS_FIRST_INSTR</a>. This flag addition preserves binary compatibility, but source code that did not zero the structure could end up with an uninitialized flags field when calling <a class="el" href="group__drmgr.html#ga94b96a01f3fa0ce7ad6a5f675965d952">drmgr_insert_emulation_start()</a>.</li>
<li>drcov's output now uses a module segment offset, rather than a module base offset. This better supports modules with code beyond the first segment and with gaps between segments.</li>
<li>Changed the drcachesim view tool's behavior to count all trace entries, rather than just instructions, with respect to the -skip_refs and -sim_refs flags. This matches the cache and TLB simulator behavior.</li>
<li>drcachesim's child cache statistics now include hits from all lower levels and not just the immediately lower level child caches.</li>
<li>For AArch64 the OP_sys opcode is still implemented but has been split up into its data and instruction cache opcodes. In cases where OP_sys was used with enums representing data and instruction cache opcodes, OP_sys is no longer used, replaced by the relevant data and instruction cache opcodes starting with OP_dc_ and OP_ic_, e.g. OP_ic_ivau, OP_dc_zva.</li>
</ul>
<p>Further non-compatibility-affecting changes include:</p>
<ul>
<li>On x86 Windows, different-bitwidth child processes are now followed into. The default injection method has also changed to a new method relying on an image entry hook in some cases. The old behavior can be requested by passing "-late" to drrun or calling <a class="el" href="dr__inject_8h.html#a3f3423003e1cff4e1b4ffa0ba906b8fc">dr_inject_use_late_injection()</a>.</li>
<li>Added <a class="el" href="group__drmgr.html#ga14834254df9e9ded4369063e5cfba909">drmgr_register_opcode_instrumentation_event()</a> and <a class="el" href="group__drmgr.html#ga20ff5e38d676266d12f6641326bed87a">drmgr_unregister_opcode_instrumentation_event()</a> so that drmgr supports opcode event instrumentation.</li>
<li>Added <a class="el" href="dr__os__utils_8h.html#af0f7565b305ddec7732dc8014e5cc152">dr_num_app_args()</a>, <a class="el" href="dr__os__utils_8h.html#a5af582761c71e103475166b24181bb4c">dr_get_app_args()</a> and <a class="el" href="dr__os__utils_8h.html#a5a4bcecff5d7b6cb97c8e381468ca99c">dr_app_arg_as_cstring()</a> to enable the gathering of application command-line args. Currently, implemented for Unix systems only.</li>
<li>Added <a class="el" href="dr__tools_8h.html#a908074540820a8140bbc46cb3c020778">dr_get_error_code()</a> to obtain the error code of the last failed API routine. Not all API routines support the setting of error codes. Please look at their documentation to check if they do.</li>
<li>Added -instr_only_trace option to drcachesim.</li>
<li>Added other-bitwidth child process support, with the other client library specified by "-c32" "-c64" to drrun or drdeploy, by <a class="el" href="dr__config_8h.html#ac3571e9ba325cc9cc8919734c725459e">dr_register_client_ex()</a> with <a class="el" href="struct__dr__config__client__t.html#afbfeecffd7ef5ad27aa22891b1d41a58">dr_config_client_t.is_alt_bitwidth</a>=true to drconfiglib, and by CLIENT{32,64}_{ABS,REL} in tool files. Added <a class="el" href="dr__config_8h.html#ab50594466b63a0f4edf831f6d24cdbd8">dr_get_client_info_ex()</a> and <a class="el" href="dr__config_8h.html#a934fb86b6b31472afbb891ef64f1209d">dr_client_iterator_next_ex()</a> to support querying other-bitwidth client registration.</li>
<li>Added a new drcachesim option <code>-max_global_trace_refs</code> for specifying a global trace size limit that does not terminate the process.</li>
<li>Added opnd_create_immed_double(), opnd_get_immed_double() and opnd_is_immed_double() to enable the creation and handling of double precision floating-point operands.</li>
<li>Added dr_flush_region_ex API that accepts a callback to be executed after synch flush but before the threads are resumed. The existing dr_flush_region API is modified to invoke dr_flush_region_ex with a NULL callback.</li>
<li>Added <a class="el" href="dr__ir__instr_8h.html#abdbd15b741792307845f5fc2df9b4b5d">instr_is_exclusive_load()</a>.</li>
<li>Added <a class="el" href="dr__ir__macros__aarch64_8h.html#a0af576a857ca51596cc247dfa5771370">XINST_CREATE_store_pair()</a> and <a class="el" href="dr__ir__macros__aarch64_8h.html#a274c966568324357b4bb5785738bcfb7">XINST_CREATE_load_pair()</a>.</li>
<li>Added <a class="el" href="dr__ir__instr_8h.html#a7aa1835665d4a2933d0a9bcfb0d42b4e">instr_replace_reg_resize()</a> and <a class="el" href="dr__ir__opnd_8h.html#aad964c704e6bdfcb1fe0fb633cd64e44">opnd_replace_reg_resize()</a>.</li>
<li>Added <a class="el" href="group__drx.html#gga4caf8d8f829279fba122163d961608a4aa50fccbd9d5dc9f300d6033c971f95e4">DRX_COUNTER_REL_ACQ</a> flag to optionally enable release-acquire semantics for <a class="el" href="group__drx.html#ga5eba10b0f9536c1a108d796e0b84c4cd">drx_insert_counter_update()</a> on AArchXX.</li>
<li>Added a preferred base field to the <a class="el" href="struct__module__data__t.html">_module_data_t</a> struct and to the <a class="el" href="struct__drmodtrack__info__t.html">_drmodtrack_info_t</a> struct.</li>
<li>Added support for running under QEMU via the <a class="el" href="page_deploy.html#op_xarch_root">-xarch_root</a> runtime option which locates guest system libraries and enables workarounds for problems with QEMU's threads.</li>
<li>Added <a class="el" href="dr__events_8h.html#a66a5226e857e03ebb685b3e8e1566c7c">dr_is_detaching()</a>, an API to query whether detach is in progress.</li>
<li>Added <a class="el" href="dr__ir__instr_8h.html#a86eec1ba7341719083b40da5a2f2f8f2">instr_zeroes_zmmh()</a> that returns true if an instruction clears the upper bits of a ZMM register with zeros.</li>
<li>Added <a class="el" href="dr__ir__instr_8h.html#a948542ee1a6cc2dbffeed26fd43285dc">instr_clear_label_callback()</a>.</li>
<li>Added <a class="el" href="group__drreg.html#gga9aa35aebc3d4f0f41cba66bfcde82a00a2d1537112f577f6e8943463069b523d6">DRREG_HANDLE_MULTI_PHASE_SLOT_RESERVATIONS</a> to <a class="el" href="group__drreg.html#ga9aa35aebc3d4f0f41cba66bfcde82a00">drreg_bb_properties_t</a> to enable logic that avoids conflicts in spill slots when drreg is used to reserve registers in multiple phases.</li>
<li>Added <a class="el" href="group__drmgr.html#ga37ca9b0961ad0b562318702897df729b">drmgr_in_emulation_region()</a>, <a class="el" href="group__drmgr.html#gad375fb1c1a8683c54a78f4f5b9951f4a">drmgr_orig_app_instr_for_fetch()</a>, and <a class="el" href="group__drmgr.html#ga6373ac13132abb039c7d0593bde073ba">drmgr_orig_app_instr_for_operands()</a> for more conveniently handling emulation.</li>
<li>Added the reconstructed <a class="el" href="dr__defines_8h.html#a3fb73c55def575ec5705577625491d66">instrlist_t</a> when available for the faulting fragment to <a class="el" href="dr__events_8h.html#ab5cb8a18ea3f099157d827cf09d6a8d8">dr_fault_fragment_info_t</a>. This makes it available to the restore state event callback(s) via the <a class="el" href="dr__events_8h.html#a7b60f2254adf92bc99ebd248f76044fe">dr_restore_state_info_t</a> arg.</li>
<li>Added the source context for restartable sequence aborts (<a class="el" href="dr__events_8h.html#a05b0d8543956536b9938ccb6fdd89570a338c2b996b143517f0378c60e1429206">DR_XFER_RSEQ_ABORT</a>) which was previously missing.</li>
<li>Added a <a class="el" href="trace__entry_8h.html#aa7f51b43d8f1e20dc45e3618684b15e9aab9bc211e1e5f2f567a085d825e37745">TRACE_MARKER_TYPE_VERSION</a> entry to drmemtrace traces.</li>
<li>Augmented drmemtrace <a class="el" href="trace__entry_8h.html#aa7f51b43d8f1e20dc45e3618684b15e9a3aa19ac796e054c478f0a6ec99286020">TRACE_MARKER_TYPE_KERNEL_EVENT</a> entries with the absolute PC of the interruption point, including for restartable sequence aborts, which now also have an additional <a class="el" href="trace__entry_8h.html#aa7f51b43d8f1e20dc45e3618684b15e9a3a011c218cb80ceeb9e3105d449e3280">TRACE_MARKER_TYPE_RSEQ_ABORT</a> identifier.</li>
<li>Added a fifth instrumentation phase (meta_instru) that executes after the insertion of instrumentation and instrumentation optimizations. Its primary purpose is to enable debugging of instrumentation sequences and detection of instrumentation-induced bugs.</li>
<li>Added <code>drstatecmp</code> Extension which provides mechanisms to enable systematic and exhaustive machine state comparisons across instrumentation sequences.</li>
<li>Added <a class="el" href="group__drcovlib.html#ga338038ccdcccfae189c746a5ebb279e3">drmodtrack_lookup_segment()</a>.</li>
<li>Added a new drrun option <code>-attach</code> for attaching to a running process. This is currently an experimental option and is not yet as well-supported as launching a new process. It is only supported on x86 at this time.</li>
<li>Added <a class="el" href="page_drcallstack.html">Callstack Walking</a> Extension for walking application callstacks, with an initial Linux-only implementation.</li>
<li>Added new <a class="el" href="dr__defines_8h.html#af1b1bc23c42ffb7452568176b09b1212">dr_cleancall_save_t</a> flags which are required for proper interaction between clean calls and drreg: <a class="el" href="dr__defines_8h.html#af1b1bc23c42ffb7452568176b09b1212a76efe3cf7cffc2bf14da79133bc2e5c3">DR_CLEANCALL_READS_APP_CONTEXT</a> must be set for <a class="el" href="dr__ir__utils_8h.html#a9e348b2596b8750ce3fad234ab022ced">dr_get_mcontext()</a> to obtain the proper values, and <a class="el" href="dr__defines_8h.html#af1b1bc23c42ffb7452568176b09b1212ab0fb37c5cbbd2c2cd9ebd9eb5e53f23e">DR_CLEANCALL_WRITES_APP_CONTEXT</a> must be set to ensure that <a class="el" href="dr__ir__utils_8h.html#ac4bfa7fc3f9d4adb0857675bec2712a2">dr_set_mcontext()</a> is persistent. If the call may be skipped by tool-inserted control flow, <a class="el" href="dr__defines_8h.html#af1b1bc23c42ffb7452568176b09b1212ab3ed3f85123fad82c4377cebaa2c36ed">DR_CLEANCALL_MULTIPATH</a> must additionally be set.</li>
<li>Added a new event <a class="el" href="dr__events_8h.html#abfbfebb6df4c756bb9e4c2a9cac82ce9">dr_register_clean_call_insertion_event()</a>, meant for use by register management libraries.</li>
<li>Added <a class="el" href="group__drreg.html#ga2ca98376d910bf8b417d60954193cae1">drreg_statelessly_restore_all()</a>.</li>
<li>Completed <a class="el" href="group__drx.html#ga30c372c0385d8584660f5c449a18ec36">drx_expand_scatter_gather()</a> support for emulating x86 scatter/gather instructions using a sequence of scalar stores/loads. The scalar store/load sequence makes it easier for clients to instrument each memory access.</li>
</ul>
<hr  />
<p>Version 8.0.0 includes Dr. Memory and the Dr. Memory Framework (DRMF) in the same package as DynamoRIO. DRMF provides the umbra, drsyscall, and drsymcache Extensions for use by clients.</p>
<p>The changes between version 8.0.0 and 7.1.0 include the following compatibility changes:</p>
<ul>
<li>Changed the enumeration of the DR_REG_ enum by adding x86 AVX-512 registers as well as reserved ranges for future extensions. This is a binary compatibility change for the DR_REG_ enum.</li>
<li>Changed the enumeration of the OPSZ_ enum by moving its start back to 0. The OPSZ_ enum now completely overlaps the DR_REG_ enum. This is a binary compatibility change for the OPSZ_ enum.</li>
<li>Added a new encoding hint field to <a class="el" href="structinstr__t.html">instr_t</a>.</li>
<li>Added a requirement that a C++11-compliant compiler be used with <a class="el" href="page_droption.html">DynamoRIO Option Parser</a>.</li>
<li>Changed the syntax of the drcachesim -record_function option. It no longer takes in an identifier: the identifier is computed by the tracer. It thus takes pairs, with an optional third argument for flags such as "noret" to indicate that the return value should not be recorded. The tracer writes out a file listing functions traced and their identifiers with "id,library!symbol" on each line of the file.</li>
<li>Added free_key_func to the drcontainers <a class="el" href="group__drcontainers.html#ga2e9225a8b532a579db4f193b2a236686">hashtable_configure()</a>, which adds a field to <a class="el" href="group__drcontainers.html#gad856384ed5ad3b1a1c42e5095d7432b8">hashtable_config_t</a>. Binary compatibility is maintained via the size field of the struct, but users who were not zeroing the whole structure and who update and recompile without setting the field may see crashes due to free_key_func being uninitialized.</li>
<li>Changed the 32-bit x86 stack alignment of DynamoRIO and clients built using DR's CMake configuration from 4 to 16 on Linux to match modern conventions.</li>
</ul>
<p>The changes between version 8.0.0 and 7.1.0 include the following minor compatibility changes:</p>
<ul>
<li>Added the define <a class="el" href="dr__defines_8h.html#a05ac94531596e23105f33770fb9011a2">MCXT_NUM_SIMD_SLOTS</a> that was renamed from NUM_SIMD_SLOTS. <a class="el" href="dr__defines_8h.html#a05ac94531596e23105f33770fb9011a2">MCXT_NUM_SIMD_SLOTS</a> is now a constant that shall be used only to determine the number of SIMD slots in DynamoRIO's mcontext.</li>
<li>Replaced NUM_SIMD_SLOTS with <a class="el" href="dr__proc_8h.html#acbd8af78dc9f199c6d27b8fc7158fb9f">proc_num_simd_saved()</a>. Clients may set(DynamoRIO_NUM_SIMD_SLOTS_COMPATIBILITY ON) in order to provide the define NUM_SIMD_SLOTS using <a class="el" href="dr__proc_8h.html#acbd8af78dc9f199c6d27b8fc7158fb9f">proc_num_simd_saved()</a>. The macro is not a constant expression and code relying on this needs to be rewritten. DynamoRIO_NUM_SIMD_SLOTS_COMPATIBILITY is set automatically if clients target version 7.1.0 or earlier.</li>
<li>Renamed mcontext's "ymm" structure to "simd".</li>
<li>Deprecated <a class="el" href="dr__ir__opnd_8h.html#afa3df205f31cf4fb45b04148b1b9cf4d">reg_is_xmm()</a> and <a class="el" href="dr__ir__opnd_8h.html#ac9e2ad2c9b03ea3d789d036bcf0eee13">reg_is_ymm()</a>.</li>
<li>The function <a class="el" href="dr__ir__opnd_8h.html#a3d184213410a0e31c4b3895fb7d4708f">reg_is_extended()</a> now returns true for the upper 8 simd registers as part of AVX-512, e.g. xmm16 - xmm31.</li>
<li>Dropped support for clients used with statically linked DynamoRIO to reach the code cache with 32-bit displacements.</li>
<li>An additional parameter in the accessors to the drcachesim cache stats (namely cache_stats_t and caching_device_stats_t) that passes a pointer to the cache block being accessed (on a hit) or being replaced (on a miss). This allows users to extend the cache block and stats classes in order to collect more stats.</li>
<li>Moves the immediate operand of the VEX encoded version of vextractps and vinsertps to be the first source.</li>
<li>The GPR versions of the vmovd and vmovq AVX opcodes are no longer combined into a single vmovd.</li>
<li>Changed the <a class="el" href="dr__defines_8h.html#a176e4c39a833f4d01f0ecd322c0f4343">PFX</a> format string specifier to use p rather than x internally.</li>
<li>DR no longer forwards <em>snprintf, _snwprintf, _vsnprintf, sprintf, or sscanf to ntdll. Clients should use the dr</em>-prefixed versions of these functions.</li>
<li>PC-relative control transfer instructions are now auto-re-relativized by the general decoder and encoder. This affects clients and standalone tools that use <a class="el" href="dr__ir__decode_8h.html#abf858ce8d17c1221ea6121f1bb437348">decode_from_copy()</a> or <a class="el" href="dr__ir__encode_8h.html#a285a9fb1eaa589b9bb143c8c85861b2b">instr_encode_to_copy()</a> or <a class="el" href="dr__ir__encode_8h.html#a8eacc8e4f757c7d3ed0e29f464021522">instrlist_encode_to_copy()</a>. Previously, re-relativization for instruction references only happened when an instruction was re-encoded. This auto-PC-relativization can be avoided by calling instr_set_rip_rel_valid() and setting the validity of the PC-relative data to false.</li>
<li>Fixed major synchronization bugs on ARM and AArch64.</li>
</ul>
<p>Further non-compatibility-affecting changes include:</p>
<ul>
<li>Added the function <a class="el" href="dr__proc_8h.html#a86481f6ae770b015377ec5feb2668c15">proc_num_simd_registers()</a>.</li>
<li>Added <a class="el" href="dr__frontend_8h.html#ad681f3b7f775aaec45bda7f53167a956">drfront_set_verbose()</a> to obtain diagnostics from drfrontendlib.</li>
<li>Added new fields to <a class="el" href="dr__os__utils_8h.html#a1074b84b2b9eb05337a431193789c9e2">dr_os_version_info_t</a> which contain the build number, edition, and Windows 10 release identifier.</li>
<li>Added the function <a class="el" href="dr__ir__instr_8h.html#a811c5d939e913be439fe34be3c245f35">instr_is_xsave()</a>.</li>
<li>Added the type <a class="el" href="dr__defines_8h.html#a6f8b2dc4a0f32c97355ef10810d54040">dr_zmm_t</a>.</li>
<li>Added the type <a class="el" href="dr__defines_8h.html#a5084e722e25af1e14bec9f237f495b15">dr_opmask_t</a>.</li>
<li>Added the define <a class="el" href="dr__defines_8h.html#a35e60e348f7cfc65f1d03904059e7830">MCXT_NUM_OPMASK_SLOTS</a> for the number of AVX-512 OpMask registers.</li>
<li>Renamed mcontext's ymm structure into simd.</li>
<li>Added a new option -logprefix to drcov.</li>
<li>Added the AVX-512 registers <a class="el" href="dr__ir__opnd_8h.html#ab04a0655cd1e3bcac5e8f48c18df1a57a0c8387ddb0d463457c375e24f2fce948">DR_REG_XMM16</a> - <a class="el" href="dr__ir__opnd_8h.html#ab04a0655cd1e3bcac5e8f48c18df1a57a0cb48aa09d10eae29358ef48dec588a5">DR_REG_XMM31</a>, <a class="el" href="dr__ir__opnd_8h.html#ab04a0655cd1e3bcac5e8f48c18df1a57ab654351c5f29cfd8a2adbca49e1b5273">DR_REG_YMM16</a> - <a class="el" href="dr__ir__opnd_8h.html#ab04a0655cd1e3bcac5e8f48c18df1a57a723f3a917415df7bd1b0d5b7ae770983">DR_REG_YMM31</a> and their <a class="el" href="dr__ir__opnd_8h.html#ab04a0655cd1e3bcac5e8f48c18df1a57a9635f42fa6451ebf7a9a6c7af5e66ea5">DR_REG_ZMM0</a> - <a class="el" href="dr__ir__opnd_8h.html#ab04a0655cd1e3bcac5e8f48c18df1a57a5d95bd7690815e869b1009edbc33977b">DR_REG_ZMM31</a> siblings as well as <a class="el" href="dr__ir__opnd_8h.html#ab04a0655cd1e3bcac5e8f48c18df1a57acd57791a95e1c00f8b9bcc0a1dc63ecf">DR_REG_K0</a> - <a class="el" href="dr__ir__opnd_8h.html#ab04a0655cd1e3bcac5e8f48c18df1a57a31c30666a382d2ff223271518b78c5ae">DR_REG_K7</a>.</li>
<li>Added the function <a class="el" href="dr__ir__opnd_8h.html#a223bb2c6aab716d9b21ca56039c288c8">reg_is_opmask()</a>.</li>
<li>Added the functions <a class="el" href="dr__ir__opnd_8h.html#a94dfd3331d69e734d6b458e7ffa4b113">reg_is_strictly_xmm()</a>, <a class="el" href="dr__ir__opnd_8h.html#a58520a434a0c8453532096862b78f86e">reg_is_strictly_ymm()</a> and <a class="el" href="dr__ir__opnd_8h.html#a3db6b8051352da7d6fb83ad3faf6e39d">reg_is_strictly_zmm()</a>.</li>
<li>Added the function <a class="el" href="dr__ir__opnd_8h.html#a0c72ebc524eec58cc52c0fda76251b19">reg_is_avx512_extended()</a>.</li>
<li>Added the function <a class="el" href="dr__ir__instr_8h.html#ae29b1470af83f8f73d587d08ea6dbbbd">instr_is_opmask()</a>.</li>
<li>Added <a class="el" href="dr__ir__opnd_8h.html#a8b349189fdae90733f1abcd87d45ea93">reg_set_value_ex()</a> to set XMM, YMM and ZMM values.</li>
<li>Added the functions <a class="el" href="dr__ir__instr_8h.html#a8649a932914daaf6985ae37f25a1e813">instr_set_encoding_hint()</a>, <a class="el" href="dr__ir__instr_8h.html#aa1d79b68b5dc3ee532d789af5b082d53">instr_has_encoding_hint()</a>.</li>
<li>Added the type <a class="el" href="dr__ir__instr_8h.html#aea5eb2378e8c8e2e928f4e501f5b3808">dr_encoding_hint_type_t</a>.</li>
<li>Added <a class="el" href="dr__ir__macros_8h.html#a3dd77ca1e79cf1b15b215694bef0affa">INSTR_ENCODING_HINT</a> macro.</li>
<li>Added <a class="el" href="dr__tools_8h.html#a407fa7ac15e482174d2ff75dcc312192">dr_standalone_exit()</a> with support for re-attaching afterward.</li>
<li>Added <a class="el" href="dr__events_8h.html#a101820819df420894a4fbb6a6c0651c3">dr_register_low_on_memory_event()</a> for tracking low on memory events.</li>
<li>Added <a class="el" href="dr__ir__utils_8h.html#a86f35e8073bbec6ba326b7c3ff2d6284">dr_mcontext_zmm_fields_valid()</a> to query the state of lazy AVX-512 context switching.</li>
<li>Added the function <a class="el" href="dr__proc_8h.html#aaba068462550d9b73c32c0991c5f7551">proc_avx512_enabled()</a>.</li>
<li>Added support for applications using the Linux kernel's restartable sequence ("rseq") feature, subject to the limitations listed in <a class="el" href="API_BT.html#sec_rseq">Restartable Sequence Instrumentation Constraints</a>.</li>
<li>Added coherence support in drcachesim.</li>
<li>Added the function <a class="el" href="dr__proc_8h.html#a92eb558d6a91d1add4f05717938b78aa">proc_num_opmask_registers()</a>;</li>
<li><a class="el" href="dr__ir__opnd_8h.html#a3e4f2b305b3d6536d27bad42b57cad84">reg_get_value_ex()</a> now supports reading AVX-512 mask registers.</li>
<li>Added the function <a class="el" href="dr__ir__opnd_8h.html#a6f336ce867c15469b664a710fe8e2a2b">reg_is_bnd()</a>.</li>
<li>Added the functions <a class="el" href="dr__ir__instr_8h.html#ab99dd3460f2fd5abc2d59a9ddb26a6b5">instr_is_gather()</a> and <a class="el" href="dr__ir__instr_8h.html#ad78d9b3a3bd6acf6ca3d1c047a6f0830">instr_is_scatter()</a>.</li>
<li>Added the function <a class="el" href="group__drx.html#ga30c372c0385d8584660f5c449a18ec36">drx_expand_scatter_gather()</a>.</li>
<li>Added the function <a class="el" href="dr__tools_8h.html#a4a6e3a2c6b51b4d57a18601f840cc9de">dr_atomic_add64_return_sum()</a>.</li>
<li>Added the function <a class="el" href="dr__ir__instr_8h.html#ada14ae87adcc52a9804b4645f43ceb48">instr_reads_from_exact_reg()</a> to test whether instructions read from exact registers.</li>
<li>Added the function <a class="el" href="dr__ir__opnd_8h.html#a02b51b4c365d63eff45b310f8eb680dd">reg_is_vector_simd()</a> to test whether registers are either XMM, YMM or ZMM, excluding any MMX register checks.</li>
<li>Added DR_NUM_SIMD_VECTOR_REGS as an alias to MCXT_NUM_SIMD_SLOTS in order to get the static number of supported SIMD vectors.</li>
<li>Added <a class="el" href="group__drmgr.html#ga604545b4d3e296acdbfe92e0af275fcc">drmgr_register_low_on_memory_event()</a>, <a class="el" href="group__drmgr.html#ga29d5f9f8bf50ec7cfbc2ac1f7dff8820">drmgr_unregister_low_on_memory_event()</a> and their variants so that drmgr can support low-on-memory events.</li>
<li>Added <a class="el" href="group__drmgr.html#ga6d7f56824be0f6b04d5b6353f0681d70">drmgr_is_first_nonlabel_instr()</a> and <a class="el" href="dr__ir__instrlist_8h.html#a2f7cbf7ff74de027258b006cb71da483">instrlist_first_nonlabel()</a>.</li>
<li>Added a new standalone tool "drdisas" which disassembles raw bytes using DR's decoder.</li>
<li>Added <a class="el" href="dr__ir__decode_8h.html#ae858a4329f5eab4fd5c2562831ddc196">decode_sizeof_ex()</a> and <a class="el" href="dr__ir__instr_8h.html#ab4dd9c7a0964854463773c9a88e06fea">instr_get_rel_data_or_instr_target()</a> handling relative instruction references.</li>
<li>Added <a class="el" href="group__drx.html#ga2f2b2e6468760cdee7c55975e8cdce5c">drx_instrlist_size()</a> and <a class="el" href="group__drx.html#ga4ced61bc9752b42236f79929a3daf830">drx_instrlist_app_size()</a> to obtain the size of a basic block.</li>
<li>Added <a class="el" href="group__drreg.html#gad7fbf107e7b10fffb8da7d93b74153c4">drreg_restore_all()</a> to restore all unreserved registers currently maintained by drreg.</li>
<li>Added a func_view tool to drcachesim for analyzing function traces.</li>
<li>Added a non-heap-using instruction structure <a class="el" href="structinstr__noalloc__t.html">instr_noalloc_t</a> for use when decoding in a signal handler, along with <a class="el" href="dr__ir__instr_8h.html#a2b0ce5e5125951e4a7dfdc5ac716282a">instr_noalloc_init()</a> and <a class="el" href="dr__ir__instr_8h.html#a75a82f341d4ea6a5b5f29f2ef1263355">instr_from_noalloc()</a>.</li>
<li>Added <a class="el" href="group__drwrap.html#gaff958909001824afeeaee334dc612e51">drwrap_get_stats()</a>.</li>
<li>Added <a class="el" href="group__drwrap.html#gga16cc419209fcb0024d010599bb82aa76a92308b97214b3a3f575e6901a1b13871">DRWRAP_NO_DYNAMIC_RETADDRS</a> for reducing drwrap overhead at the cost of missing some post-call callbacks.</li>
<li>Added <a class="el" href="group__drwrap.html#gga16cc419209fcb0024d010599bb82aa76acec7da205cbb9dab0291d66254e47c88">DRWRAP_REPLACE_RETADDR</a> for an alternative method of setting up post-call control points by replacing return addresses. This does not work for every application, but reduces overhead.</li>
<li>Added -record_dynsym_only to drcachesim for faster function tracing symbol lookups when internal symbols are not needed.</li>
<li>Added -record_replace_retaddr_only to drcachesim for faster function tracing wrapping for well-behaved applications.</li>
<li>Added <a class="el" href="dr__ir__utils_8h.html#af21149237893f712d90da064805a4a57">dr_merge_arith_flags()</a> as a convenience routine to merge arithmetic flags for restoration done by outlined code.</li>
<li>Added <a class="el" href="dr__annotation_8h.html#ae540235e4d9025f60479d3fd181f697b">dr_annotation_pass_pc()</a> to obtain the interrupted PC in an annotation handler.</li>
<li>Added atomics for safe and visible aligned loads and stores on all platforms: <a class="el" href="dr__tools_8h.html#aed8d7a30d057679d5e791fb94a8910f7">dr_atomic_load32()</a>, <a class="el" href="dr__tools_8h.html#ad1f172d289258a22d037bd2ee57aed9c">dr_atomic_store32()</a>, <a class="el" href="dr__tools_8h.html#afcdbd3905a8b32ce1386d7de86b396c4">dr_atomic_load64()</a> <a class="el" href="dr__tools_8h.html#a2752c8a9f9637159c83819285ca4cc40">dr_atomic_store64()</a>.</li>
<li>The state restore event (<a class="el" href="dr__events_8h.html#a46dc6ae264b5b293e889cc88ea808eab">dr_register_restore_state_event()</a>) is now called for all translation attempts, even when the register state already contains application values, to allow clients to restore memory.</li>
<li>Added the function <a class="el" href="dr__os__utils_8h.html#a5ecb37bc10ee3d174a9bf7737e5fd37d">dr_get_process_id_from_drcontext()</a> for obtaining a process ID associated with the given drcontext, which may be different from the current <a class="el" href="dr__os__utils_8h.html#af99715c7ad2497ad86f4769da0f19699">dr_get_process_id()</a> in some contexts.</li>
<li>The private loader's malloc redirection now guarantees double-pointer-sized alignment, to match what system-provided allocators use.</li>
<li>Added a new DR extension, namely "drbbdup", which enables different case instrumentation of the same basic block by duplicating code.</li>
</ul>
<hr  />
<p>Version 7.1.0 includes Dr. Memory and the Dr. Memory Framework (DRMF) in the same package as DynamoRIO. DRMF provides the umbra, drsyscall, and drsymcache Extensions for use by clients.</p>
<p>The changes between version 7.1.0 and 7.0.0 include the following minor compatibility changes:</p>
<ul>
<li>The drltrace tool has been moved to the Dr.Memory Framework.</li>
<li>Removed DRMGR_PRIORITY_INSERT_CLS_ENTRY, DRMGR_PRIORITY_INSERT_CLS_EXIT, DRMGR_PRIORITY_NAME_CLS_ENTRY, and DRMGR_PRIORITY_NAME_CLS_EXIT, as the new kernel xfer event (<a class="el" href="group__drmgr.html#ga4db3e75ae461dc2596d24d0768ab2716">drmgr_register_kernel_xfer_event()</a>) removes the need for them.</li>
<li>Renamed the LOG_ macros (<a class="el" href="dr__tools_8h.html#a1632479322efa3952798f98177b54471">LOG_NONE</a>, <a class="el" href="dr__tools_8h.html#a7574ce4aa047de1f4a564c9b441e69dc">LOG_ALL</a>, etc.) to have a DR_ prefix to avoid name conflicts. Clients should set(DynamoRIO_LOG_COMPATIBILITY ON) prior to configure_DynamoRIO_client() to use the old constants and avoid any source changes; this will happen automatically if the client targets version 7.0.0 or earlier. Binary compatibility is unaffected.</li>
<li>Added a parameter to cmake functions DynamoRIO_get_target_path_for_execution and DynamoRIO_copy_target_to_device. External projects outside of DynamoRIO need to pass _DR_location_suffix.</li>
<li>The drcachesim tool's offline traces are now stored in separate files per traced application thread, rather than a single interleaved file. Reading and analyzing a legacy interleaved file is still supported, but all new generated traces are split. Splitting enables parallelized post-processing and trace analysis.</li>
<li>In standalone mode, there are no 32-bit-displacement reachability guarantees regarding DynamoRIO's heap.</li>
</ul>
<p>Further non-compatibility-affecting changes include:</p>
<ul>
<li>Added <a class="el" href="group__drx.html#gad71e3315ee11f3f51fd16e9488c79051">drx_buf_insert_buf_memcpy()</a>.</li>
<li>Added <a class="el" href="dr__ir__macros__aarch64_8h.html#a4e456d2d204fa85b0cbf4bf88bb432fb">XINST_CREATE_add_sll()</a>, <a class="el" href="dr__ir__macros__aarch64_8h.html#a684a52784e1696b33643ce69a91d599e">XINST_CREATE_jump_cond()</a>, and <a class="el" href="dr__ir__macros__aarch64_8h.html#aa1135f44453ab7b2c82edf75a99bfd26">XINST_CREATE_slr_s()</a>.</li>
<li>Added thread synchronization events via <a class="el" href="dr__tools_8h.html#ae450459bac13aece28ef7b00438339d1">dr_event_create()</a>, <a class="el" href="dr__tools_8h.html#a8f4f9d413cf4c6b6aedc83880b5b80d6">dr_event_destroy()</a>, <a class="el" href="dr__tools_8h.html#a2d5fadf6f5c125e1758ba64e9914913a">dr_event_wait()</a>, <a class="el" href="dr__tools_8h.html#a477e5120f49129fdc09a62051c4eba93">dr_event_signal()</a>, and <a class="el" href="dr__tools_8h.html#aafbc013e6cebabb2048eccd2f219026a">dr_event_reset()</a>.</li>
<li>Added drmodtrack customization via <a class="el" href="group__drcovlib.html#ga9c2889006a80254645521f81a1a486f5">drmodtrack_add_custom_data()</a> and post-processing support via <a class="el" href="group__drcovlib.html#ga9061a6cc8cd91041303e1c714b5ec8ec">drmodtrack_offline_write()</a>.</li>
<li>Added drcachesim customization via <a class="el" href="drmemtrace_8h.html#abb7be083ae67d4a389be1eb1c5fe1b6e">drmemtrace_replace_file_ops()</a>, <a class="el" href="drmemtrace_8h.html#a8644981035cdedfafb000d03cd223399">drmemtrace_custom_module_data()</a>, <a class="el" href="drmemtrace_8h.html#a788e3e4e25b13c1f6148a8fd544b2d81">drmemtrace_get_output_path()</a>, <a class="el" href="drmemtrace_8h.html#a8c93fd7bcda89efb7786ad0cf27f8ff2">drmemtrace_get_modlist_path()</a>, and a separate rawtrace library for post-processing customization with <a class="el" href="classraw2trace__t.html#ae88903e56d49c6118d9bd34874794b6b">raw2trace_t::handle_custom_data()</a>, <a class="el" href="classraw2trace__t.html#ac2476351d49c4ec1902d77fccde436de">raw2trace_t::do_module_parsing()</a>, <a class="el" href="classraw2trace__t.html#acf6b5d0b31b6f5a759b648c14686da34">raw2trace_t::do_conversion()</a>, and raw2trace_directory_t. The raw2trace library also includes an interface for obtaining further instruction information than is stored in the trace via <a class="el" href="classraw2trace__t.html#a3b63b0e61660418a5c1e985a64e952b4">raw2trace_t::do_module_parsing_and_mapping()</a> and <a class="el" href="classraw2trace__t.html#addaa1498d372dafc8cd6efef5e6738ab">raw2trace_t::find_mapped_trace_address()</a>. A corresponding CMake function for finding the tracer customization header is use_DynamoRIO_drmemtrace_tracer().</li>
<li>Added <a class="el" href="group__drreg.html#gae2ba110d4aca864533583a53f8e04d40">drreg_restore_app_aflags()</a>.</li>
<li>Added a set_value() function to the <a class="el" href="page_droption.html">DynamoRIO Option Parser</a>.</li>
<li>Added <a class="el" href="dr__ir__instrlist_8h.html#a0f3ebb7e7a847c44ab9518917ad0ce7b">instrlist_get_auto_predicate()</a> and <a class="el" href="dr__ir__instrlist_8h.html#a36321a6f6cbdbcd1b0e4e03132e15e26">instrlist_set_auto_predicate()</a>.</li>
<li>Globally enabled auto predication in the drmgr instrumentation insertion event by default.</li>
<li>Added <a class="el" href="group__drmgr.html#gada27721274b425e7b4ae5a6f5bb32d33">drmgr_disable_auto_predication()</a>.</li>
<li>Added a new option -signal_stack_size with a smaller default value than before, to save space on applications with many threads.</li>
<li>Added <a class="el" href="dr__ir__instr_8h.html#a2781b28dd7bf0ff307a284c08f1c107a">instr_predicate_is_cond()</a>.</li>
<li>Added a hardware data next-line prefetcher to drcachesim. It is on by default, so simulation results may not match those in prior releases. It can be disabled by running with "-data_prefetcher none" (see <a class="el" href="sec_drcachesim_ops.html">Simulator Parameters</a>).</li>
<li>Added a last-level cache miss recording feature to drcachesim.</li>
<li>Added a delayed tracing feature to drcachesim.</li>
<li>Added an option to drcachesim to specify cache warmup by loaded fraction of the last level cache.</li>
<li>On Linux, the VDSO module is now included in the module list at program startup.</li>
<li>Added support for Windows 10 1703. We provide an artificial version identifier <a class="el" href="dr__os__utils_8h.html#a311ab26d3bdc2d6ff7830b6f3ae9760ca2698c776a8acc3f599f342e45bf0b0fe">DR_WINDOWS_VERSION_10_1703</a> to distinguish this major update.</li>
<li>Added support for Windows 10 1709. We provide an artificial version identifier <a class="el" href="dr__os__utils_8h.html#a311ab26d3bdc2d6ff7830b6f3ae9760caecd33f47bf0e37f538589fe46097bad5">DR_WINDOWS_VERSION_10_1709</a> to distinguish this major update.</li>
<li>Added an event for kernel-mediated control flow via <a class="el" href="dr__events_8h.html#ac433abf2a9b5ec9a5571e39d7d069df2">dr_register_kernel_xfer_event()</a> with corresponding routines <a class="el" href="group__drmgr.html#ga4db3e75ae461dc2596d24d0768ab2716">drmgr_register_kernel_xfer_event()</a> and <a class="el" href="group__drmgr.html#ga0816f741663b1cc101449bd2cb2d8aea">drmgr_register_kernel_xfer_event_ex()</a>.</li>
<li>Added a new option -ignore_all_libs to drcpusim.</li>
<li>Added several new trace analysis tools to drcachesim: reuse distance, reuse time, histogram, and trace basic counts.</li>
<li>Added a trace analysis tool framework to facilitate creating custom trace tools using the CMake function use_DynamoRIO_drmemtrace() and exported drmemtrace_analyzer and analysis tool libraries.</li>
<li>Added the CMake function configure_DynamoRIO_main_headers() to facilitate using drfrontendlib by itself.</li>
<li>Added <a class="el" href="dr__ir__instr_8h.html#aa8a4ff65160ca859ad0716563ad99b42">instr_is_string_op()</a> and <a class="el" href="dr__ir__instr_8h.html#a9111efc06cd64862130c1a769e6647dd">instr_is_rep_string_op()</a>.</li>
<li>Added <a class="el" href="dr__tools_8h.html#a659d0f08d07d8b969d8f6c998be24848">dr_app_recurlock_lock()</a>.</li>
<li>Added <a class="el" href="group__drcontainers.html#ga01abdf4a47a2603aca94ab3f5be14c98">hashtable_apply_to_all_payloads()</a> to iterate over all payloads in a hashtable.</li>
<li>Added <a class="el" href="group__drutil.html#gae798d2a61656f716a250996171c8cff8">drutil_insert_get_mem_addr_ex()</a>.</li>
<li>Added <a class="el" href="dr__tools_8h.html#ad8c794ef952f9163ac3c4927aa859dbf">dr_vfprintf()</a>.</li>
<li>Added <a class="el" href="group__drmgr.html#ga798b4ae5da79d21d0e0b1a4eb962c950">drmgr_register_thread_init_event_user_data()</a> and <a class="el" href="group__drmgr.html#ga45210f010c66f233c8580aa1f58a294c">drmgr_unregister_thread_init_event_user_data()</a> to enable passing of user data.</li>
<li>Added <a class="el" href="group__drmgr.html#ga2a0c6aabdbb08225f1d2fd605fd09f81">drmgr_register_thread_exit_event_user_data()</a> and drmgr_unregister_thread_exit_event_usr_data() to enable passing of user data.</li>
<li>Added <a class="el" href="group__drmgr.html#ga87b99b8b2501c91207ec508828c082b4">drmgr_register_module_load_event_user_data()</a> and <a class="el" href="group__drmgr.html#ga765dbfbaa6b6429ca35e2445d70badfc">drmgr_unregister_module_load_event_user_data()</a> to enable passing of user data.</li>
<li>Added <a class="el" href="group__drmgr.html#ga20a8a8cd53bc9d76a453f6bfd13fc493">drmgr_register_module_unload_event_user_data()</a> and <a class="el" href="group__drmgr.html#ga931bff986b8763df57f85b0f6cdfde58">drmgr_unregister_module_unload_event()</a> to enable passing of user data.</li>
<li>Added a new drcachesim feature that records which cpu each thread executed on along with an optional simulator scheduling feature to schedule threads on simulated cores to match the recorded execution on physical cpus.</li>
<li>Added <a class="el" href="dr__api_8h.html#a70e64a4a868677325cf3b1f7e3ca0938">DR_DISALLOW_UNSAFE_STATIC</a> and dr_disallow_unsafe_static_behavior() for sanity checks to help support statically-linked clients.</li>
<li>Added <a class="el" href="group__drmgr.html#gaf78a2dccf0cfbd0f0e07b0820c735fe9">drmgr_register_pre_syscall_event_user_data()</a> and <a class="el" href="group__drmgr.html#ga762e86ccf9fc30cc82d333f436531261">drmgr_unregister_pre_syscall_event_user_data()</a> to enable passing of user data.</li>
<li>Added <a class="el" href="group__drmgr.html#gadc4de86d9bdbb6d85a05f81ec3aca1aa">drmgr_register_post_syscall_event_user_data()</a> and <a class="el" href="group__drmgr.html#ga2289eab1f61abd920c2c9e0b79d9a7c9">drmgr_unregister_post_syscall_event_user_data()</a> to enable passing of user data.</li>
<li>Added <a class="el" href="dr__tools_8h.html#a9333e0dee46cc854228efab156ce98c5">dr_where_am_i()</a>, <a class="el" href="dr__tools_8h.html#ac922731194013612e4f4cb78075a2170">dr_track_where_am_i()</a>, and <a class="el" href="dr__tools_8h.html#ab185c8efca620f8cd0e323164afbc935">dr_is_tracking_where_am_i()</a> better support client self-profiling via sampling.</li>
<li>Added <a class="el" href="dr__tools_8h.html#a0436b08f1b548fd783b390dd0e740eef">dr_get_stats()</a> to retrieve runtime stats. Currently limited to number of built basic blocks.</li>
<li>Added <a class="el" href="group__drreg.html#gad8ff9a156f64e7146284385f2a26c8e4">drreg_reservation_info_ex()</a>, <a class="el" href="group__drreg.html#ga4dd4dc9f52ffd96616ee1eb92ebd5a9c">drreg_statelessly_restore_app_value()</a>, and <a class="el" href="group__drreg.html#ga0bec0cc14f3254a088c7c4dd3d76931e">drreg_is_instr_spill_or_restore()</a>.</li>
<li>Added <a class="el" href="dr__app_8h.html#af046ebf6c44ab47decbb4eba61236dcc">dr_app_stop_and_cleanup_with_stats()</a> to obtain stats values right before cleanup.</li>
<li>drmodtrack now allocates an entry per segment for each loaded module. Added a file offset field to module_segment_data_t for UNIX platforms. drcachesim saves file offset information in modules.log on UNIX platforms.</li>
<li>Added <a class="el" href="dr__tools_8h.html#a554c5441ac5a4e4de19210562ad8ab90">dr_prepopulate_cache()</a> and <a class="el" href="dr__tools_8h.html#a25a98f51f66512fcf4611e3b5de68032">dr_prepopulate_indirect_targets()</a> for setting up the code cache prior to execution.</li>
<li>Added support for Windows 10 1803. We provide an artificial version identifier <a class="el" href="dr__os__utils_8h.html#a311ab26d3bdc2d6ff7830b6f3ae9760ca438688fa3892c40ca47fb8b3c8ed2e89">DR_WINDOWS_VERSION_10_1803</a> to distinguish this major update.</li>
<li>Generalization of the drcachesim <a class="el" href="classraw2trace__t.html">raw2trace_t</a> API (Issue #3129):<ul>
<li>Added <a class="el" href="classmodule__mapper__t.html">module_mapper_t</a>, which factors out the module mapping functionality out of <a class="el" href="classraw2trace__t.html">raw2trace_t</a>, replacing the following <a class="el" href="classraw2trace__t.html">raw2trace_t</a> APIs: <a class="el" href="classraw2trace__t.html#ae88903e56d49c6118d9bd34874794b6b">raw2trace_t::handle_custom_data()</a>, <a class="el" href="classraw2trace__t.html#ac2476351d49c4ec1902d77fccde436de">raw2trace_t::do_module_parsing()</a>, <a class="el" href="classraw2trace__t.html#a3b63b0e61660418a5c1e985a64e952b4">raw2trace_t::do_module_parsing_and_mapping()</a>, and <a class="el" href="classraw2trace__t.html#addaa1498d372dafc8cd6efef5e6738ab">raw2trace_t::find_mapped_trace_address()</a>.</li>
<li>Added <a class="el" href="structtrace__metadata__writer__t.html">trace_metadata_writer_t</a>, a set of utility functions used by drcachesim's <a class="el" href="classraw2trace__t.html">raw2trace_t</a> for writing trace metadata: process/thread ids, timestamps, etc.</li>
<li>Added <a class="el" href="structtrace__metadata__reader__t.html">trace_metadata_reader_t</a>, a set of utilities for checking and validating thread start successions of offline entries in a raw data file.</li>
<li>Added <a class="el" href="classtrace__converter__t.html">trace_converter_t</a>, an extensibility mechanism for raw trace conversion.</li>
</ul>
</li>
<li>Added <a class="el" href="drmemtrace_8h.html#a7a2178d62155d7875efef8c8def5da0b">drmemtrace_get_timestamp_from_offline_trace()</a>, an API for fetching the timestamp from the beginning of a raw trace bundle (regardless of whether it is a thread start or just a subsequent bundle).</li>
<li>Added <a class="el" href="dr__tools_8h.html#aaaa686dee8c80b96c6615a1e42b46dbb">dr_abort_with_code()</a>.</li>
<li>Added support for interoperability between emulation clients and observational clients: <a class="el" href="group__drmgr.html#gac779b3f5c1076450ad32083da0921768">emulated_instr_t</a>, <a class="el" href="group__drmgr.html#ga94b96a01f3fa0ce7ad6a5f675965d952">drmgr_insert_emulation_start()</a>, <a class="el" href="group__drmgr.html#ga2f7dd031774c812d485d4910846fbb73">drmgr_insert_emulation_end()</a>, <a class="el" href="group__drmgr.html#gae4a20b19e779581dccac41eca9bf8321">drmgr_is_emulation_start()</a>, <a class="el" href="group__drmgr.html#gaf2227473141100828d097eb98828b954">drmgr_is_emulation_end()</a> and <a class="el" href="group__drmgr.html#ga85b025c766a84bee841288d822b15380">drmgr_get_emulated_instr_data()</a>.</li>
<li>Added <a class="el" href="group__drmgr.html#ga86c57fb975df20d3583bb41c421f628d">drmgr_register_signal_event_user_data()</a> and <a class="el" href="group__drmgr.html#ga75e39e277cba48e60006ecd5bb4cad8f">drmgr_unregister_signal_event_user_data()</a> to enable passing of user data.</li>
<li>Added <a class="el" href="group__drcontainers.html#ga82d3119a99127a7d18441bbecc868699">hashtable_apply_to_all_payloads_user_data()</a> to iterate over all payloads in a hashtable with user data also available.</li>
<li>Added cmake function DynamoRIO_get_full_path that shall be used instead of reading the LOCATION target property.</li>
<li>Added a drcachesim/drmemtrace analysis tool routine initialize() to help separate initialization that could fail from tool construction.</li>
<li>Split raw2trace_directory_t initialization from its constructors into new initialize() and initialize_module_file() methods.</li>
<li>Added drcachesim/drmemtrace support for analyzing offline traces in parallel, concurrently operating on each traced thread (or other sharding division). This is made possible by the new storage of traces in separate files. Adds a new <a class="el" href="classanalysis__tool__t.html">analysis_tool_t</a> interface where if the tool's parallel_shard_supported() returns true, <a class="el" href="classanalyzer__t.html">analyzer_t</a> switches to a parallel operation mode. Today, a simple static scheduling among worker threads is used. Each worker completely owns one or more shards, eliminating the need for synchronization when processing a thread's trace entries. The tools' parallel_shard_init() function is invoked to create traced-thread-local data, which is passed to parallel_shard_memref(). A parallel_shard_exit() is provided for cleanup, though most tools will sort, aggregate, and clean up in print_results().</li>
<li>Added <a class="el" href="classmodule__mapper__t.html#a174c1c59c9005e5ec414cc8ef47674e7">module_mapper_t::find_mapped_trace_bounds()</a> to allow callers to cache results and avoid global locks during parallel operation.</li>
</ul>
<hr  />
<p>Version 7.0.0 includes Dr. Memory and the Dr. Memory Framework (DRMF) in the same package as DynamoRIO. DRMF provides the umbra, drsyscall, and drsymcache Extensions for use by clients.</p>
<p>The changes between version 7.0.0 and 6.2.0 include the following minor compatibility changes:</p>
<ul>
<li>Changed <a class="el" href="dr__app_8h.html#afd509bb9ea5d1947228de48dda256e8f">dr_app_stop()</a> to send all threads native instead of only the calling thread.</li>
<li>Replaced PAGE_SIZE with <a class="el" href="dr__os__utils_8h.html#a71d692536f7dfe8f3ae7b53597c50aca">dr_page_size()</a> and removed PAGE_START from the API. However, clients may set(DynamoRIO_PAGE_SIZE_COMPATIBILITY ON), in which case definitions of PAGE_SIZE and PAGE_START using <a class="el" href="dr__os__utils_8h.html#a71d692536f7dfe8f3ae7b53597c50aca">dr_page_size()</a> are provided, though code that uses these macros in a constant expression, such as a static initialiser, will still need to be rewritten. DynamoRIO_PAGE_SIZE_COMPATIBILITY will be set automatically if the client targets version 6.2 or earlier.</li>
</ul>
<p>Further non-compatibility-affecting changes include:</p>
<ul>
<li>Added preliminary AArch64 ARMv8 support: see <a class="el" href="release_notes.html#sec_limits">Limitations</a> for a description of what is not yet expected to work.</li>
<li>Added a static library form of DynamoRIO for use either with auto-takeover or the start/stop API. The configure_DynamoRIO_static() and use_DynamoRIO_static_client() CMake utilities facilitate this.</li>
<li>Enabled <a class="el" href="page_drcachesim.html">Tracing and Analysis Framework</a> for Windows for single-process applications.</li>
<li>Added a module tracking feature <code>drmodtrack</code> for quick identification of which library a program counter belongs to and for persistent labeling of modules for post-processing and across library reloads. This is part of the <code>drcovlib</code> Extension. See <a class="el" href="group__drcovlib.html#ga28c1e51038eae38438767c489d42499e">drmodtrack_init()</a> and related functions.</li>
<li>Added <a class="el" href="group__drx.html#gafdcaedde814b3ff345686c6a3abf879c">drx_open_unique_appid_dir()</a>.</li>
<li>Added <a class="el" href="group__drx.html#ga1c12b3b71826d8b412f25a0059fd2017">DRX_FILE_SKIP_OPEN</a>.</li>
<li>Added %[] support to dr_sscanf.</li>
<li>Added <a class="el" href="dr__tools_8h.html#a192497da7670d454f6aae17d293f70b4">dr_map_executable_file()</a> and <a class="el" href="dr__tools_8h.html#a01d306d881c59488dd6ae41f392074af">dr_unmap_executable_file()</a>.</li>
<li>Added <a class="el" href="dr__tools_8h.html#aec75982f030fbae7019ecf2d54cd1c21">dr_get_microseconds()</a>.</li>
<li>Added <a class="el" href="dr__defines_8h.html#af1b1bc23c42ffb7452568176b09b1212a94dc97b7bb9e8ef9d35e9184103ef318">DR_CLEANCALL_ALWAYS_OUT_OF_LINE</a>.</li>
<li>Added <a class="el" href="dr__ir__instr_8h.html#abf0defc37827c54bf1cdec7c4ce375b2">instr_create_4dst_2src()</a>.</li>
<li>Added <a class="el" href="group__drreg.html#gaf3a0543b8c49f5bb7af6cae384af34d2">drreg_restore_app_values()</a> and <a class="el" href="group__drreg.html#gae2ba110d4aca864533583a53f8e04d40">drreg_restore_app_aflags()</a>.</li>
<li>Added <a class="el" href="group__drx.html#ga8f9c7628a63632568aaeb62beeb3a89a">drx_tail_pad_block()</a>.</li>
<li>Added <a class="el" href="dr__ir__macros__aarch64_8h.html#a3dde526fc3b4c3ab5ed02d0fc60a3781">XINST_CREATE_load_1byte_zext4()</a>.</li>
</ul>
<hr  />
<p>Version 6.2.0 includes Dr. Memory and the Dr. Memory Framework (DRMF) in the same package as DynamoRIO. DRMF provides the umbra, drsyscall, and drsymcache Extensions for use by clients.</p>
<p>The changes between version 6.2.0 and 6.1.0 include:</p>
<ul>
<li>Added support for Windows 10 1607. We provide an artificial version identifier <a class="el" href="dr__os__utils_8h.html#a311ab26d3bdc2d6ff7830b6f3ae9760ca781e789a0171cf75fe5dedcfd9cb7f7c">DR_WINDOWS_VERSION_10_1607</a> to distinguish this major update.</li>
<li>Split the memory trace sample memtrace_x86 into memtrace_x86_text and memtrace_x86_binary to highlight the huge performance difference.</li>
<li>Added instruction trace samples instrace_simple, instrace_x86_text, and instrace_x86_binary.</li>
<li>Added better drreg support for intra-bb control flow by adding <a class="el" href="group__drreg.html#ga7910ab166b0d698c11964a7b89d90faf">drreg_set_bb_properties()</a>.</li>
<li>Added priority-controlled <a class="el" href="group__drmgr.html#gaf5d894ba37e777790c9dec6f265892cb">drmgr_register_thread_init_event_ex()</a> and <a class="el" href="group__drmgr.html#ga63e2e169d810174091e47364d53f18f5">drmgr_register_thread_exit_event_ex()</a>.</li>
<li>Added <a class="el" href="page_drx.html#sec_drx_buf">Buffer Filling API</a> to drx: <a class="el" href="group__drx.html#ga4caa3e50a3cfb5ecb5c08e65fc44ada3">drx_buf_create_circular_buffer()</a>, <a class="el" href="group__drx.html#ga26d48f2339de13a75bfe21b5fd04a6c7">drx_buf_create_trace_buffer()</a>, and more.</li>
<li>Documented that <a class="el" href="group__drx.html#ga5eba10b0f9536c1a108d796e0b84c4cd">drx_insert_counter_update()</a> does rely on <a class="el" href="group__drx.html#gae0665a86427616ffc80c59375649e283">drx_init()</a>.</li>
<li>Better international string support for usernames and application paths.</li>
</ul>
<hr  />
<p>Version 6.1.0 includes Dr. Memory and the Dr. Memory Framework (DRMF) in the same package as DynamoRIO. DRMF provides the umbra, drsyscall, and drsymcache Extensions for use by clients.</p>
<p>The changes between version 6.1.0 and 6.0.0 include the following minor compatibility changes:</p>
<ul>
<li>Fixed problems with configuration directories on Android. This involved changing <a class="el" href="dr__frontend_8h.html#aa6389ada3f998b6793aa9a1edd290f97">drfront_access()</a> to attempt to create a file by calling a new routine that is also exported, <a class="el" href="dr__frontend_8h.html#a418330bac7c1cdfdc08b75b07598a518">drfront_dir_try_writable()</a>.</li>
<li>Fixed several bugs.</li>
</ul>
<hr  />
<p>Version 6.1.0 includes Dr. Memory and the Dr. Memory Framework (DRMF) in the same package as DynamoRIO. DRMF provides the umbra, drsyscall, and drsymcache Extensions for use by clients.</p>
<p>The changes between version 6.1.0 and 6.0.0 include the following minor compatibility changes:</p>
<ul>
<li>Changed <a class="el" href="group__drreg.html#gabdc912c459f23dfd8455718c2a958749">drreg_aflags_liveness()</a> to take in the target instruction.</li>
</ul>
<p>Further non-compatibility-affecting changes include:</p>
<ul>
<li>Added support for C++ clients on Android via private loader support for Bionic.</li>
<li><a class="el" href="dr__ir__opnd_8h.html#a40b831f95abf3ee22f584a63e86a96c3">opnd_size_in_bytes()</a> and <a class="el" href="dr__ir__opnd_8h.html#af8ba98539916f574a3bc0c0fc81e4c54">opnd_size_in_bits()</a> no longer accept DR_REG_ constants as input (the caller must first call <a class="el" href="dr__ir__opnd_8h.html#a5172d0f6b951c1cc23c0465fd8315aa2">reg_get_size()</a>). This was true in the 6.0.0 release but the documentation and the routines themselves did not reflect this.</li>
<li>Added <a class="el" href="group__drreg.html#gad5d81ea8114d9aea29b340dd034cda04">drreg_init_and_fill_vector()</a> and <a class="el" href="group__drreg.html#ga2878afd0bb1dcc73ebf1eb99a83748ce">drreg_set_vector_entry()</a>.</li>
<li>Augmented <a class="el" href="group__drx.html#ga5eba10b0f9536c1a108d796e0b84c4cd">drx_insert_counter_update()</a> to work with drreg.</li>
<li>Added <a class="el" href="dr__tools_8h.html#a6b8cdf29035914846c03c4409a3f8fcf">dr_raw_tls_opnd()</a>.</li>
<li>Added <a class="el" href="group__drreg.html#ga39a587dee2fc48409d6486ab5fd91e74">drreg_reservation_info()</a>.</li>
<li>Added <a class="el" href="dr__ir__opnd_8h.html#a6d1d3033c01b8dc8cadc3dd84e8b983e">opnd_create_rel_addr()</a> and <a class="el" href="dr__ir__opnd_8h.html#af451897a176423eb75db2d607e9db7b3">opnd_is_rel_addr()</a> support for ARM.</li>
<li>Added <a class="el" href="group__drreg.html#gadc7e85dfc7999a76432096613383d4e4">drreg_is_register_dead()</a> and <a class="el" href="group__drreg.html#ga83416a76d3e020f4c7f86036dbe98824">drreg_reserve_dead_register()</a>.</li>
<li>Split out the core functionality of the <a class="el" href="page_drcov.html">Code Coverage Tool</a> tool into a new Extension <code>drcovlib</code> for easier inclusion of coverage output in other tools.</li>
<li>Added support for the Windows 10 TH2 1511 update. We provide an artificial version identifier <a class="el" href="dr__os__utils_8h.html#a311ab26d3bdc2d6ff7830b6f3ae9760ca2ce40ab4db406adf0613c77cc72112fd">DR_WINDOWS_VERSION_10_1511</a> to distinguish this major update.</li>
</ul>
<hr  />
<p>Version 6.0.0 includes Dr. Memory and the Dr. Memory Framework (DRMF) in the same package as DynamoRIO. DRMF provides the umbra, drsyscall, and drsymcache Extensions for use by clients.</p>
<p>The changes between version 6.0.0 and 5.0.0 include the following minor compatibility changes:</p>
<ul>
<li>Deprecated <a class="el" href="dr__api_8h.html#a819eb581527829240bf227d5a8f98e4c">dr_init()</a> as a client's entry point, replacing it with <a class="el" href="dr__api_8h.html#a2b938c98dd186cc94eef6880f9e3c3e9">dr_client_main()</a> which is passed an argv-style array of client options just like a regular application's main() routine.</li>
<li>Changed the default injection method on Linux to use "early injection" which begins executing the target application from its very first instruction. Clients on Linux will now see more application code than they did previously. The old behavior can be requested by passing "-late" to drrun or drinject, or including "-no_early_inject" in the options to drinjectlib.</li>
<li>Moved the module load event to a later point where the application first executes code from the library. This enables clients to access properly relocated values inside the library, which was not possible with the prior event point at the first memory mapping of the library. Applications that still wish to see the first mapping will need to monitor system calls to replicate the old control point.</li>
<li>To support conditionally executed instructions, added a new parameter of type <a class="el" href="dr__ir__instr_8h.html#afbf9138b89c5e6e8ea4ff2e9212b2277">dr_opnd_query_flags_t</a> to routines that explicitly query what was read or written by an instruction: <a class="el" href="dr__ir__instr_8h.html#a35d5a7d70a380ef810267fa62d0a0d60">instr_get_eflags()</a>, <a class="el" href="dr__ir__instr_8h.html#a08af81c9de9f4f78c309ca59016398e4">instr_get_arith_flags()</a>, <a class="el" href="dr__ir__decode_8h.html#a0edc97a70f3135637f5091893a19f88c">decode_eflags_usage()</a>, <a class="el" href="dr__ir__instr_8h.html#add5c71c3dbb337d6d371dda99857a224">instr_writes_to_reg()</a>, <a class="el" href="dr__ir__instr_8h.html#a8ac27a42689e221c9a77214f6aba3c4d">instr_reads_from_reg()</a>, and <a class="el" href="dr__ir__instr_8h.html#af6e9c849fd0dc187abd048dfab67318f">instr_writes_to_exact_reg()</a>. This new parameter determines how to treat conditionally accessed operands. We decided that breaking compatibility directly was the best solution to ensure that clients performing liveness analysis versus other types of usage analysis are properly updated to handle conditionally executed instructions. All other API routines include all operands whether conditionally accessed or not.</li>
<li>Removed the artificial additional source operand that was added to each OP_cmovcc and OP_fcmovcc instruction in the past. We have replaced this with the new predication API (<a class="el" href="dr__ir__instr_8h.html#aa0dda1bdd960e675b6b65a4093b44896">instr_is_predicated()</a>, etc.) and new parameters to read/write query routines (<a class="el" href="dr__ir__instr_8h.html#afbf9138b89c5e6e8ea4ff2e9212b2277">dr_opnd_query_flags_t</a>).</li>
<li>Widened the <a class="el" href="dr__ir__opnd_8h.html#a0ee0a856086c863d56ad515919e03136">reg_id_t</a> type from a byte to a ushort.</li>
<li>Changed both drconfiglib and drinjectlib to be static libraries rather than shared libraries on UNIX platforms, for simpler usage without worrying about locating them at runtime, as well as making it easier to use on Android. They remain shared libraries on Windows.</li>
<li>Deprecated <a class="el" href="dr__tools_8h.html#affc4a7a38a1fa1fe45c1a15e01a98e78">dr_get_options()</a>, replacing it with direct arguments to <a class="el" href="dr__api_8h.html#a2b938c98dd186cc94eef6880f9e3c3e9">dr_client_main()</a> or alternatively with <a class="el" href="dr__tools_8h.html#a5f53df83b2108925fa52bd607536e25d">dr_get_option_array()</a>.</li>
<li>Deprecated <a class="el" href="dr__ir__decode_8h.html#a9aabb6bc27f7d35408028943b298be05">set_x86_mode()</a>, replacing it with <a class="el" href="dr__ir__encode_8h.html#ae796d2ff6eabe43904b17742deafd637">dr_set_isa_mode()</a>.</li>
<li>Deprecated <a class="el" href="dr__ir__decode_8h.html#a92c5700e9e1ad5bd7fa6be0b02e3dc51">get_x86_mode()</a>, replacing it with <a class="el" href="dr__ir__encode_8h.html#ae8f9b08f90490fbeae26d12a461af084">dr_get_isa_mode()</a>.</li>
<li>Deprecated <a class="el" href="dr__ir__instr_8h.html#ab25aa22469a9dc2b448585aa82e7d359">instr_set_x86_mode()</a>, replacing it with <a class="el" href="dr__ir__instr_8h.html#aa61dd047ca3e81daf2ff7b38835cd446">instr_set_isa_mode()</a>.</li>
<li>Deprecated <a class="el" href="dr__ir__instr_8h.html#abea26973f1b5fd2a7b2ca8c0d7df19da">instr_get_x86_mode()</a>, replacing it with <a class="el" href="dr__ir__instr_8h.html#a4362c9281f6555d65240e447eed9e5c0">instr_get_isa_mode()</a>.</li>
<li>Added a third parameter to <a class="el" href="dr__frontend_8h.html#ad3805348103c48328dad3e8b5321b6ee">drfront_is_64bit_app()</a>.</li>
<li>Deprecated <a class="el" href="dr__ir__instr_8h.html#a63f16ca950c3fa1bdb4bfa16db02ba73">instr_is_sse_or_sse2()</a>.</li>
<li>Removed legacy executable bbcov2lcov.</li>
<li>Removed legacy "-t bbcov" support.</li>
</ul>
<p>Further non-compatibility-affecting changes include:</p>
<ul>
<li>Added AArch32 ARMv7 and ARMv8 support.</li>
<li>Added experimental Android support. C clients are supported, but C++ clients are not yet supported.</li>
<li>Added Windows 10 support.</li>
<li>Added a new scratch register coordination Extension, <code>drreg</code>. The <code>drreg</code> Extension is still considered experimental and its interface is subject to change in the next release.</li>
<li>Added easy-to-use option declaration and parsing for C++ clients and standalone applications via a new Extension, the <a class="el" href="page_droption.html">DynamoRIO Option Parser</a> and the <a class="el" href="classdroption__t.html">droption_t</a> class.</li>
<li>Added a new tool: <a class="el" href="page_drcachesim.html">Tracing and Analysis Framework</a>, a multi-process cache simulator.</li>
<li>Added a new tool: <a class="el" href="page_drcpusim.html">CPU Simulator</a>, a CPU simulator for illegal instructions on legacy processors.</li>
<li>Added distinctions between reasons for <a class="el" href="dr__os__utils_8h.html#a64bc438e6114c0e6137d65e4c9a8beb6">dr_query_memory_ex()</a> to fail</li>
<li>Added <a class="el" href="dr__ir__opnd_8h.html#af8ba98539916f574a3bc0c0fc81e4c54">opnd_size_in_bits()</a>.</li>
<li>Added cross-platform instruction creation macros <a class="el" href="dr__ir__macros__aarch64_8h.html#a193d2b0123b3bdf0b9200f34a54d8002">XINST_CREATE_debug_instr()</a>, <a class="el" href="dr__ir__macros__aarch64_8h.html#aad24f4f2a447e6556931d254afb87e06">XINST_CREATE_load()</a>, <a class="el" href="dr__ir__macros__aarch64_8h.html#a1e3d6b69547cf435c33abe09e08cc5ad">XINST_CREATE_store()</a>, <a class="el" href="dr__ir__macros__aarch64_8h.html#ae982a19519caa113cecc717a20d22a33">XINST_CREATE_move()</a>, <a class="el" href="dr__ir__macros__aarch64_8h.html#a929f24130c787f5a3fb7a04529d7af92">XINST_CREATE_load_simd()</a>, <a class="el" href="dr__ir__macros__aarch64_8h.html#a053c0202c5a4229fbc5575183afb02d7">XINST_CREATE_store_simd()</a>, <a class="el" href="dr__ir__macros__arm_8h.html#a4b0ebe78f1ffcd64c2d0a496cd06f5ce">XINST_CREATE_jump_mem()</a>, <a class="el" href="dr__ir__macros__aarch64_8h.html#aac63f67b836d81e36c269008f617a5c2">XINST_CREATE_jump_reg()</a>, <a class="el" href="dr__ir__macros__aarch64_8h.html#ad432bb80a82d76edae2071473f9b4318">XINST_CREATE_load_int()</a>, <a class="el" href="dr__ir__macros__aarch64_8h.html#af4527eb10daaa1db2680036952f2ccb3">XINST_CREATE_jump()</a>, <a class="el" href="dr__ir__macros__aarch64_8h.html#a61985a50f11cffbe3ea84daeb2c1e6c0">XINST_CREATE_jump_short()</a>, <a class="el" href="dr__ir__macros__aarch64_8h.html#ab995997474e88057f2fa74e9d029148e">XINST_CREATE_call()</a>, <a class="el" href="dr__ir__macros__aarch64_8h.html#a3b18a7fc43ec27f1b495b5b25f73dcab">XINST_CREATE_return()</a>, <a class="el" href="dr__ir__macros__aarch64_8h.html#a0cda7689cd077cc10bd2ffded339ff51">XINST_CREATE_add()</a>, <a class="el" href="dr__ir__macros__aarch64_8h.html#a701b0de8ed4b4f0e76c599589f9b4fe6">XINST_CREATE_add_2src()</a>, <a class="el" href="dr__ir__macros__aarch64_8h.html#a3bdba0152ea793351d06199f30c942f7">XINST_CREATE_add_s()</a>, <a class="el" href="dr__ir__macros__aarch64_8h.html#afdbcfb317d599ecde76215392878da1c">XINST_CREATE_sub()</a>, <a class="el" href="dr__ir__macros__aarch64_8h.html#a4cbf96f2f31e7c637e8b824741ff418f">XINST_CREATE_sub_s()</a>, <a class="el" href="dr__ir__macros__aarch64_8h.html#a4a53b90dc030b0340082a9b036c09ba3">XINST_CREATE_and_s()</a>, <a class="el" href="dr__ir__macros__aarch64_8h.html#a3e9ea23c5fe946505d0834e07e4ad0c5">XINST_CREATE_cmp()</a>, <a class="el" href="dr__ir__macros__aarch64_8h.html#a9ba5c4719963cf94390e7338becd491d">XINST_CREATE_interrupt()</a>, <a class="el" href="dr__ir__macros__aarch64_8h.html#a9e2b0349f40143324b0957a5a08c9f03">XINST_CREATE_nop()</a>, <a class="el" href="dr__ir__macros__aarch64_8h.html#a0b2f157460f1201c2df4409a2d31560f">XINST_CREATE_load_1byte()</a>, <a class="el" href="dr__ir__macros__aarch64_8h.html#ad142a38034d157d6e3b97ca80055da09">XINST_CREATE_load_2bytes()</a>, <a class="el" href="dr__ir__macros__aarch64_8h.html#af4cbe121b78dfcf93cea1a48f10f937c">XINST_CREATE_store_1byte()</a>, and <a class="el" href="dr__ir__macros__aarch64_8h.html#a53192b93a4055d4700421104b2af3e90">XINST_CREATE_store_2bytes()</a>.</li>
<li>Added a new feature: a binary annotation framework that facilitates communication between the target app and the DynamoRIO client and core. See <a class="el" href="using.html#sec_annotations">Annotations</a> and <a class="el" href="dr__annotation_8h.html" title="Annotation handler registration routines.">dr_annotation.h</a>.</li>
<li>Added <a class="el" href="dr__ir__instr_8h.html#aa0dda1bdd960e675b6b65a4093b44896">instr_is_predicated()</a>, <a class="el" href="dr__ir__instr_8h.html#a19932f4d78cd67b02b3b4c657fba329f">instr_get_predicate()</a>, and <a class="el" href="dr__ir__instr_8h.html#aefd8b628ad00a0f5600c0a49ed1dae20">instr_set_predicate()</a>.</li>
<li>Added <a class="el" href="dr__ir__instr_8h.html#a07d5832cf5ea24804b4c827b489f1ffc">instr_predicate_triggered()</a>.</li>
<li>Added <a class="el" href="dr__ir__utils_8h.html#a44bbc8b62b54f91fe2f6ab76ac71641e">dr_save_arith_flags_to_reg()</a> and <a class="el" href="dr__ir__utils_8h.html#a3164b3b86afa288c819d55a9037ec897">dr_restore_arith_flags_from_reg()</a>.</li>
<li>Added <a class="el" href="dr__ir__opnd_8h.html#ab79df5be4b61bf4f260415046eb61a40">opnd_get_index_shift()</a> and <a class="el" href="dr__ir__opnd_8h.html#abe70f9418f49ede0c2f06b105c003434">opnd_set_index_shift()</a>.</li>
<li>Added <a class="el" href="dr__ir__opnd_8h.html#ab3436a44e115a3331e2000cc1d46e026">opnd_create_reg_ex()</a> and <a class="el" href="dr__ir__opnd_8h.html#ad5d1629b8d6daff5eb6101b95be5481c">opnd_get_flags()</a>.</li>
<li>Added <a class="el" href="dr__ir__opnd_8h.html#ab2e785e16fb6c2e6310765014c21836a">opnd_create_base_disp_arm()</a>.</li>
<li>Added <a class="el" href="dr__ir__opnd_8h.html#a3c8150e2ee1faa6d33c332874757ca08">reg_is_simd()</a>.</li>
<li>Added <a class="el" href="dr__ir__instr_8h.html#ad2f27cc323b924eb2b73dfddd3620703">instr_create_0dst_4src()</a>, <a class="el" href="dr__ir__instr_8h.html#a1165bad1ad9859d6ffdcead0da1cd51a">instr_create_1dst_4src()</a>, <a class="el" href="dr__ir__instr_8h.html#ac6971fc24c888747c755de9b44c83962">instr_create_2dst_5src()</a>, <a class="el" href="dr__ir__instr_8h.html#aa9f725186e81ba2ac2972096626b79b1">instr_create_Ndst_Msrc_vardst()</a>, and <a class="el" href="dr__ir__instr_8h.html#a241c54739a6c96014201f4610c7d0ab8">instr_create_Ndst_Msrc_varsrc()</a>.</li>
<li>Added <a class="el" href="dr__ir__macros__arm_8h.html#a1190999dd134eb96f6ace5aa34f1cf68">OPND_CREATE_MEMLIST()</a>.</li>
<li>Added <a class="el" href="dr__ir__utils_8h.html#ad7af9296c9f5930b025186aea0688b13">dr_get_stolen_reg()</a>, <a class="el" href="dr__ir__utils_8h.html#a7a38641e89e2573d725ec05d137e0fb6">dr_insert_get_stolen_reg_value()</a>, <a class="el" href="dr__ir__utils_8h.html#aa14654096a7b89666f82e4566a7d1e4c">dr_insert_set_stolen_reg_value()</a>, and <a class="el" href="dr__ir__opnd_8h.html#aff8f178ccfbc5b12bf3813656ba5da71">reg_is_stolen()</a>.</li>
<li>Added <a class="el" href="dr__ir__opnd_8h.html#ad94bc6018660cfb0862171c3e9402f9c">opnd_create_immed_uint()</a>.</li>
<li>Added <a class="el" href="dr__ir__instr_8h.html#a885dab32ac46e45dc9004f934062d7eb">instr_remove_srcs()</a> and <a class="el" href="dr__ir__instr_8h.html#ab17f197a2ce2848973ad9ec595e2fe69">instr_remove_dsts()</a>.</li>
<li>Added cross-platform <a class="el" href="dr__ir__instr_8h.html#aa28e6c817ab3ae8128d862a46b2f037b">EFLAGS_READ_ARITH</a> and <a class="el" href="dr__ir__instr_8h.html#a15d3e15ebbf2667f9a2df713b6cbe5ca">EFLAGS_WRITE_ARITH</a>.</li>
<li>Added <a class="el" href="dr__ir__instr_8h.html#a28054de839953da488ee2d0e1ea789aa">instr_invert_predicate()</a> and <a class="el" href="dr__ir__instr_8h.html#a08688c7671e76f37c3a5900f1f8c5b07">instr_predicate_name()</a>.</li>
<li>Added <a class="el" href="dr__ir__instr_8h.html#ae9b0e3fc0b9323e6cfe81eacffe3bf05">instr_it_block_get_count()</a>, <a class="el" href="dr__ir__instr_8h.html#adf931c6538a371972a01c3d63f7f810b">instr_it_block_get_pred()</a>, <a class="el" href="dr__ir__instr_8h.html#a192215c3468cee805dc68afa83aae818">instr_it_block_compute_immediates()</a>, and <a class="el" href="dr__ir__instr_8h.html#ab75da36d0a90197ef9f271fb632fe548">instr_it_block_create()</a> for manipulating IT block instructions on ARM.</li>
<li>Added <a class="el" href="dr__ir__opnd_8h.html#aa8f0a789b22e48a2b7ce8e5e76926d9f">opnd_set_flags()</a>.</li>
<li>Added <a class="el" href="dr__ir__opnd_8h.html#a65b75f4116f2c0c4dcb22c29f2b37841">opnd_create_immed_int64()</a>, <a class="el" href="dr__ir__opnd_8h.html#aee9c10c231eb4705b5e2ead4165f45ca">opnd_is_immed_int64()</a>, and <a class="el" href="dr__ir__opnd_8h.html#adf7d2ec708d48829041f8e218c93674e">opnd_get_immed_int64()</a> for 64-bit immediate SIMD constants on 32-bit ARM.</li>
<li>Added <a class="el" href="dr__tools_8h.html#affcf6af90fe6ca56168cd56ba09fea08">dr_set_client_version_string()</a>.</li>
<li>Added <a class="el" href="dr__ir__instr_8h.html#af5c0f08911c8e6e548b285fed97ddd65">instr_get_prev_app()</a> and <a class="el" href="dr__ir__instrlist_8h.html#a4fa0d282ca6e0f174db9a2d3a202e4b2">instrlist_last_app()</a>.</li>
<li>Added the <a class="el" href="page_deploy.html#op_syntax_arm">-syntax_arm</a> runtime option.</li>
<li>Added <a class="el" href="dr__ir__opnd_8h.html#a046a311e95587f18a507c231749ed30a">opnd_add_flags()</a>.</li>
<li>Added <a class="el" href="group__drmgr.html#ga85890ca6d143f6a5218680484a25d3fb">drmgr_unregister_bb_insertion_event()</a>.</li>
<li>Added <a class="el" href="group__drmgr.html#gadd8688fd6cc4d7e1f804ccd1460f5177">drmgr_is_first_instr()</a> and <a class="el" href="group__drmgr.html#ga60452df11f634ad4633578ba5330d2c4">drmgr_is_last_instr()</a>.</li>
<li>Added <a class="el" href="dr__ir__decode_8h.html#a381ea062dea188809a558f9ed8613697">dr_app_pc_as_jump_target()</a> and <a class="el" href="dr__ir__decode_8h.html#a92be5c9424e697d06f8d96f5620084a7">dr_app_pc_as_load_target()</a>.</li>
<li>Added <a class="el" href="dr__ir__utils_8h.html#ad2f75dd89d8a188f4a7fc9ae094bceaf">dr_remove_it_instrs()</a> and <a class="el" href="dr__ir__utils_8h.html#a1f2c05b5d49ca8dedfd52d7bbb2f59bb">dr_insert_it_instrs()</a>.</li>
<li>Added automated conditional instrumentation to drmgr.</li>
<li>Added <a class="el" href="dr__tools_8h.html#a75586a7501d994aa4bbd70519b726c0c">dr_insert_read_raw_tls()</a> and <a class="el" href="dr__tools_8h.html#a802140e02e8ea041cd7ec793160d731f">dr_insert_write_raw_tls()</a>.</li>
<li>Added <a class="el" href="dr__ir__instr_8h.html#acfe56a8a97951fe69cab14cd7e46f16b">instr_is_exclusive_store()</a>.</li>
<li>Added <a class="el" href="dr__tools_8h.html#ac71a8471b604df56ae2fa05ba66e03be">DR_FILE_WRITE_ONLY</a>.</li>
<li>Added <a class="el" href="dr__tools_8h.html#a5f53df83b2108925fa52bd607536e25d">dr_get_option_array()</a>.</li>
<li>Added <a class="el" href="group__drwrap.html#ga3760f4fff053852500b9da6098bb9f3d">drwrap_redirect_execution()</a>.</li>
<li>Added support for common calling conventions in drwrap.</li>
<li>Added a new sample client, named ssljack.</li>
<li>Added the -pathmap option to the post-processor for <a class="el" href="page_drcov.html">Code Coverage Tool</a>.</li>
<li>Added <a class="el" href="dr__ir__instr_8h.html#a496aaf2f7f1f250d8b924450178feaa5">instr_is_sse()</a> and <a class="el" href="dr__ir__instr_8h.html#a8b12cc7ee61daec6894df2acfd0d3ace">instr_is_sse2()</a>.</li>
<li>Added <a class="el" href="dr__ir__instr_8h.html#ac46c8d71ea54533b0bda91ce8662c27f">instr_is_3DNow()</a>, <a class="el" href="dr__ir__instr_8h.html#a6166482aee73bfcc5c542509df35d2e9">instr_is_sse3()</a>, and <a class="el" href="dr__ir__instr_8h.html#ad78671cd72982b0b4eda18a32ad7e220">instr_is_ssse3()</a>.</li>
<li>Added <a class="el" href="dr__ir__instr_8h.html#a63e757d74d3b584542706731bca9f865">instr_is_sse41()</a>, <a class="el" href="dr__ir__instr_8h.html#a9847688982d5f63a879833b901cf0f74">instr_is_sse42()</a>, and <a class="el" href="dr__ir__instr_8h.html#a2332e8a5f1d8bf7a1e2aa6ff528917fe">instr_is_sse4A()</a>.</li>
<li>Added <a class="el" href="dr__ir__instr_8h.html#af80b7eb4b4e4f9c42fede8bfc375dd4e">instr_is_reg_spill_or_restore()</a>.</li>
<li>Added <a class="el" href="dr__os__utils_8h.html#ac9c33a04e71ed6d6ec41e26013a005fd">DR_MEMPROT_VDSO</a>.</li>
</ul>
<hr  />
<p>Version 5.0.0 includes Dr. Memory and the Dr. Memory Framework (DRMF) in the same package as DynamoRIO. DRMF provides the umbra, drsyscall, and drsymcache Extensions for use by clients.</p>
<p>The changes between version 5.0.0 and 4.2.0 also include the following minor compatibility changes:</p>
<ul>
<li>Dropped official support for Windows 2000. The core DynamoRIO engine should continue to work there, but the official release package will not run on Windows 2000.</li>
<li>Changed the third parameter to <a class="el" href="group__drsyms.html#ga5a983d39217af0f8a39868c66e0646d0">drsym_search_symbols_ex()</a> from a bool to a uint flags in order to take in demangling flags. Binary compatibility is maintained as drsym_info_t's size was changed, but source compatibility is affected by this change.</li>
<li>Added collapsing of template parameters to "&lt;&gt;" for drsyms operations on Windows PDB symbols when <a class="el" href="group__drsyms.html#gga0b67aaba18a6215dfc1ff4c68b57d41ea85d6e34c4fcb68eb97a07774102c4b0e">DRSYM_DEMANGLE</a> is specified. This can be undone by specifying <a class="el" href="group__drsyms.html#gga0b67aaba18a6215dfc1ff4c68b57d41eaf5d562cfc61f955bb16455e199dc167e">DRSYM_DEMANGLE_PDB_TEMPLATES</a>.</li>
<li>Removed empty parentheses "()" from partially-demangled symbols (when <a class="el" href="group__drsyms.html#gga0b67aaba18a6215dfc1ff4c68b57d41ea85d6e34c4fcb68eb97a07774102c4b0e">DRSYM_DEMANGLE</a> is specified) for <a class="el" href="group__drsyms.html#ggad3772ffd6c4e0d68738a31d7e25a3de9af9680fa1e5316576914fd50d253016da">DRSYM_ELF_SYMTAB</a> and <a class="el" href="group__drsyms.html#ggad3772ffd6c4e0d68738a31d7e25a3de9a0ef6cab1fee912683e2c99498492979b">DRSYM_PECOFF_SYMTAB</a>. Windows and Linux symbols are now consistent for <a class="el" href="group__drsyms.html#gga0b67aaba18a6215dfc1ff4c68b57d41ea85d6e34c4fcb68eb97a07774102c4b0e">DRSYM_DEMANGLE</a>.</li>
<li>Changed the operand sizes of instructions that read or write only part of a multimedia register (mmx, xmm, or ymm) to reflect the partial size.</li>
<li>Added return value for dr_fprintf to indicate how many bytes are written.</li>
<li>Renamed the function add_rel_rpaths() in DynamoRIOConfig.cmake to DynamoRIO_add_rel_rpaths().</li>
<li>Deprecated <a class="el" href="dr__ir__instr_8h.html#a18eb5de05cc4b9e11dc455db930c8032">instr_ok_to_mangle()</a> and <a class="el" href="dr__ir__instr_8h.html#af5f5a0f62bb048d6a30313430ca0bc38">instr_set_ok_to_mangle()</a> (replaced with <a class="el" href="dr__ir__instr_8h.html#a9b612da01328372adf3c94406ba0a1f2">instr_is_app()</a>, <a class="el" href="dr__ir__instr_8h.html#abd98754c8f86df222e851a30af2abe9e">instr_is_meta()</a>, <a class="el" href="dr__ir__instr_8h.html#a2da69830f468c9a25f82c0561f44cfd7">instr_set_app()</a>, and <a class="el" href="dr__ir__instr_8h.html#a7bd1a4d1621b685541e8c28426a0cfe4">instr_set_meta()</a>).</li>
</ul>
<p>Further non-compatibility-affecting changes include:</p>
<ul>
<li>Added <a class="el" href="dr__tools_8h.html#ad2906dcd1979be92605bdf3c58c9f373">dr_syscall_get_result_ex()</a> and <a class="el" href="dr__tools_8h.html#a70710f3b42a9797a72ffb51f46720849">dr_syscall_set_result_ex()</a> for future MacOS support.</li>
<li>Added Mach-O support to drsyms.</li>
<li>Added <a class="el" href="dr__ir__macros__x86_8h.html#aaf22f1a7df81230103983b562c261b18">INSTR_CREATE_cmpxchg_8()</a> for 64-bit cmpxchg</li>
<li>Changed the default -stderr_mask on Windows to 0xC (for both release and debug), and the default -msgbox_mask on Windows release builds to 0xC, for better error reporting. For interactive runs, then, the user should explicitly pass -msgbox_mask 0.</li>
<li>Added a flags output parameter to <a class="el" href="group__drsyms.html#ga4c38ae4b1348bfd1555f323037066b01">drsym_info_t</a>.</li>
<li>Added <a class="el" href="dr__modules_8h.html#a86cf18673071ea870262fbb8cbc9a336">dr_module_contains_addr()</a> to make handling non-contiguous libraries easier.</li>
<li>Added <a class="el" href="group__drcontainers.html#gac15c2ca65b95597ff2311f1040f1be53">hashtable_lock_self_owns()</a> to the drcontainers Extension.</li>
<li>Added <a class="el" href="dr__ir__opnd_8h.html#a9b9773333faf1f49cd8421ee054ad290">opnd_create_reg_partial()</a> and <a class="el" href="dr__ir__opnd_8h.html#ac47cdf614648f0e0622e064b4f63d0f1">opnd_is_reg_partial()</a> for representing a partial multimedia register</li>
<li>Added operand size suffixes on disassembly in the default mode. This can be disabled via -disasm_mask 0x8 or by calling disassemble_set_syntax(DR_DISASM_NO_OPND_SIZE).</li>
<li>Added <a class="el" href="dr__ir__instr_8h.html#a6bb149eae980a77ceb36798fd7ebb096">instr_zeroes_ymmh()</a>.</li>
<li>Added new fields to module_data_t: timestamp for Linux and MacOS, and version and uuid fields for MacOS.</li>
<li>Added a new library drfrontendlib to be used for building tool front-ends. For more information see <a class="el" href="dr__frontend_8h.html" title="Tool front-end API. Use these functions to search for and query the properties of a target applicatio...">dr_frontend.h</a>.</li>
<li>Added <a class="el" href="dr__tools_8h.html#afa268a6496cad930513c1f0353fdd06e">dr_create_memory_dump()</a>.</li>
<li>Added <a class="el" href="dr__ir__utils_8h.html#a7e815b039d8770c7422dd16059797da8">dr_mcontext_to_context()</a>.</li>
<li>Added <a class="el" href="dr__ir__utils_8h.html#aa1267485b39cbef76ddc0ffd683c8830">dr_call_on_clean_stack()</a>.</li>
<li>Added <a class="el" href="dr__tools_8h.html#a0b0ac44591b6687a3b4b7b233c4140f8">dr_set_client_name()</a> for customizing the diagnostic message presented to users when an error occurs or when <a class="el" href="dr__tools_8h.html#ae52f61049269c0531b66b8c41c69e09e">dr_messagebox()</a> is called.</li>
<li>Added <a class="el" href="dr__ir__instr_8h.html#a4582a4fd2729419bfc1d0c5dfeb86ab9">instr_get_next_app()</a> and <a class="el" href="dr__ir__instrlist_8h.html#a623d9a44310e4d3373f266633ee07322">instrlist_first_app()</a> to allow clients to traverse only application (non-meta) instructions.</li>
<li>Added <a class="el" href="dr__config_8h.html#a28e562c5d7cd81fd4904224fce15f7a6">dr_config_status_code_to_string()</a>.</li>
<li>Added custom tool front-end launching support to drrrun tool config files.</li>
<li>Added a tool notification feature to drrun tool config files.</li>
<li>Added get_visualstudio_info() for looking up visual studio installation information.</li>
<li>Renamed the strace sample to "syscall" and removed its tracing feature, in favor of a superior strace sample inside DRMF.</li>
<li>Included a copy of dbghelp.dll for drsyms</li>
<li>Added <a class="el" href="dr__ir__utils_8h.html#aaf70b54e0f62baf2a7bfe3b13b55c579">dr_insert_cbr_instrumentation_ex()</a>, which provides the fall-through address.</li>
<li>Added <a class="el" href="dr__ir__instr_8h.html#a9b612da01328372adf3c94406ba0a1f2">instr_is_app()</a>, <a class="el" href="dr__ir__instr_8h.html#abd98754c8f86df222e851a30af2abe9e">instr_is_meta()</a>, <a class="el" href="dr__ir__instr_8h.html#a2da69830f468c9a25f82c0561f44cfd7">instr_set_app()</a>, and <a class="el" href="dr__ir__instr_8h.html#a7bd1a4d1621b685541e8c28426a0cfe4">instr_set_meta()</a>.</li>
<li>Added <a class="el" href="dr__ir__opnd_8h.html#a3e4f2b305b3d6536d27bad42b57cad84">reg_get_value_ex()</a>.</li>
</ul>
<hr  />
<p> The changes between version 4.2.0 and 4.1.0 include:</p>
<ul>
<li>Added preliminary Windows 8.1 support</li>
<li>Added a new Library Tracing Tool, drltrace.</li>
<li>Re-branded our <a class="el" href="page_drcov.html">Code Coverage Tool</a></li>
<li>Added an export iterator: <a class="el" href="dr__modules_8h.html#ac6e1a7f4f59174430fe3632b3fbc4fa7">dr_symbol_export_iterator_start()</a>, <a class="el" href="dr__modules_8h.html#a18ca7c4764a623a1d3dde9cf4cd11a11">dr_symbol_export_iterator_hasnext()</a>, <a class="el" href="dr__modules_8h.html#ab7a87f255d0a31db30ea0cb3e2f0f0ac">dr_symbol_export_iterator_next()</a>, <a class="el" href="dr__modules_8h.html#a1f36a94cf06e959200aacd259325787c">dr_symbol_export_iterator_stop()</a></li>
<li>Added relative directory support to file routines on Windows</li>
<li>Added <a class="el" href="dr__tools_8h.html#ac3a677a98692a1f11b4f5b0270cf0912">dr_get_current_directory()</a></li>
<li>Added <a class="el" href="dr__tools_8h.html#a43b23d88adc4536bc69c771999fde3d2">dr_delete_dir()</a></li>
<li>Added <a class="el" href="group__drx.html#gaa0a5fcca247de11374c3555a5326cba8">drx_open_unique_file()</a> and <a class="el" href="group__drx.html#gaa85537dd6726928bbd43a21dc8211a53">drx_open_unique_appid_file()</a></li>
<li>Added <a class="el" href="dr__proc_8h.html#adfd5dadf31b9a26540978b7331701770">proc_avx_enabled()</a></li>
<li>Added support for recent IA-32/AMD64 instructions: the rdrand, fsgsbase, FMA4, XOP, TBM, LWP, BMI1, BMI2, SMX, INVPCID, TSX, and AVX2 instruction groups</li>
<li>Added vector addressing (VSIB) support to <a class="el" href="dr__ir__instr_8h.html#a28829816cc8178aab86a55173599c477">instr_compute_address()</a>, <a class="el" href="dr__ir__instr_8h.html#ad78a69d6d54664001ebfee25847a3983">instr_compute_address_ex()</a> and <a class="el" href="dr__ir__instr_8h.html#a119b505069a5608525bafb89ba0a2b8b">instr_compute_address_ex_pos()</a></li>
<li>Added <a class="el" href="dr__ir__opnd_8h.html#a5d0ce3414871686587c8eb7ecd3a7684">opnd_is_vsib()</a></li>
<li>Fixed misnamed opcodes: OP_pmovsxdw is now OP_pmovsxwd, OP_pmovzxdw is now OP_pmovzxwd, OP_vpmovsxdw is now OP_vpmovsxwd, and OP_vpmovzxdw is now OP_vpmovzxwd.</li>
<li>Renamed DRgui to DRstats in anticipation of a new DRgui graphical tool framework</li>
<li><a class="el" href="dr__tools_8h.html#aec4ac39e59bdcec70223794387db9fd0">dr_exit_process()</a> now supports sending a fatal signal via the 2nd byte of the exit code being set to the signal number</li>
<li>Added a return value of NULL to <a class="el" href="dr__tools_8h.html#a0917d634fe88c7d368eb6a20c17c55cb">dr_standalone_init()</a> to indicate failure, such as running on an unsupported OS</li>
<li>Added a "soft kills" feature to the <code>drx</code> Extension via <a class="el" href="group__drx.html#ga9348e840424caf0098a8b1ba69955864">drx_register_soft_kills()</a> to avoid child process termination preventing output of instrumentation results</li>
<li>Added <a class="el" href="dr__os__utils_8h.html#a8eaacb8d6e7e0934088e74475c9e7b35">dr_convert_pid_to_handle()</a></li>
<li>Added <a class="el" href="dr__tools_8h.html#a582dafe48f9bb894d23ba274913014fb">dr_syscall_intercept_natively()</a></li>
<li>Added <a class="el" href="dr__app_8h.html#aba46eea03a20e5801b87b7cd54d26bf5">dr_app_handle_mbr_target()</a></li>
<li>Added <a class="el" href="dr__app_8h.html#aea917a6c24c8bf526f77772b0b9848a8">dr_app_running_under_dynamorio()</a></li>
<li>Added <a class="el" href="group__drcontainers.html#ga70494a642307dd41ad8b6a754fcea9c8">drvector_set_entry()</a></li>
<li>Re-ordered the initial thread init event to be prior to the initial module load events</li>
<li>Changed DynamoRIO_USE_LIBC to be on by default for all clients, including clients written in C</li>
<li>Added static library versions of most Extension libraries: drmgr_static, drutil_static, drwrap_static, drsyms_static, and drx_static. Be sure to check the licenses and other restrictions (in particular, most of these Extensions will not work properly if duplicated) before using these static versions.</li>
<li>Various bug fixes</li>
</ul>
<hr  />
<p> The changes between version 4.1.0 and 4.0.1 include the following compatibility changes:</p>
<ul>
<li>The <a class="el" href="group__drsyms.html#ga4c38ae4b1348bfd1555f323037066b01">drsym_info_t</a> data structure has changed. The file name is now a caller-allocated buffer, and it and the symbol name are separated out. This affects code that calls <a class="el" href="group__drsyms.html#ga201e8a9bf6746cbfd232bc4e4a243d2b">drsym_lookup_address()</a>.</li>
<li>Memory allocated through system libraries (including malloc, operator new, and HeapAlloc) is not guaranteed to be reachable by a 32-bit displacement from the code cache: only memory directly allocated via DR's API. The <a class="el" href="page_deploy.html#op_reachable_heap">-reachable_heap runtime option</a> can be used to guarantee that all memory is reachable.</li>
<li>For 64-bit, the opcode constants OP_fxsave, OP_fxrstor, OP_xsave, OP_xrstor, and OP_xsaveopt have all been replaced with two versions: one with a "32" suffix and one with a "64" suffix. E.g., OP_fxsave is split into <a class="el" href="dr__ir__opcodes__x86_8h.html#a0411cd49bb5b71852cecd93bcbf0ca2da111bfd882f3c659431fdf8fb3ab5c0a3">OP_fxsave32</a> and <a class="el" href="dr__ir__opcodes__x86_8h.html#a0411cd49bb5b71852cecd93bcbf0ca2da3eba626fc423adfcaad47c784bf36eca">OP_fxsave64</a>. The 32 version corresponds to the no-suffix assembler mnemonic while the 64 version coresponds to the assembler mnemonic of the same name. Previously, the 64-bit versions of these instrutions could not be distinguished nor encoded from scratch.</li>
</ul>
<p>Further non-compatibility-affecting changes include:</p>
<ul>
<li>Added <a class="el" href="dr__ir__instr_8h.html#a6a279ef5b19e7c4f82f8804d9490da54">instr_is_floating_ex()</a></li>
<li>Ported the stats.c sample and DRgui to 64-bit. As part of this, the shared memory structure changed shape on Windows: pid is now of type process_id_t.</li>
<li>Added the <code>drtable</code> Extension which provides simple table management</li>
<li>Added <a class="el" href="dr__ir__opnd_8h.html#a128a5025cb4df50dfb0e0e5e6787b750">opnd_size_from_bytes()</a></li>
<li>Added path searching support to <a class="el" href="dr__os__utils_8h.html#ad63441e619a7b933e3198816cdc672c5">dr_load_aux_library()</a></li>
<li>Added limited, experimental support for 32-bit WOW64 clients to use 64-bit libraries and code via dr_load_aux_x64_library(), dr_lookup_aux_x64_library_routine(), dr_unload_aux_x64_library(), and dr_invoke_x64_routine().</li>
<li>Added <a class="el" href="group__drmgr.html#ga75f5e22831cb18cb7fbb8316cd56f09f">drmgr_current_bb_phase()</a></li>
<li>The deployment tools (drrun, drconfig, and drinject) are now helper binaries instead of shell scripts.</li>
<li>The deployment tools (drrun etc.) now interpret -v as an alias for -verbose and use -version to print version info.</li>
<li>Added <a class="el" href="dr__ir__utils_8h.html#a303cc7b7b132b9aafb8db5abae76d45f">instrlist_insert_mov_immed_ptrsz()</a> and <a class="el" href="dr__ir__utils_8h.html#abf2861316d8857d190ac174b58c18544">instrlist_insert_push_immed_ptrsz()</a></li>
<li>Added <a class="el" href="dr__ir__utils_8h.html#a18a42d59b54c1f768a0f8ef0c0e91c34">instrlist_insert_mov_instr_addr()</a> and <a class="el" href="dr__ir__utils_8h.html#a2315a34a23b75cbaebfc97e6547b5d10">instrlist_insert_push_instr_addr()</a></li>
<li>Added <a class="el" href="group__drsyms.html#ga01b46346170fbc4580d2e4fb5c4ba616">drsym_enumerate_lines()</a></li>
<li>Added <a class="el" href="dr__ir__disassemble_8h.html#a4c1e2fa2049719870ad0c1007b00d4e3aa9e5caa6773c8f8a4ff13b77231dbdaf">DR_DISASM_STRICT_INVALID</a></li>
<li>Added a new runtime option <a class="el" href="page_deploy.html#op_syntax_att">-syntax_att</a> for AT&amp;T-style disassembly that hides the implicit operands. Also added <a class="el" href="dr__ir__disassemble_8h.html#a4c1e2fa2049719870ad0c1007b00d4e3af82d1bee9aa93ac6df451bd80a4b1278">DR_DISASM_DR</a> to name DR's default disassembly style, with <a class="el" href="dr__ir__disassemble_8h.html#a4c1e2fa2049719870ad0c1007b00d4e3a83d3ece1134b8dabc7f0fd2f84185f11">DR_DISASM_ATT</a> selecting a true AT&amp;T disassembly style that hides implicit operands. The only compatibility change here is if a client selected DR_DISASM_ATT and expected DR-style disassembly.</li>
<li>Added <a class="el" href="dr__tools_8h.html#aaf8fd5f0e57d456151c951e0f3715fc4a12a6a7af3936e4c932effc9505f23be5">DR_MAP_IMAGE</a></li>
<li>Added -t option to drrun for end-user tools</li>
<li>Added 64-bit reachability support to <a class="el" href="dr__ir__utils_8h.html#a0258cfa82416ee2ba40ed73e4d4eebf7">dr_insert_call()</a> and <a class="el" href="dr__ir__utils_8h.html#a1df44dbe3d8dbf82e63e96741f167c64">dr_insert_clean_call()</a>. Added explicit control over reachability in a new routine <a class="el" href="dr__ir__utils_8h.html#a4640c7ef1edbf0358ba3b315ec12fb64">dr_insert_call_ex()</a> and in <a class="el" href="dr__defines_8h.html#af1b1bc23c42ffb7452568176b09b1212a9fe53fc77afb460ba31666995df5b6c9">DR_CLEANCALL_INDIRECT</a> for <a class="el" href="dr__ir__utils_8h.html#a175c7c2531aa70017d2fb020f93e374f">dr_insert_clean_call_ex()</a>.</li>
<li>Added auto-magic conversion of absolute and pc-relative memory operands to each other for more flexible 64-bit encoding.</li>
<li>Added <a class="el" href="dr__ir__opnd_8h.html#a8e631e642887228643e3c248a696e1be">opnd_create_instr_ex()</a> and <a class="el" href="dr__ir__opnd_8h.html#a73b989e5a273fa008e7c5010482358d2">opnd_get_shift()</a></li>
<li>Added <a class="el" href="dr__tools_8h.html#a527e0746207909580b705f1743537921">dr_custom_alloc()</a></li>
<li>Added <a class="el" href="dr__tools_8h.html#a57c490f6719db1753260799c3a435324">dr_raw_mremap()</a> and <a class="el" href="dr__tools_8h.html#ab10936426ba45ea96761adc6d9f9d290">dr_raw_brk()</a></li>
<li>Added <a class="el" href="dr__events_8h.html#a689518ac5d1ad136b13e03012702b209a184a564eaa6cee9890f98f8a2d1c9c89">DR_EMIT_GO_NATIVE</a>, <a class="el" href="dr__tools_8h.html#a566d8b7214afc621019c8f0048a094b0">dr_suspend_all_other_threads_ex()</a>, <a class="el" href="dr__tools_8h.html#a69e371d4c7d897bf24c8a558b86a4c69">dr_retakeover_suspended_native_thread()</a>, and <a class="el" href="dr__tools_8h.html#a12f0ea543a114210feefc521b132d69b">dr_is_thread_native()</a> for temporarily-native support.</li>
<li>Added <a class="el" href="dr__tools_8h.html#a4510e709f5b5285eaeb3435f1d42c544">dr_get_token()</a></li>
<li>Added <a class="el" href="dr__os__utils_8h.html#ac4d9e164873e0bf191bfae8cc2c867f3">dr_switch_to_app_state_ex()</a> and <a class="el" href="dr__os__utils_8h.html#a8b649488383757de1237c8caeb5f1c9b">dr_switch_to_dr_state_ex()</a></li>
<li>Added <a class="el" href="dr__events_8h.html#aaa2fb4d31cd234f2f31a868c49311d2e">dr_is_nudge_thread()</a></li>
<li>Added support for nudging 64-bit Windows applications</li>
<li>Added <a class="el" href="dr__tools_8h.html#ad42f2c7b95786297e1b45b6de81e257d">dr_get_dr_thread_handle()</a></li>
<li>Added <a class="el" href="dr__os__utils_8h.html#aff97be516bbb1aecdb6bd043841aaa10aa23ff267355a0b49da1b77da5bcc4d29">DR_MEMTYPE_RESERVED</a> to <a class="el" href="dr__os__utils_8h.html#a24463a9c32e3efac726c6fc9e97a77d6">dr_mem_info_t</a></li>
<li><a class="el" href="dr__proc_8h.html#a48ca3205c37d6e41d007ac54a1d60e6a">proc_save_fpstate()</a>, <a class="el" href="dr__proc_8h.html#aacb849daecc3021e451d9441b26cc814">proc_restore_fpstate()</a>, <a class="el" href="dr__ir__utils_8h.html#aa23665c11b7d79a29ea185113d07944f">dr_insert_save_fpstate()</a>, and <a class="el" href="dr__ir__utils_8h.html#a74016eacf3a9cfc20a93a9ac0bca9c59">dr_insert_restore_fpstate()</a> now use the current thread's x86 mode to determine which fxsave state format to use.</li>
<li>Added partial support for presenting the proper floating point program counter when floating point state is saved. Xref the <a class="el" href="page_deploy.html#op_translate_fpu_pc">-translate_fpu_pc runtime option</a>.</li>
<li>Added <code>drx</code> Extension: the DynamoRIO Instrumentation Utility Extension with BSD license</li>
<li>Added automatic restarting of appropriate system calls interrupted by signals.</li>
<li>Various bug fixes</li>
</ul>
<hr  />
<p> The changes between version 4.0.1 and 4.0.0 include:</p>
<ul>
<li>Fixed a bug resulting in large 64-bit applications failing to allocate heap (Issue 1041)</li>
</ul>
<hr  />
<p> The changes between version 4.0.0 and 3.2.0 include a compatibility change in the drsyms Extension:</p>
<ul>
<li>Changed the drsyms type query data structures (<a class="el" href="group__drsyms.html#gafacfa0e0e79a26a608c3e1b2d5b6dfc2">drsym_type_t</a>, <a class="el" href="group__drsyms.html#ga85402f5dd1b7077926274ba11a9984bc">drsym_func_type_t</a>, <a class="el" href="group__drsyms.html#ga97e3b69f2ae53fc2ef4cd00e7f40032e">drsym_int_type_t</a>, <a class="el" href="group__drsyms.html#ga602ae46c255113caf7fe2661ded4ed68">drsym_ptr_type_t</a>). This is a binary compatibility change for <a class="el" href="group__drsyms.html#ga676bf63e860bca8a8eb3a7fe7e0dfa00">drsym_get_func_type()</a>.</li>
</ul>
<p>And in the drmgr Extension:</p>
<ul>
<li>The post-syscall, module load, module unload, signal, exception, and restore state events are now mediated and ordered by drmgr. Thus, clients should call <a class="el" href="group__drmgr.html#ga7070ea3233d022ebf272b43a3301d130">drmgr_register_post_syscall_event()</a> (for a default priority) or <a class="el" href="group__drmgr.html#ga06a8b25b80a61e09cacaee10b6e4ef06">drmgr_register_post_syscall_event_ex()</a> (to specify a priority) rather than <a class="el" href="dr__events_8h.html#a7a62b6c11f3b0ae2fe7773189f6e4826">dr_register_post_syscall_event()</a>. The same applies to <a class="el" href="group__drmgr.html#gaae5e551a1571aca43c136a83fe334096">drmgr_register_module_load_event()</a> + <a class="el" href="group__drmgr.html#gaa14585b60c28600872f76b5e2939d638">drmgr_register_module_load_event_ex()</a>, <a class="el" href="group__drmgr.html#ga00e82d90a74f1f3bc87cfdaef45811c2">drmgr_register_module_unload_event()</a> + <a class="el" href="group__drmgr.html#ga852887c851db019e48cf00e232cf23ef">drmgr_register_module_unload_event_ex()</a>, <a class="el" href="group__drmgr.html#ga984ae18ed26a72c84a0fcaaaf44e2343">drmgr_register_signal_event()</a> + <a class="el" href="group__drmgr.html#ga81409344987ecb2ffcf08370d4a1145d">drmgr_register_signal_event_ex()</a>, <a class="el" href="group__drmgr.html#gadd41d491993daae9eb5bc136a8971d09">drmgr_register_exception_event()</a> + <a class="el" href="group__drmgr.html#gacf08ce7f3eab30d8c9aa0580840c569f">drmgr_register_exception_event_ex()</a>, and <a class="el" href="group__drmgr.html#ga0ffa6aa4d9af18a42e98d15b4f82bb20">drmgr_register_restore_state_event()</a> + <a class="el" href="group__drmgr.html#gaf52f88ecf793967022bddd447c65e66f">drmgr_register_restore_state_ex_event()</a> + <a class="el" href="group__drmgr.html#gabbba95c12df79ff5b4ceab3c516ded92">drmgr_register_restore_state_ex_event_ex()</a>.</li>
</ul>
<p>And in the core API:</p>
<ul>
<li><a class="el" href="dr__tools_8h.html#a487aba7cc5d4a71cea5318e4840984e8">dr_get_milliseconds()</a> now returns the number of milliseconds since Jan 1, 1601 on all platforms.</li>
</ul>
<p>And in the non-core APIs:</p>
<ul>
<li><a class="el" href="dr__inject_8h.html#a77b0c082257a96deebb67ad23f381426">dr_inject_process_create()</a> now takes a NULL-terminated array of strings for the app command line to better support porting to Linux.</li>
</ul>
<p>Further non-compatibility-affecting changes include:</p>
<ul>
<li>Added preliminary Windows 8 support, though private kernelbase.dll is not yet supported</li>
<li>Added persistent cache support for clients via <a class="el" href="dr__events_8h.html#a825819cfee635c11b8d43070d09611ce">dr_register_persist_ro()</a>, <a class="el" href="dr__events_8h.html#a0e3991d3fc34318385c4e1d7279ba4ef">dr_register_persist_rx()</a>, <a class="el" href="dr__events_8h.html#aad426e6c0afbb889d0b90f23a98bf6cc">dr_register_persist_rw()</a>, <a class="el" href="dr__events_8h.html#a15a89c0af1a58f59b80649aaeda219fc">dr_register_persist_patch()</a>, and <a class="el" href="dr__events_8h.html#a689518ac5d1ad136b13e03012702b209a8c6fbffdec0fe74acaf82d530ae03b00">DR_EMIT_PERSISTABLE</a>. However, <a class="el" href="dr__events_8h.html#a15a89c0af1a58f59b80649aaeda219fc">dr_register_persist_patch()</a> is still experimental, is in flux, and is subject to change in the next release.</li>
<li>Added hashtable persistence support via <a class="el" href="group__drcontainers.html#gab3d52ff455ac9bab9ef5ffe49586e904">hashtable_persist_size()</a>, <a class="el" href="group__drcontainers.html#ga012f1fb1127c60d90bd76d662c3dbf4a">hashtable_persist()</a>, and <a class="el" href="group__drcontainers.html#ga5857998e61b2477997fad25adf71580b">hashtable_resurrect()</a></li>
<li>Added <a class="el" href="group__drsyms.html#ga6b5e419be145c6956e796dbf3da1678d">drsym_get_type()</a>, <a class="el" href="group__drsyms.html#ga211ebdc7a540e7894a741aac8b2fc808">drsym_expand_type()</a>, and support for additional type categories for Windows drsyms.</li>
<li>Ported the drinjectlib and drconfiglib libraries to Linux. Routines that are still Windows-only are marked in the API docs.</li>
<li>Added <a class="el" href="dr__inject_8h.html#a4acf52ec4bc354ad729dd7e580e5ffb0">dr_inject_prepare_to_exec()</a> on Linux</li>
<li>Added <a class="el" href="group__drsyms.html#gaf3fc654dfbb2d1e1717ee60229d7ac9f">drsym_free_resources()</a></li>
<li>Added <a class="el" href="group__drsyms.html#ga88e18dc10941953589e1023d61ba0a57">drsym_module_has_symbols()</a></li>
<li>Added a type_id field to drsym_info_t (without compatibility changes)</li>
<li>Added <a class="el" href="group__drsyms.html#gad883ab113dd57f77db0c279de2c055f8">drsym_enumerate_symbols_ex()</a> and <a class="el" href="group__drsyms.html#ga5a983d39217af0f8a39868c66e0646d0">drsym_search_symbols_ex()</a> which return drsym_info_t on each symbol</li>
<li>Added <a class="el" href="dr__tools_8h.html#aec4ac39e59bdcec70223794387db9fd0">dr_exit_process()</a> to cleanly shut down with a specified exit code</li>
<li>Added <a class="el" href="dr__os__utils_8h.html#af71c6708c5b03e67687a40533a2e0f2d">dr_convert_handle_to_pid()</a></li>
<li>Added <a class="el" href="dr__events_8h.html#a9e0a6ebc74a4aa8efaed1d6b737512d2">dr_nudge_client_ex()</a> to enable nudging other processes from within a client</li>
<li>Added <a class="el" href="dr__ir__opnd_8h.html#a8ef3aeb840262664fad8e94937ae82c2">reg_resize_to_opsz()</a></li>
<li>Added <a class="el" href="dr__ir__utils_8h.html#a8c579801a00ce256038664288a5f8909">dr_save_arith_flags_to_xax()</a> and <a class="el" href="dr__ir__utils_8h.html#ac23cd7358b39b70ece301bdc48928422">dr_restore_arith_flags_from_xax()</a></li>
<li>Added <a class="el" href="dr__tools_8h.html#a6dca11e2920892d292405c49695d4890">dr_snwprintf()</a> and <a class="el" href="dr__tools_8h.html#a81096100c4202f0ea841bb24667cabc7">dr_vsnwprintf()</a></li>
<li>Added <a class="el" href="group__drwrap.html#ga0ae2e383b0005a46848c7d0497be563a">drwrap_replace_native()</a>, <a class="el" href="group__drwrap.html#ga3f23eb9d8bd537881dcea9ecb19b5a4f">drwrap_is_replaced()</a>, <a class="el" href="group__drwrap.html#ga87ab96ab2d3c5cc33480693266b33249">drwrap_is_replaced_native()</a></li>
<li>Added <a class="el" href="dr__ir__utils_8h.html#a1255b93576eb509d7fe9dfb4cfae472f">dr_clobber_retaddr_after_read()</a></li>
<li>Added <a class="el" href="dr__tools_8h.html#a7d8202a00c908f0e98083cc2183abc40">dr_get_string_option()</a> and <a class="el" href="dr__tools_8h.html#a0b43ec2cea34645dab0282cf6204d226">dr_get_integer_option()</a> to support querying arbitrary DynamoRIO runtime options</li>
<li>Added support for building with Visual Studio 2010 and with MSBuild</li>
<li>Added <a class="el" href="dr__ir__instr_8h.html#ae69609a072ec66fe105208cceca8a338">instr_is_near_ubr()</a> and <a class="el" href="dr__ir__instr_8h.html#a943091a0ac2905d029574403f16fa778">instr_is_near_call_direct()</a></li>
<li>Added exported CMake cross-platform assembly support in cpp2asm_support.cmake and auxiliary files</li>
<li>Added get_DynamoRIO_defines() to DynamoRIOConfig.cmake</li>
<li>Added DR_EMIT_MUST_END_TRACE flag</li>
<li>Improved the performance of <a class="el" href="dr__os__utils_8h.html#a7ceaf9328041825217ef55d2795cc177">dr_safe_read()</a> such that it out-performs DR_TRY_EXCEPT and no longer invokes a system call on Windows.</li>
<li>Added <a class="el" href="dr__ir__utils_8h.html#acb507c7b85501e8e52d85643c1e96a66">dr_redirect_native_target()</a></li>
<li>Added <a class="el" href="dr__tools_8h.html#ac63ccc4dc3cd6bec00c673eb73206808">dr_mark_safe_to_suspend()</a></li>
<li>Added <a class="el" href="dr__tools_8h.html#a8877efdba9869ab5b8b3b4169c9bc0ce">dr_mutex_mark_as_app()</a>, <a class="el" href="dr__tools_8h.html#a2c95bd55446ba4232ca591233200f275">dr_rwlock_mark_as_app()</a>, and <a class="el" href="dr__tools_8h.html#a9f5e7b4ab67d258d69d860c18e937468">dr_recurlock_mark_as_app()</a></li>
<li>Added <a class="el" href="dr__modules_8h.html#a7c8ab7e9af187cfd427206033ccadf49">dr_get_main_module()</a></li>
<li>Added module import iterators <a class="el" href="dr__modules_8h.html#a3a9c182af6819ce1bc9e1f32b207a4df">dr_module_import_iterator_start()</a>, <a class="el" href="dr__modules_8h.html#aa9b30bec3ae2b3223a857d2191d9258f">dr_module_import_iterator_hasnext()</a> <a class="el" href="dr__modules_8h.html#aa119730bdfa13d39ca1f783bc056b663">dr_module_import_iterator_next()</a>, <a class="el" href="dr__modules_8h.html#aa477a33244c4f74e30e284d0c587f4be">dr_module_import_iterator_stop()</a>, <a class="el" href="dr__modules_8h.html#a2d595c0bdb53841ff31eac058369d76d">dr_symbol_import_iterator_start()</a>, <a class="el" href="dr__modules_8h.html#a40fcc52d56eef40f02108aeef5ffd248">dr_symbol_import_iterator_hasnext()</a>, <a class="el" href="dr__modules_8h.html#ad0ca3d84c95f7279b88a2dff95f16493">dr_symbol_import_iterator_next()</a>, and <a class="el" href="dr__modules_8h.html#ab674c4d26fe5b2ce0c88d805d284ef60">dr_symbol_import_iterator_stop()</a>.</li>
<li>Added DR_FAST_IR to allow clients to inline some key IR routines</li>
<li>Added -logdir runtime option for control over the log directory</li>
<li>Added <a class="el" href="group__drmgr.html#ga4f53520da678e84fd7712e2fcca0182b">drmgr_get_parent_cls_field()</a></li>
<li>Added support for building DynamoRIO with Visual Studio 2012 and the Windows 8 WDK</li>
<li>Added a new operand type enabling an <a class="el" href="structinstr__t.html">instr_t</a> to be used as a memory reference: <a class="el" href="dr__ir__opnd_8h.html#a508b374d784b7f471e3f8e199e9de362">opnd_create_mem_instr()</a>, <a class="el" href="dr__ir__opnd_8h.html#a457ed9fee113c155aa23ad9e2a12688e">opnd_is_mem_instr()</a>, <a class="el" href="dr__ir__opnd_8h.html#a78be2fae6e06b2e921e30070c54893e0">opnd_get_mem_instr_disp()</a></li>
<li>Added DYNAMORIO_CONFIGDIR alternative to HOME as a config dir location. Additionally, drrun uses a temp dir for config files rather than failing.</li>
<li>Added library search path control via the client_basename.drpath file</li>
<li>Added <a class="el" href="group__drmgr.html#ga5afd374b143bb438d486c60bdf7cbc4e">drmgr_register_pre_syscall_event_ex()</a></li>
<li>Added DR_MEMPROT_GUARD for dr_memory_protect (Windows only).</li>
<li>Added <a class="el" href="dr__tools_8h.html#accb0b327ed9babc47922984b7adfed8b">dr_sscanf()</a></li>
<li>Added notifications on application faults and additional information on client faults</li>
<li>Added conversion between UTF-16 and UTF-8 to <a class="el" href="dr__tools_8h.html#a07fe87f7bf9560a45751064329bc8c12">dr_snprintf()</a> and <a class="el" href="dr__tools_8h.html#a6dca11e2920892d292405c49695d4890">dr_snwprintf()</a></li>
<li>Added simplified -c client argument form to drrun, drconfig, and drinject.</li>
<li>Added official support for the <a class="el" href="page_deploy.html#op_speed">-opt_speed</a> option to prioritize speed over a simple code stream.</li>
<li>Added <a class="el" href="dr__tools_8h.html#a0335f768c0ae053da44fd3f5886ac96c">dr_atomic_add32_return_sum()</a></li>
<li>Deprecated <a class="el" href="dr__ir__utils_8h.html#abd9f556b8175c4ac72d8e7df8295f121">dr_save_arith_flags()</a> and <a class="el" href="dr__ir__utils_8h.html#a31b8fd731ecc840fcddda04c36a7eadd">dr_restore_arith_flags()</a></li>
<li>Fixed performance regression involving inlined clean calls</li>
<li>Fixed bug involving 32-bit Linux support on a 64-bit Linux kernel on an AVX-enabled processor (Issue 754)</li>
<li>Fixed bug involving multimedia state on a 32-bit Windows kernel (Issue 139)</li>
<li>Fixed bugs building and running on Ubuntu 11.10 (Issue 718, Issue 720)</li>
<li>Several other bug fixes</li>
<li>Added <a class="el" href="dr__tools_8h.html#a2a5b61c462fe7d4c5f5b78f76a6eedce">dr_raw_mem_alloc()</a> and <a class="el" href="dr__tools_8h.html#aee58c732aec96032bcd5344104ef626c">dr_raw_mem_free()</a>. However, they are still experimental, are in flux, and are subject to change in the next release.</li>
</ul>
<hr  />
<p> The changes between version 3.2.0 and 3.1.0 are:</p>
<ul>
<li>Added support for PECOFF + DWARF2 symbols on Windows in the drsyms Extension</li>
<li>Added support for building extensions as static libraries (subject to licensing constraints) via DR_EXT_{DRWRAP,DRUTIL,DRMGR,DRSYMS}_STATIC</li>
<li>Added support for linking C clients with libc via DynamoRIO_USE_LIBC</li>
<li>Added <a class="el" href="dr__ir__utils_8h.html#a175c7c2531aa70017d2fb020f93e374f">dr_insert_clean_call_ex()</a></li>
<li>Added a no-frills drwrap mode for faster but constrained wrapping</li>
<li>Added <a class="el" href="group__drwrap.html#ga92584c3e1980ac0c467de7d14d2bc2a2">drwrap_get_drcontext()</a> for performance</li>
<li>Added drwrap notification on exceptions bypassing post-hooks</li>
<li>Added <a class="el" href="group__drwrap.html#ga14db611e4346e695e930ca0b710b598a">drwrap_wrap_ex()</a> to pass initial constant user data</li>
<li>Added <a class="el" href="group__drwrap.html#ga01e56e9bac8f584fe25e806a24769d50">drwrap_is_wrapped()</a> and <a class="el" href="group__drwrap.html#ga16fc2d260f5ebead724d5eb98bf13ac2">drwrap_is_post_wrap()</a></li>
<li>Added <a class="el" href="group__drwrap.html#gae2cc2affaf879182ba4d92299704c65f">drwrap_set_global_flags()</a> to control safety of application memory accesses</li>
<li>Added <a class="el" href="group__drwrap.html#gac3a79cf043d8c21dc190721d9fb105de">drwrap_get_mcontext_ex()</a> to avoid the cost of copying multimedia register values when not necessary</li>
<li>Added drwrap interface for caching post-call addresses</li>
<li>Added <a class="el" href="group__drmgr.html#ga357735ce7daa0bb717556455f20040a5">drmgr_decode_sysnum_from_wrapper()</a></li>
<li>Added <a class="el" href="group__drutil.html#gab75e6f41cd4ee5afaec592725abe1557">drutil_expand_rep_string_ex()</a> that returns additional information about string loop expansion</li>
<li>Added improved instrlist disassembly that includes labels and instruction targets</li>
<li>Added <a class="el" href="dr__ir__instr_8h.html#a119b505069a5608525bafb89ba0a2b8b">instr_compute_address_ex_pos()</a> for instrs with multiple memory operands.</li>
<li>Added <a class="el" href="dr__tools_8h.html#acdead1ca945b38f865c5599bdebf9d0e">dr_get_client_base()</a></li>
<li>Added <a class="el" href="dr__tools_8h.html#af763a8387187c98cf359f9819f300833">dr_vsnprintf()</a></li>
<li>Added service pack version to <a class="el" href="dr__os__utils_8h.html#a6c40e727eda07c4af602ec5bd49d21c3">dr_get_os_version()</a></li>
<li>Added mediation of note fields to drmgr</li>
<li>Added custom storage in label instructions via <a class="el" href="dr__ir__instr_8h.html#a946303e1c9c3d1102603dc9842479b0c">instr_get_label_data_area()</a></li>
<li>Added support for multiple non-meta control transfer instructions with intra-block targets in one basic block to drmgr</li>
<li>Added user data passing support among all four passes of drmgr</li>
<li>Several bug fixes</li>
</ul>
<hr  />
<p> Version 3.0.0 was a development version. 3.1.0 is the first official released version of the 3.x series.</p>
<p>The changes between version 3.0.0 and 2.2.0 include the following major features:</p>
<ul>
<li>Added a private loader on Linux for better support for C++ clients and third-party library usage by clients</li>
<li>Added Linux support for <code>drsyms</code> to enable symbol processing in Linux clients</li>
<li>Added <code>drutil</code> Extension which provides memory address retrieval and string loop expansion (note: LGPL license)</li>
<li>Added a static library for decoding and encoding</li>
</ul>
<p><b>IMPORTANT:</b> The 3.0.0 and onward client API is mostly backward compatible with releases from 1.0.0 (originally called 0.9.6: see below) onward with the exception of functions that involve dr_mcontext_t and several other source and binary compatibility changes since version 2.2.0 described below. The dr_mcontext_t struct and all structs that contain it have changed and are NOT backward compatible with releases prior to 3.0.0.</p>
<p>A sample script for updating client sources to the 3.0.0 API's version of dr_mcontext_t and related functions is as follows:</p>
<div class="fragment"><div class="line">perl -pi -e <span class="stringliteral">&#39;\</span></div>
<div class="line"><span class="stringliteral">s|dr_mcontext_t (\w+);|dr_mcontext_t \1 = {sizeof(\1),DR_MC_ALL,};|;\</span></div>
<div class="line"><span class="stringliteral">s|(dr_[gs]et_mcontext\(\S+,\s+\S+),\s+[^\s\)]+\)|\1)|;\</span></div>
<div class="line"><span class="stringliteral">s|(dr_redirect_execution\(\S+),\s+\S+\)|\1)|;\</span></div>
<div class="line"><span class="stringliteral">s|^\s+int app_errno;\s*\n||ms;\</span></div>
<div class="line"><span class="stringliteral">s|raw_mcontext\.|raw_mcontext-&gt;|g;\</span></div>
<div class="line"><span class="stringliteral">s|info-&gt;mcontext\.|info-&gt;mcontext-&gt;|g;\</span></div>
<div class="line"><span class="stringliteral">s|excpt-&gt;mcontext\.|excpt-&gt;mcontext-&gt;|g;&#39;</span> *.c</div>
</div><!-- fragment --><p>The script makes 3 main changes. First, any dr_mcontext_t allocated by the client must have its <code>size</code> and <code>flags</code> fields set. Second, the <code>app_errno</code> parameter was removed from several functions; it required a local variable, so any local named <code>app_errno</code> is removed. Third, the dr_mcontext_t fields in the fault, signal, and exception structs all became pointers.</p>
<p>This script may not catch all cases. Use your version control system to look at the diff after applying it to ensure it did not change anything it shouldn't have. Run with debug build to catch other instances where <a class="el" href="struct__dr__mcontext__t.html#a11c0a7fef86b59511a30b31718e3d5e1">dr_mcontext_t.size</a> is not set. Also note that using the dr_mcontext_t initialization syntax in the script will end up calling memset; for performance-critical situations, instead initialize only the size and flags fields separately. Also note that if the xmm or ymm registers are not needed, asking for DR_MC_CONTROL and/or DR_MC_INTEGER is more performant than DR_MC_ALL.</p>
<p><b>IMPORTANT:</b> Further changes between version 3.0.0 and 2.2.0 include the following that affect source and/or binary compatibilty:</p>
<ul>
<li>Changed the <a class="el" href="dr__defines_8h.html#ab55fe2529e760adfd88197d0246bc074">dr_mcontext_t</a> structure field layout. This is a binary compatibility change with respect to versions prior to 3.0.0.</li>
<li>Added a <a class="el" href="struct__dr__mcontext__t.html#a11c0a7fef86b59511a30b31718e3d5e1">dr_mcontext_t.size</a> field which must be set by the client prior to calling <a class="el" href="dr__ir__utils_8h.html#a9e348b2596b8750ce3fad234ab022ced">dr_get_mcontext()</a>, <a class="el" href="dr__ir__utils_8h.html#ac4bfa7fc3f9d4adb0857675bec2712a2">dr_set_mcontext()</a>, or dr_redirect_execution. This is a source compatibility change with respect to versions prior to 3.0.0.</li>
<li>Added a <a class="el" href="struct__dr__mcontext__t.html#a3aa9824f7e23cec6552859cc29af4b68">dr_mcontext_t.flags</a> field which must be set by the client prior to calling <a class="el" href="dr__ir__utils_8h.html#a9e348b2596b8750ce3fad234ab022ced">dr_get_mcontext()</a>, <a class="el" href="dr__ir__utils_8h.html#ac4bfa7fc3f9d4adb0857675bec2712a2">dr_set_mcontext()</a>, or dr_redirect_execution. This is a source compatibility change with respect to versions prior to 3.0.0.</li>
<li>Removed the app_errno parameter from <a class="el" href="dr__ir__utils_8h.html#a9e348b2596b8750ce3fad234ab022ced">dr_get_mcontext()</a>, <a class="el" href="dr__ir__utils_8h.html#ac4bfa7fc3f9d4adb0857675bec2712a2">dr_set_mcontext()</a>, and <a class="el" href="dr__ir__utils_8h.html#ac3aa7797e4e3ce2f741f99712bb704f5">dr_redirect_execution()</a>. This is a source compatibility change with respect to versions prior to 3.0.0.</li>
<li>Changed all dr_mcontext_t fields in the dr_restore_state_info_t, dr_exception_t, and dr_siginfo_t structs to be pointers. This is a source compatibility change with respect to versions prior to 3.0.0.</li>
<li>Changed the bool typedef from int to char for C++ compatibility. This is a binary compatibility change with respect to versions prior to 3.0.0.</li>
<li>Changed the signature of <a class="el" href="group__drwrap.html#ga27894370f3da794ff3f31cb8d7ec079b">drwrap_unwrap()</a>, in order to allow one of the pre or post hooks to be optional (Issue 562). This is a source compatibility change with respect to versions prior to 3.0.0.</li>
<li>Moved console printing support from the drsyms Extension to core DR. The drsym_write_to_console() and drsym_using_console() are no longer supported. Instead, call <a class="el" href="dr__tools_8h.html#ab870ad4d34833368e16bd3f6e07ba624">dr_enable_console_printing()</a> in <a class="el" href="dr__api_8h.html#a819eb581527829240bf227d5a8f98e4c">dr_init()</a>, which then enables <a class="el" href="dr__tools_8h.html#aeb88b22ff95c29ae793b9d84e1b95275">dr_printf()</a> and <a class="el" href="dr__tools_8h.html#ae338685a241cfeae5f3d507ae9cff957">dr_fprintf()</a> to print to the console (with some limitations: see <a class="el" href="dr__tools_8h.html#ab870ad4d34833368e16bd3f6e07ba624">dr_enable_console_printing()</a> documentation). This is a source compatibility change with respect to versions prior to 3.0.0.</li>
<li>Added a <code>flags</code> argument to most of the routines in the <code>drsyms</code> extension to control demangling, and added <a class="el" href="group__drsyms.html#gad582a65dc1308335633e0c451035dbe0">drsym_demangle_symbol()</a>. This is a source compatibility change with respect to versions prior to 3.0.0.</li>
<li>Added <a class="el" href="group__drsyms.html#ga8b7f688e703f8ca1937f091f53d3d697">drsym_get_module_debug_kind()</a> and a <code>debug_kind</code> field to the <code>drsym_info_t</code> struct written by <a class="el" href="group__drsyms.html#ga201e8a9bf6746cbfd232bc4e4a243d2b">drsym_lookup_address()</a>. These additions allow drsyms users to determine what kind of debug info is available for a module. The <code>debug_kind</code> field creates a binary compatibility change for users of <code>drsym_info_t</code> with respect to versions prior to 3.0.0.</li>
</ul>
<p>Additional changes between version 3.0.0 and 2.2.0 include the following:</p>
<ul>
<li>Added <code>drvector</code> to drcontainers Extension: simple resizable vector</li>
<li>Added a windbg script for auto-locating libraries for easier debugging</li>
<li>Added <a class="el" href="dr__tools_8h.html#aba2f7a49ae4f18a0b1967f962440b914">dr_mutex_self_owns()</a> and recursive lock support (dr_recurlock_*) (Issue 219)</li>
<li>Added <a class="el" href="dr__tools_8h.html#ac2885193f264131c620475894e3d1e1e">dr_map_file()</a>, <a class="el" href="dr__tools_8h.html#a3b63ba5945657da579f044daa01ba035">dr_unmap_file()</a>, and <a class="el" href="dr__tools_8h.html#a34ee1db27b9b527a5488314d12782700">dr_file_size()</a> (Issue 542)</li>
<li>Added <a class="el" href="dr__tools_8h.html#afdbb2913daa5c083cf9881b5d500513e">dr_rename_file()</a> and <a class="el" href="dr__tools_8h.html#a518ec4d2f8bb8ab51782c14ba0be2fd3">dr_delete_file()</a>.</li>
<li>Added routines to disassemble to a buffer rather than a file (Issue 524)</li>
<li>Added support for the AVX and FMA ISA extensions</li>
<li>Added <a class="el" href="dr__ir__utils_8h.html#a9038ab78f7bc0385b10ea256610022ca">dr_insert_get_seg_base()</a></li>
<li>Added return value to <a class="el" href="dr__ir__utils_8h.html#ac3aa7797e4e3ce2f741f99712bb704f5">dr_redirect_execution()</a> and <a class="el" href="dr__ir__utils_8h.html#ac4bfa7fc3f9d4adb0857675bec2712a2">dr_set_mcontext()</a></li>
<li>Increased maximum option string from 512 to 2048 (Issue 363)</li>
<li>Increased default stack size from 20KB to 56KB to make it easier to use C++ and external libraries with larger stack usage</li>
<li>Added <a class="el" href="dr__os__utils_8h.html#a6c40e727eda07c4af602ec5bd49d21c3">dr_get_os_version()</a> (Issue 304)</li>
<li>Deprecated the "meta-instruction that can fault" property and <a class="el" href="dr__ir__instr_8h.html#a015ff65aa737638e35e76e9de1ae934a">instr_is_meta_may_fault()</a>, <a class="el" href="dr__ir__instr_8h.html#aae83ef5ab1a1442718367b5b3162ab5f">instr_set_meta_may_fault()</a>, <a class="el" href="dr__ir__utils_8h.html#a1d006431d6330adc66e372d99fa86e2f">instrlist_meta_fault_preinsert()</a>, <a class="el" href="dr__ir__utils_8h.html#a3ee2dc65e868a33347292adb54982c16">instrlist_meta_fault_postinsert()</a>, and <a class="el" href="dr__ir__utils_8h.html#ad9818755498b60ba7713a7a064b6db53">instrlist_meta_fault_append()</a>.</li>
<li>Added <a class="el" href="dr__os__utils_8h.html#a166d041c41c9a313f56ecc1910feed9c">dr_using_app_state()</a></li>
<li>Added <a class="el" href="dr__ir__encode_8h.html#a285a9fb1eaa589b9bb143c8c85861b2b">instr_encode_to_copy()</a> and <a class="el" href="dr__ir__encode_8h.html#a8eacc8e4f757c7d3ed0e29f464021522">instrlist_encode_to_copy()</a></li>
<li>Added <a class="el" href="dr__ir__disassemble_8h.html#ac5e34cc6c23ce496b13eebb043184552">disassemble_set_syntax()</a> for -syntax_intel control without runtime options and <a class="el" href="dr__proc_8h.html#a79cc51e1a110888f10b93ce0278ed01e">proc_set_vendor()</a> to control vendor-specific ISA details when decoding or encoding</li>
<li>Added <a class="el" href="dr__ir__instrlist_8h.html#af7056885c9448d9702f9e3801709b379">instrlist_set_fall_through_target()</a> and <a class="el" href="dr__ir__instrlist_8h.html#a3f3342963e585ad2646bfee232ba6d14">instrlist_set_return_target()</a></li>
<li>Added <a class="el" href="group__drcontainers.html#ga2bcb10d265f6005bbcef89129ad58548">hashtable_clear()</a> to the drcontainers Extension</li>
<li>Several bug fixes</li>
</ul>
<hr  />
<p> The changes between version 2.2.0 and 2.1.0 are:</p>
<ul>
<li>Added <code>drwrap</code> Extension which provides function wrapping and replacing (note: LGPL license)</li>
<li>Added <code>drmgr</code> Extension: the DynamoRIO Multi-Instrumentation Manager Extension, a mediator for combining and coordinating multiple instrumentation passes</li>
<li>Added read-write locks (Issue 406)</li>
<li>Added isolation of client-opened files from the application (Issue 357)</li>
<li>Added dr_mcontext_t.xip for syscall events (Issue 442)</li>
<li>Several bug fixes</li>
</ul>
<hr  />
<p> The changes between version 2.1.0 and 2.0.0 are:</p>
<ul>
<li>Added Windows 7 support</li>
<li>Added clean call sequence optimization and auto-inlining.</li>
<li>Added Windows child process following support for clients: -follow_children is now on by default for both Windows and Linux.</li>
<li>Added <a class="el" href="dr__os__utils_8h.html#adb9ba447c606e5e58400ac7b6ef719d1">DR_TRY_EXCEPT()</a> (Issue 51)</li>
<li>Added dynamic client auxiliary library loading support via <a class="el" href="dr__os__utils_8h.html#ad63441e619a7b933e3198816cdc672c5">dr_load_aux_library()</a>, <a class="el" href="dr__os__utils_8h.html#ab2c609dbb7bc2e23a268946ccbaa622a">dr_lookup_aux_library_routine()</a>, and <a class="el" href="dr__os__utils_8h.html#a7b8b8e8368257c45d6b5a973a963d19d">dr_unload_aux_library()</a></li>
<li>Added <a class="el" href="dr__os__utils_8h.html#a89abb45db2c1f35564c5fa6f6765f55f">dr_switch_to_app_state()</a> and <a class="el" href="dr__os__utils_8h.html#a3f08638719a695bcb95d101a03cfd8f3">dr_switch_to_dr_state()</a></li>
<li>Added <a class="el" href="dr__tools_8h.html#a52661f5c59ab6478f72e8f6774796188">dr_client_thread_set_suspendable()</a></li>
<li>Added <a class="el" href="dr__tools_8h.html#a036726345f9ea686b7eae46eca38e5e3">dr_get_random_value()</a>, <a class="el" href="dr__tools_8h.html#aebc774dc54b77dcd8505277e6bc66722">dr_set_random_seed()</a>, and <a class="el" href="dr__tools_8h.html#a61da9915f2e77f2bcbc4e07bcac945dc">dr_get_random_seed()</a></li>
<li>Added <a class="el" href="dr__tools_8h.html#afe870f8dd183281593eb10199ec453c2">dr_file_exists()</a> and <a class="el" href="dr__tools_8h.html#ab3a0a8c4e06776d42bac20ac26c0632d">dr_directory_exists()</a> for Linux</li>
<li>Added support for <a class="el" href="dr__ir__utils_8h.html#a9e348b2596b8750ce3fad234ab022ced">dr_get_mcontext()</a> from secondary thread init events, and changed its return type to bool</li>
<li>Added dynamic hashtable resizing to the drcontainers hashtable</li>
<li>Added <a class="el" href="dr__tools_8h.html#a65a1bd0254f72ed1d70307c26d26daca">dr_app_pc_from_cache_pc()</a></li>
<li>Added a segment list to module_data_t for Linux and internal support for non-contiguously-mapped modules (Issue 160)</li>
<li>Added PEB isolation (Issue 249) and <a class="el" href="dr__os__utils_8h.html#a53e8fbee6d87378280e440c4c75e0635">dr_get_app_PEB()</a></li>
<li>Added <a class="el" href="group__drsyms.html#ga260c78496165b54b9a97d0a5e1f6f4d8">drsym_enumerate_symbols()</a> to the <code>drsyms</code> Extension</li>
<li>Added limited support for printing to the cmd window (Issue 261) via the <code>drsyms</code> Extension: drsym_write_to_console() and drsym_using_console()</li>
<li>Renamed the REG_ constants to DR_REG_ to avoid conflicts with system headers (Issue 34). Clients should set(DynamoRIO_REG_COMPATIBILITY ON) prior to configure_DynamoRIO_client() to use the old constants and avoid any source changes; this will happen automatically if the client targets version 2.0 or earlier. Binary compatibility is unaffected.</li>
<li>Deprecated <a class="el" href="dr__tools_8h.html#a558ef634eff90b0e777cddb73983617a">dr_request_synchronized_exit()</a> and replaced it with <a class="el" href="dr__events_8h.html#a02752a5882342ab163cb666b6ec3cf44">dr_set_process_exit_behavior()</a>. Now a full thread synch is performed at exit time in release build if a process exit event or thread exit event is registered. <a class="el" href="dr__events_8h.html#a02752a5882342ab163cb666b6ec3cf44">dr_set_process_exit_behavior()</a> can provide more performant exit performance for clients that have flexible exit event requirements.</li>
<li>Switched debug build to also be an INTERNAL=ON build</li>
<li>Fixed bug in handling single-byte-bb selfmod code</li>
<li>Fixed bugs in handling alarm signals</li>
<li>Fixed 64-bit Windows stack alignment bug (Issue 331)</li>
<li>Fixed handling of "data32 rex.w call"</li>
<li>Fixed Issue 320: a problem with thread-private cache resizing</li>
<li>Fixed Issue 319: decode movlhps and movhlps properly</li>
<li>Fixed Issue 139: add xmm0-7 preservation for 32-bit Linux applications, which may have noticeable impacts on clients calling clean calls: e.g., pushing bbs over the max size limit or having a noticeable performance hit.</li>
<li>Support building sources using Visual Studio</li>
</ul>
<hr  />
<p> In version 2.0.0, the configuration and deployment API and tools changed and are not backward compatible with earlier versions: see below for details. The changes between version 2.0.0 and 1.5.0 are:</p>
<ul>
<li><p class="startli">Changed the configuration and deployment model for both Linux and Windows to use a configuration file based approach on both platforms, which adds control over child processes on Linux and supports local configuration on Windows for un-privileged and parallel execution (Issue 265). The registry is no longer used for individual application configuration on Windows other than to point at the location for global configuration files, when used.<br  />
 <b>IMPORTANT:</b> On Windows the following non-backward-compatible changes have been made:</p><ul>
<li>drdeploy.exe no longer exists (replaced by drconfig.exe and drrun.exe)</li>
<li>drconfig.dll is now drconfiglib.dll</li>
<li>drconfiglib.dll's API routines now take in a process id to support one-time targeted-process configuration (to support parallel execution)</li>
<li>configuration is either per-user or global, with per-user taking precedence when both exist</li>
<li>configuration does NOT enable systemwide injection by default: use the -syswide_on parameter to drconfig or drrun for that (it requires administrative privileges)</li>
</ul>
<p class="startli"><b>IMPORTANT:</b> On Linux, if you're using custom injection via raw environment variables rather than using the <code>drdeploy</code> script, you must also set DYNAMORIO_RUNUNDER to 1 for injection to work with this release.</p>
</li>
<li>Added drinjectlib.dll and <a class="el" href="dr__inject_8h.html" title="Injection API. Use these functions to launch processes under the control of DynamoRIO.">dr_inject.h</a>, making custom injection tools easier to build (Issue 246)</li>
<li>Added DynamoRIO Extension support for auxiliary libraries that extend the DynamoRIO API (Issue 277)</li>
<li>Added symbol lookup support via Extension (Windows only for now) (Issue 44)</li>
<li>Added a "drcontainers" Extension that initially contains a hashtable</li>
<li>Added thread creation support: <a class="el" href="dr__tools_8h.html#aca9bc4918a9b5facc7f44cf6a9e8bdca">dr_create_client_thread()</a> (Issue 41)</li>
<li>Added <a class="el" href="dr__tools_8h.html#aac428021a331be838eca5a0ef19989bd">dr_sleep()</a></li>
<li>Added <a class="el" href="dr__tools_8h.html#ac74de1da117d9c807b986aeda2523dd9">dr_set_itimer()</a> and <a class="el" href="dr__tools_8h.html#a5d2f1d0559603dc203351d9b8da0e216">dr_get_itimer()</a> (Linux-only) (Issue 283)</li>
<li>Added <a class="el" href="dr__tools_8h.html#a3f233285fe626838c3f61aac27a92050">dr_app_pc_for_decoding()</a></li>
<li>Added -synch_at_exit option and <a class="el" href="dr__tools_8h.html#a558ef634eff90b0e777cddb73983617a">dr_request_synchronized_exit()</a> to provide guarantees over thread exit event timing in release build</li>
<li>Added <a class="el" href="dr__ir__instr_8h.html#a2822687082969e54135c71d16262f010">instr_cmovcc_triggered()</a> and <a class="el" href="dr__ir__instr_8h.html#a949d2d48163c09469cac82295ac7d6ed">instr_cmovcc_to_jcc()</a></li>
<li>Renamed OP_fcmovene to OP_fcmovne</li>
<li>Implemented <a class="el" href="dr__ir__instr_8h.html#a8d0845d1fc09251416c1515793d0b1c3">instr_invert_cbr()</a> for OP_jcc_short</li>
<li>Added the full path to modules in module_data_t</li>
<li>Added <a class="el" href="dr__modules_8h.html#acc5a9cbb5954c2e7159c8a3b25dbf110">dr_get_proc_address_ex()</a> to support indirect code objects</li>
<li>Added <a class="el" href="dr__tools_8h.html#a487aba7cc5d4a71cea5318e4840984e8">dr_get_milliseconds()</a> and <a class="el" href="dr__tools_8h.html#aaf560764ce43a11d3f5abb6e4f78dcae">dr_get_time()</a> impl for Linux</li>
<li>Added <a class="el" href="dr__ir__instr_8h.html#aef2bb687e09007057d09e27e1c95f373">instr_is_undefined()</a></li>
</ul>
<hr  />
<p> The changes between version 1.5.0 and 1.4.0 are:</p>
<ul>
<li>Added a private loader on Windows for better support for library usage by clients</li>
<li>Added nudge support on Linux</li>
<li>Added <a class="el" href="dr__tools_8h.html#ae4eaefda11c27210a72df6d24f72871f">dr_suspend_all_other_threads()</a> and <a class="el" href="dr__tools_8h.html#a5842900d62c160ea7f0e99c0eee77bb0">dr_resume_all_other_threads()</a></li>
<li>Made it easier for clients to use faults to push rare events out of instrumentation paths:<ul>
<li>Added access to the pre-translated context and the code fragment information for both <a class="el" href="dr__events_8h.html#a8f0c200ef1c92ac8bf43b1a62968838a">dr_register_signal_event()</a> and <a class="el" href="dr__events_8h.html#a36fc1b4f973393d861c7740cda6c0002">dr_register_exception_event()</a> This changed the return type for exception event callbacks.</li>
<li>Added a signal/exception event on a fault in non-code-cache DynamoRIO code, such as client-generated code.</li>
<li>Added the "meta-instruction that can fault" property via <a class="el" href="dr__ir__instr_8h.html#a015ff65aa737638e35e76e9de1ae934a">instr_is_meta_may_fault()</a>, <a class="el" href="dr__ir__instr_8h.html#aae83ef5ab1a1442718367b5b3162ab5f">instr_set_meta_may_fault()</a>, <a class="el" href="dr__ir__utils_8h.html#a1d006431d6330adc66e372d99fa86e2f">instrlist_meta_fault_preinsert()</a>, <a class="el" href="dr__ir__utils_8h.html#a3ee2dc65e868a33347292adb54982c16">instrlist_meta_fault_postinsert()</a>, and <a class="el" href="dr__ir__utils_8h.html#ad9818755498b60ba7713a7a064b6db53">instrlist_meta_fault_append()</a>.</li>
<li>Added a new event <a class="el" href="dr__events_8h.html#a89881448b9890f44ef26eab71014e956">dr_register_restore_state_ex_event()</a> that provides the pre-translated context and code fragment information, and allows for translation failure for non-fault translations.</li>
</ul>
</li>
<li>Added <a class="el" href="dr__tools_8h.html#a08ac1cc05cf53faed156aa6c16a18d93">dr_dup_file_handle()</a></li>
<li>Added <a class="el" href="dr__os__utils_8h.html#a503f1faf758d1bda2618d4f9004be44a">dr_memory_is_dr_internal()</a> and <a class="el" href="dr__os__utils_8h.html#aa9942f73414e24419ed66d28cefb06f1">dr_memory_is_in_client()</a></li>
<li>Added <a class="el" href="dr__os__utils_8h.html#abaa5c24341c70a6ed925f73acb1da7e9">dr_get_parent_id()</a></li>
<li>Added <a class="el" href="dr__ir__decode_8h.html#a9793c4f9a1e642ca51c059c409ad8ffd">decode_opcode_name()</a></li>
<li>Removed the deprecated snprintf() as it causes symbol pre-emption problems on Linux. Older clients should switch to <a class="el" href="dr__tools_8h.html#a07fe87f7bf9560a45751064329bc8c12">dr_snprintf()</a>.</li>
<li>Fixed bug in cross-architecture execve (Issue 146)</li>
<li>Clone record is now passed via dstack instead of ebp (Issue 149)</li>
<li>Fixed close() syscall handling, !HAVE_TLS assert &amp; minor issues (Issue 151)</li>
</ul>
<hr  />
<p> The changes between version 1.4.0 and 1.3.2 are:</p>
<ul>
<li>Added directly-addressable thread-local storage slots for exclusive client use:<ul>
<li><a class="el" href="dr__tools_8h.html#ac5d2a2ccd58268f84c379a38bc4aa399">dr_raw_tls_calloc()</a></li>
<li><a class="el" href="dr__tools_8h.html#ad2162f0dbd52d784c1fbfe8ac75cf6ec">dr_raw_tls_cfree()</a></li>
</ul>
</li>
<li>Provide 64-bit versions of the drdeploy.exe and drview.exe tools</li>
<li>Provide <a class="el" href="dr__modules_8h.html#acb571b80307fd90538cb006725ab6183">dr_get_proc_address()</a> on Linux</li>
<li>Added <a class="el" href="dr__os__utils_8h.html#a64bc438e6114c0e6137d65e4c9a8beb6">dr_query_memory_ex()</a> to allow address space walking on Linux</li>
<li>Added -msgbox_mask on Linux: waits for a keypress<ul>
<li>Added STDIN and <a class="el" href="dr__tools_8h.html#adf64b8dc334709ed00623248fcae3c73">dr_get_stdin_file()</a></li>
</ul>
</li>
<li>Added shared library versioning on Linux</li>
<li>Support calling <a class="el" href="dr__ir__utils_8h.html#a9e348b2596b8750ce3fad234ab022ced">dr_get_mcontext()</a> from bb and trace callbacks</li>
<li>Provide support for building clients using CMake (see cmake/, and for an example of usage see samples/CMakeLists.txt)</li>
<li>Provide support for clients to use -fvisibility by setting the define USE_VISIBILITY_ATTRIBUTES for <a class="el" href="dr__defines_8h.html" title="Basic defines and type definitions.">dr_defines.h</a></li>
<li>Added <a class="el" href="dr__ir__instr_8h.html#ad78a69d6d54664001ebfee25847a3983">instr_compute_address_ex()</a> for instrs with multiple memory operands</li>
<li>Provide <a class="el" href="dr__tools_8h.html#a07fe87f7bf9560a45751064329bc8c12">dr_snprintf()</a> (identical to snprintf()) for consistent naming and to avoid gcc warnings about using pointers with x (which we're using because there is no portable way to precisely control p)</li>
<li>The statistics viewer <code>DRgui.exe</code> is no longer supported on Windows NT. Statistics still work, but the graphical application itself will not run on NT.</li>
<li>Changed the top-level registry key to "DynamoRIO"</li>
<li>Re-arranged layout of bin and samples directories</li>
<li>Symbols for all binaries are now included</li>
</ul>
<hr  />
<p> The changes between version 1.3.2 and 1.3.1 are:</p>
<ul>
<li>Added support for Linux execve of cross-architectural executables (e.g., 32-bit process performing execve of 64-bit executable)<ul>
<li>Also, libdrpreload.so is now kept in the same libXX/{debug,release} directory as libdynamorio.so</li>
</ul>
</li>
<li><a class="el" href="dr__ir__instr_8h.html#a58c247518c78f0c544028b062ed8c4c6">instr_convert_short_meta_jmp_to_long()</a> now returns the longer version of the taken jump, to use when setting the target of a jecxz or loop* branch.</li>
<li>Various bug fixes including in these areas:<ul>
<li><a class="el" href="dr__tools_8h.html#a2d20c65a63ebb1a2081b3152d9d4647d">dr_syscall_set_result()</a> and <a class="el" href="dr__tools_8h.html#aedb494e753b1a2f0e79cb4bd09700c3c">dr_syscall_invoke_another()</a></li>
<li>64-bit drinject stack alignment</li>
<li>64-bit erroneous assert in <a class="el" href="dr__os__utils_8h.html#af99715c7ad2497ad86f4769da0f19699">dr_get_process_id()</a></li>
<li>64-bit dr_file_{tell,seek} worked but returned failure</li>
<li>-opt_memory bugs resulting in asserts</li>
<li>sigprocmask() corner case bug</li>
<li>signal handler sharing for NPTL threads</li>
<li>decoding across page boundaries on Linux</li>
</ul>
</li>
</ul>
<hr  />
<p> Version 1.3.1 is identical to 1.3.0 but is under a BSD license (see <a class="el" href="page_license.html">License</a>).</p>
<p>We re-numbered the previous DynamoRIO versions as follows:</p>
<ul>
<li>1.0.0 = 0.9.6 build 9600</li>
<li>1.1.0 = 0.9.6 build 9601</li>
<li>1.2.0 = 0.9.6 build 9602</li>
</ul>
<hr  />
<p> The changes between version 1.3.0 and version 1.2.0 (0.9.6 9602) are:</p>
<ul>
<li>Version numbering shift to 1.x.y instead of 0.9.6 960x</li>
<li>New system call pre, post, and filter events, and new system call parameter and result access, along with a feature to chain system calls:<ul>
<li><a class="el" href="dr__events_8h.html#a80d0f026def74d903a83fb6122816ae2">dr_register_pre_syscall_event()</a></li>
<li><a class="el" href="dr__events_8h.html#a7a62b6c11f3b0ae2fe7773189f6e4826">dr_register_post_syscall_event()</a></li>
<li><a class="el" href="dr__events_8h.html#a1f98fd4c247abe6c7fcc6d02291b44de">dr_register_filter_syscall_event()</a></li>
<li><a class="el" href="dr__tools_8h.html#ae3912ab20d9a86a19627f3634a3a2f3d">dr_syscall_get_param()</a></li>
<li><a class="el" href="dr__tools_8h.html#a2ba5b83fedf0082d4170c3caaf2224a9">dr_syscall_set_param()</a></li>
<li><a class="el" href="dr__tools_8h.html#ae66c42a269f48b13ed57609029e5202b">dr_syscall_set_sysnum()</a></li>
<li><a class="el" href="dr__tools_8h.html#a16f09772f0185557445cb46647268fa8">dr_syscall_get_result()</a></li>
<li><a class="el" href="dr__tools_8h.html#a2d20c65a63ebb1a2081b3152d9d4647d">dr_syscall_set_result()</a></li>
<li><a class="el" href="dr__tools_8h.html#aedb494e753b1a2f0e79cb4bd09700c3c">dr_syscall_invoke_another()</a></li>
<li><a class="el" href="dr__os__utils_8h.html#a2aa6f4436d293356dccc59c8d5e8df08">dr_is_wow64()</a></li>
</ul>
</li>
<li>New signal event for Linux<ul>
<li><a class="el" href="dr__events_8h.html#a8f0c200ef1c92ac8bf43b1a62968838a">dr_register_signal_event()</a></li>
</ul>
</li>
<li>New option "-pause_on_error", and error messages to stdout by default for release builds, to improve Linux debugging</li>
<li>New routines for memory allocation and memory manipulation:<ul>
<li><a class="el" href="dr__tools_8h.html#a917384359d5efd538976402ff4b08aae">dr_nonheap_alloc()</a></li>
<li><a class="el" href="dr__tools_8h.html#a901a89de3fa6af0b48351ddea31ece81">dr_nonheap_free()</a></li>
<li><a class="el" href="dr__os__utils_8h.html#ae01c2ac2f3df4c23f2131ed2c367ac9b">dr_memory_protect()</a></li>
</ul>
</li>
<li>New option <a class="el" href="page_deploy.html#op_syntax_intel">-syntax_intel</a> for Intel-style disassembly</li>
<li>New option <a class="el" href="page_deploy.html#op_sysenter">-sysenter_is_int80</a></li>
<li>The parameter to an application's system call (normally kept in the eax register) can now be freely changed in basic blocks on all platforms</li>
<li>Added support for 64-bit -thread_private</li>
<li>Added corner-case undocumented IA-32 opcode support</li>
<li>Fixed bug running multi-threaded 64-bit Linux apps</li>
<li>Fixed bugs in 64-bit Linux signal handling</li>
<li>Fixed bug running -thread_private debug build</li>
<li>Fixed bug running 32-bit apps on 64-bit Linux on AMD processors</li>
<li>Fixed bug where OS_OPEN_APPEND overwrote instead of appending on Windows</li>
</ul>
<hr  />
<p> The changes between the 0.9.6 release builds 9602 and 9601 are:</p>
<ul>
<li>Performance improvements for both the base DynamoRIO system and for client instrumentation when running on Pentium M, Core, and Core 2 processors.</li>
<li>64-bit bug fixes</li>
<li>Added several convenience routines:<ul>
<li><a class="el" href="dr__ir__opnd_8h.html#ae7d69fd8ec339e602176b9c42af95ae4">get_register_name()</a></li>
<li><a class="el" href="dr__ir__opnd_8h.html#adffee4280821c8a1074aa1ccc13e467b">reg_to_pointer_sized()</a></li>
<li><a class="el" href="dr__ir__opnd_8h.html#a3db6f4c111a8e0e911c3963cb4e6fe22">reg_is_gpr()</a></li>
<li><a class="el" href="dr__ir__opnd_8h.html#ab656b6dc3c17daf506d7a4ed1bc48750">reg_is_segment()</a></li>
<li><a class="el" href="dr__ir__opnd_8h.html#a7fc60bb99a84adffde75ee18242bf27c">reg_32_to_8()</a></li>
</ul>
</li>
<li>Disassembly now expands immed sizes to match operands</li>
<li>Fixed bug in <a class="el" href="dr__ir__instr_8h.html#a6799fe42380933b83bb0c04f9d7b16d4">instr_is_nop()</a></li>
</ul>
<hr  />
<p> The changes between the 0.9.6 release builds 9601 and 9600 are:</p>
<ul>
<li>The Windows registry key used is now "VMware, Inc." instead of "VMware"</li>
<li>Added large file support (see <a class="el" href="dr__tools_8h.html#a77a3b276c8d9a62bf6d78c3707d4effd">DR_FILE_ALLOW_LARGE</a>)</li>
<li>Added support for decoding from a copy of code: <a class="el" href="dr__ir__decode_8h.html#abf858ce8d17c1221ea6121f1bb437348">decode_from_copy()</a> and <a class="el" href="dr__ir__disassemble_8h.html#a0d650d53ee0c47b24b74703bb62a2c87">disassemble_from_copy()</a>.</li>
<li>Changed the default options to favor performance, and added the <a class="el" href="page_deploy.html#op_memory">-opt_memory</a> runtime option to prioritize memory instead.</li>
</ul>
<p>Release 0.9.6 is <b>not</b> backward compatible with prior releases 0.9.1-0.9.5.</p>
<p>The major changes between the 0.9.6 and 0.9.5 releases include 64-bit support, multiple clients, state translation, trace contents, and Linux module events and fast system calls:</p>
<ul>
<li>64-bit applications and clients are now supported. This changed several function signatures:<ul>
<li><a class="el" href="dr__ir__encode_8h.html#a3d194e7ce235e330a28686db29ee5480">instr_encode()</a></li>
<li><a class="el" href="dr__ir__decode_8h.html#ab6f165443f3c713182124b81656aca21">decode_next_pc()</a></li>
<li><a class="el" href="dr__ir__decode_8h.html#af4a2c830c95757037eaa1a192a22aa3a">decode_sizeof()</a></li>
<li><a class="el" href="dr__ir__decode_8h.html#a0edc97a70f3135637f5091893a19f88c">decode_eflags_usage()</a></li>
<li><a class="el" href="dr__ir__instr_8h.html#af7e998e183e87480e7fd82240ff6633d">instr_init()</a></li>
<li>The binary trace dump format changed.</li>
</ul>
Several new functions were added:<ul>
<li><a class="el" href="dr__ir__decode_8h.html#a9aabb6bc27f7d35408028943b298be05">set_x86_mode()</a></li>
<li><a class="el" href="dr__ir__decode_8h.html#a92c5700e9e1ad5bd7fa6be0b02e3dc51">get_x86_mode()</a></li>
<li><a class="el" href="dr__ir__instr_8h.html#ab25aa22469a9dc2b448585aa82e7d359">instr_set_x86_mode()</a></li>
<li><a class="el" href="dr__ir__instr_8h.html#abea26973f1b5fd2a7b2ca8c0d7df19da">instr_get_x86_mode()</a></li>
<li><a class="el" href="dr__ir__opnd_8h.html#a6d1d3033c01b8dc8cadc3dd84e8b983e">opnd_create_rel_addr()</a></li>
<li><a class="el" href="dr__ir__opnd_8h.html#ac2c11ea109efa89d132acd0e02d8d649">opnd_create_far_rel_addr()</a></li>
<li><a class="el" href="dr__ir__opnd_8h.html#af451897a176423eb75db2d607e9db7b3">opnd_is_rel_addr()</a></li>
<li><a class="el" href="dr__ir__opnd_8h.html#aa657f37af66b7b2db4232d1ce7ef5e70">opnd_is_near_rel_addr()</a></li>
<li><a class="el" href="dr__ir__opnd_8h.html#acf57b9981f60e8002d9e1bbfffb4d14f">opnd_is_far_rel_addr()</a></li>
<li><a class="el" href="dr__ir__instr_8h.html#a92312678a9d109cc8f819fc326a0e08b">instr_has_rel_addr_reference()</a></li>
<li><a class="el" href="dr__ir__instr_8h.html#a4fb5c99a40539bfd075f4c7b36d0bfad">instr_get_rel_addr_target()</a></li>
<li><a class="el" href="dr__ir__instr_8h.html#a416e2f2f363eb563385371d02356eedc">instr_get_rel_addr_dst_idx()</a></li>
<li><a class="el" href="dr__ir__instr_8h.html#a2e199cd53805f34e75c506a364005d95">instr_get_rel_addr_src_idx()</a></li>
<li><a class="el" href="dr__ir__instr_8h.html#a9a324bfca6929954eacc80dfc67086c9">instr_shrink_to_32_bits()</a></li>
<li><a class="el" href="dr__ir__opnd_8h.html#a6ebc4b51257e5fedb5af5a75e4324856">opnd_shrink_to_32_bits()</a></li>
<li><a class="el" href="dr__ir__opnd_8h.html#a703db690f8b8d236bea6b991fb2ae033">reg_32_to_64()</a></li>
<li><a class="el" href="dr__ir__opnd_8h.html#a53f4a14c6a28ff32b2cc9926620666fc">reg_64_to_32()</a></li>
<li><a class="el" href="dr__ir__opnd_8h.html#a3d184213410a0e31c4b3895fb7d4708f">reg_is_extended()</a></li>
<li><a class="el" href="dr__ir__opnd_8h.html#a29225d12474f45215aece002d6dc19e5">reg_parameter_num()</a></li>
</ul>
To build a 64-bit client, set the <code>X86_64</code> preprocessor define before including the DynamoRIO header files, and link with the 64-bit build of DynamoRIO (for a 32-bit client, set <code>X86_32</code>).</li>
<li>Multiple clients are now supported. This changed the signatures of <a class="el" href="dr__api_8h.html#a819eb581527829240bf227d5a8f98e4c">dr_init()</a>, <a class="el" href="dr__tools_8h.html#affc4a7a38a1fa1fe45c1a15e01a98e78">dr_get_options()</a>, and <a class="el" href="dr__tools_8h.html#afccb9210ada84de4fbbaa8d851952a37">dr_get_client_path()</a>. It also changed how clients are deployed and nudged, and how events are unregistered: explicit unregistration routines are now used.</li>
<li>State translation in the presence of clients is now fully supported. This changed the signature for the basic block and trace event callbacks (see <a class="el" href="dr__events_8h.html#acbfe1ece2c520d409ffd59076507a710">dr_register_bb_event()</a> and <a class="el" href="dr__events_8h.html#ad47842a864b5d406e56d6ceddbab47ac">dr_register_trace_event()</a>), added a new event <a class="el" href="dr__events_8h.html#a46dc6ae264b5b293e889cc88ea808eab">dr_register_restore_state_event()</a>, and added new functions <a class="el" href="dr__ir__instr_8h.html#a463d5a15e50d1578dce60bc44343eb1a">instr_set_translation()</a>, <a class="el" href="dr__ir__instr_8h.html#a04e35cc0bbf8939a7a35469b7561c41e">instr_set_meta_no_translation()</a>, and <a class="el" href="dr__ir__macros_8h.html#ad21fbdff8a5631b3e31b8221180a2a9c">INSTR_XL8()</a>.</li>
<li>The trace callback (<a class="el" href="dr__events_8h.html#ad47842a864b5d406e56d6ceddbab47ac">dr_register_trace_event()</a>) now presents original application code to the client, rather than code that has already been modified for execution in the code cache. The client also has flexibility in which instrumentation is included from constituent basic blocks added to a trace (the <code>for_trace</code> parameter: see <a class="el" href="dr__events_8h.html#acbfe1ece2c520d409ffd59076507a710">dr_register_bb_event()</a>).</li>
<li>Fast system calls (syscall and sysenter) are now supported on Linux.</li>
<li>Module load/unload events and module iteration are now supported on Linux.</li>
<li>System calls for 32-bit applications on 64-bit kernels are no longer hidden by vsyscall; related functions were removed: instr_is_lol64_syscall(), instr_is_32on64_syscall().</li>
<li>Due to both 64-bit support and full WOW64 (32-bit applications on 64-bit Windows) support, xmm registers were added to dr_mcontext_t, and a new function <a class="el" href="dr__ir__utils_8h.html#a70dc8c6ccbd73b540991c5da347e65b2">dr_mcontext_xmm_fields_valid()</a> was added.</li>
<li>Far instr-type operands are now supported: <a class="el" href="dr__ir__opnd_8h.html#ad273f17af777859ff4f0a898063c4bdf">opnd_create_far_instr()</a>, <a class="el" href="dr__ir__opnd_8h.html#ae31d323a3e8c81d8d69199bb9ea0a5e7">opnd_is_near_instr()</a>, <a class="el" href="dr__ir__opnd_8h.html#a130d8e3d237402a24c4ad2604cf15f1b">opnd_is_far_instr()</a>.</li>
<li>Miscellaneous new functions were added:<ul>
<li><a class="el" href="dr__ir__instr_8h.html#a58c247518c78f0c544028b062ed8c4c6">instr_convert_short_meta_jmp_to_long()</a></li>
<li><a class="el" href="dr__ir__instr_8h.html#a8ac27a42689e221c9a77214f6aba3c4d">instr_reads_from_reg()</a></li>
<li><a class="el" href="dr__ir__macros__x86_8h.html#a8104e895719c1f3a8558067b023cf9c5">LOCK()</a></li>
<li><a class="el" href="dr__ir__macros_8h.html#a39cadf7c35d28a1dedf9b945cf1aa656">OPND_CREATE_INT_32OR8()</a></li>
<li><a class="el" href="dr__ir__macros_8h.html#a4cb280d756b701b7b2379045b51b0d5a">OPND_CREATE_INT_16OR8()</a></li>
<li><a class="el" href="dr__ir__utils_8h.html#a376024b7b2d33e3a86ec3544b80f645c">instrlist_meta_append()</a></li>
<li><a class="el" href="dr__tools_8h.html#a684c0fc332a5e5aa11c28ad3d1a6ef57">dr_using_all_private_caches()</a></li>
</ul>
</li>
<li>The type of nudge arguments was changed from (void *) to uint64.</li>
<li>The signature of <a class="el" href="dr__modules_8h.html#ac258fe445fb4fbddf62dd38ecb3b2e32">dr_lookup_module()</a> changed. It no longer has an IMAGE_SECTION_HEADER out argument. See <a class="el" href="dr__modules_8h.html#aca9e22e479d790db91a42d890b1b6312">dr_lookup_module_section()</a> for that functionality.</li>
<li>The disassemble-from-address routines now return NULL when pointed at invalid instructions (matching the decode routines).</li>
<li>The routines to access DynamoRIO tls slots from the cache were changed. dr_insert_write_temp_tls was eliminated in favor of a generalized <a class="el" href="dr__ir__utils_8h.html#ae8479716f08bbbb36d7fd27cfbbc0743">dr_save_reg</a> with more flexibility on which slot can be used. <a class="el" href="dr__ir__utils_8h.html#abd9f556b8175c4ac72d8e7df8295f121">dr_save_arith_flags</a> was similarly generalized. Slots are now guaranteed to remain valid until the next non-meta instruction allowing access to saved registers during clean calls via <a class="el" href="dr__ir__utils_8h.html#a6fdc15ea04e8d17fa537832acf274d9c">dr_read_saved_reg</a> and <a class="el" href="dr__ir__utils_8h.html#a178b4afb7bc059afbb92e9bee3572ca0">dr_write_saved_reg</a>. <a class="el" href="dr__ir__utils_8h.html#ac50b49843cf02a5b5f91fc6b5264cc7c">dr_insert_mbr_instrumentation</a> also now requires caller to specify the spill slot to be clobbered which must be less than <a class="el" href="dr__ir__utils_8h.html#affefddf9b8411ac527cba16269ab80e6">dr_max_opnd_accessible_spill_slot()</a>.</li>
</ul>
<hr  />
<p> The major changes between the 0.9.5 and 0.9.4 releases are:</p>
<ul>
<li>The basic block hook (<a class="el" href="API_BT.html#sec_events_bb">Basic Block Creation</a>) passes completely unmodified application code to the client (no mangling or elision).</li>
<li>The old client hook exports have been replaced with an explicit event registration model.</li>
<li>Instruction representation simplification: the client only sees fully decoded instructions.</li>
<li>Easier-to-use clean calls (see <a class="el" href="dr__ir__utils_8h.html#a1df44dbe3d8dbf82e63e96741f167c64">dr_insert_clean_call</a>).</li>
<li>Library support (-wrap on linux, ntdll on windows: see <a class="el" href="using.html#sec_extlibs">Using External Libraries</a> and <a class="el" href="using.html#sec_utils">Common Utilities</a>).</li>
<li>Some features have been removed (these are easily implemented by a client): there is no more edge-counting profile build, no more custom exit stubs, and no more prefixes.</li>
<li>Infrastructure improvements:<ul>
<li>Thread-shared caches (can still request thread-private: <a class="el" href="page_deploy.html#op_thread_priv">-thread_private option</a>). Note that there are some subtle changes stemming from using thread-shared: in particular, note that the context passed to the deletion event may be NULL (see <a class="el" href="dr__events_8h.html#a94ddb3474f89f5fb63b726ac9edaf08e">dr_register_delete_event</a>).</li>
<li>Direct access to TLS slots (<a class="el" href="dr__ir__utils_8h.html#ae8479716f08bbbb36d7fd27cfbbc0743">dr_save_reg</a>, dr_insert_write_temp_tls, <a class="el" href="dr__ir__utils_8h.html#a06b5104ef0d55577cee0f66bd9a0051f">dr_insert_write_tls_field</a>).</li>
</ul>
</li>
<li>Module events (<a class="el" href="dr__events_8h.html#a004acbc467ec57cd62be8c49d57a6928">dr_register_module_load_event</a>), module iteration (<a class="el" href="dr__modules_8h.html#a5722f6e9954edbe6c7e9156c14f6d5b9">dr_module_iterator_start</a>, <a class="el" href="dr__modules_8h.html#ac258fe445fb4fbddf62dd38ecb3b2e32">dr_lookup_module</a>, etc.), and memory querying (<a class="el" href="dr__os__utils_8h.html#a82f81fc8e9e98890159586260d6f346f">dr_query_memory</a>, <a class="el" href="dr__os__utils_8h.html#a51f56e0bb6afba732c92cff9855287c0">dr_virtual_query</a>).</li>
<li>The full API is now documented in html and pdf for easy browsing.</li>
<li>Numerous type and routine name changes.</li>
</ul>
<p> 
<table width=100% bgcolor="#000000" cellspacing=0 cellpadding=2 border=0>
  <tr><td><table width=100% bgcolor="#0000C0" cellspacing=0 cellpadding=1 border=0>
  <tr><td><table width=100% bgcolor="#0000C0" cellspacing=0 cellpadding=1 border=0>
  <tr><td></td></tr></table></td></tr></table></td></tr></table>
 </p>
<h1><a class="anchor" id="sec_limits"></a>
Limitations</h1>
<h2><a class="anchor" id="sec_limit_clients"></a>
Client Limitations</h2>
<p>The most important limitation on a client is that it remain transparent. This is described fully in <a class="el" href="transparency.html">Client Transparency</a>. Here we summarize the key points to remain transparent:</p>
<ul>
<li>For full transparency, the client should be a self-contained library with linkage to nothing other than DynamoRIO libraries. We provide private loading that makes some use of system libraries safe, but global resource conflicts can still occur and clients are cautioned from using system-interacting library routines. See <a class="el" href="using.html#sec_extlibs">Using External Libraries</a> for further details.</li>
<li>Currently, the communication API provided by DynamoRIO is limited to file I/O and nudges.</li>
</ul>
<h2><a class="anchor" id="sec_limit_platforms"></a>
Platform Limitations</h2>
<ul>
<li>This version of DynamoRIO supports Windows 8, 8.1, and 10. However, systemwide injection (-syswide_on) is not yet supported on Windows 8 or higher except for WOW64 (i.e., 32-bit applications on a 64-bit kernel).</li>
<li>DynamoRIO currently supports the following NT-based 32-bit Windows systems: XP (32-bit, service packs 0-3), 2003 (32-bit, service packs 0-2), Vista (32-bit, service packs 0-1), Windows 7 (32-bit, service packs 0-1), Windows 8, Windows 8.1, and Windows 10. It does not support Windows 95, 98, or ME. It no longer officially supports NT (all service packs) or 2000 (all service packs), although the core DynamoRIO library should still work there: it is only the tools and utility programs that will fail to run. Windows Server 2008 is expected to work but has not been tested.</li>
<li>This release of DynamoRIO supports running 32-bit Windows applications on the following 64-bit Windows operating systems: Windows XP Professional x64 (service pack 2), Windows 2003 x64 (service pack 2), Vista x64 (service packs 0-1), Windows 7 (service packs 0-1), Windows Server 2008, Windows 8, Windows 8.1, and Windows 10. Only the 32-bit code will be seen, and child processes created will not be injected into. On 64-bit Windows 32-bit applications are automatically run through the Windows-On-Windows or WOW64 emulator so system call and indirect call processing clients must be aware of <a class="el" href="dr__ir__instr_8h.html#a5d192fb176f46406fb2a356f6886a884">instr_is_wow64_syscall()</a>.</li>
<li>On all versions of Windows, attaching DynamoRIO to an already-running process can result in loss of control if the attach point is in the middle of an operating system event callback. From the callback return point until the next system call hook, no instructions will be observed by a client. <a class="anchor" id="limits_64bit"></a></li>
<li>This release of DynamoRIO supports running 64-bit Windows applications, using the 64-bit DynamoRIO build, on the following 64-bit Windows systems: Windows XP Professional x64 (service pack 2), Windows 2003 x64 (service pack 2), Vista x64 (service packs 0-1), Windows 7 x64 (service packs 0-1), Windows 8, Windows 8.1, and Windows 10. Windows Server 2008 is expected to work but has not been tested.</li>
<li>DynamoRIO does not support any Itanium based Windows systems.</li>
<li>This release does not fully support applications that mix 32-bit and 64-bit code. Future releases will support such mixtures.</li>
<li>When running a cygwin application under control of DynamoRIO, stderr and stdout output from DynamoRIO or its clients may not be visible.</li>
<li>UTF-8 support is not yet present in drinjectlib, drconfiglib, drrun.exe, drconfig.exe, or drinject.exe. It is present in the core DR API.</li>
<li>This release of DynamoRIO has support for most 32-bit and 64-bit Linux distributions running on Intel-compatible hardware, including Ubuntu and Fedora.</li>
<li>This release of DynamoRIO has support for running 32-bit Linux applications on 64-bit Linux operating systems on AMD64-compatible hardware.</li>
<li>Cross-architecture execve (e.g., a 32-bit process performing execve of a 64-bit executable) may stop working if the paths to the libdynamorio.so and libdrpreload.so libraries are renamed.</li>
<li>This release of DynamoRIO supports 32-bit applications running on 32-bit Linux operating systems on AArch32 ARMv7 and ARMv8 hardware. However, a few features are not yet ported: traces, clean call inlining and other optimizations, and several samples.</li>
<li>This release of DynamoRIO has experimental support for 32-bit Android applications running on AArch32 ARMv7 and ARMv8 hardware. However, a few features are not yet ported: traces, clean call inlining and other optimizations, and several samples.</li>
<li>This release of DynamoRIO has experimental support for 64-bit applications running on 64-bit Linux operating systems on AArch64 ARMv8 hardware. However, floating-point and SIMD instruction operands are not fully decoded or encoded yet, and a few features are not yet ported: traces, clean call inlining and other optimizations, and several samples and provided tools.</li>
<li>This release of DynamoRIO includes support for applications using the Linux kernel restartable sequence ("rseq") feature, subject to the limitations listed in <a class="el" href="API_BT.html#sec_rseq">Restartable Sequence Instrumentation Constraints</a>.</li>
</ul>
<h2><a class="anchor" id="sec_limit_perf"></a>
Performance Limitations</h2>
<ul>
<li>In order to present a more straightforward code stream to clients, DynamoRIO has several optimizations disabled in this release. System-call-heavy applications are the ones most likely to be affected. Future releases may allow clients to choose performance versus visibility. This release does provide the <a class="el" href="page_deploy.html#op_memory">-opt_memory option</a> to enable prioritizing memory usage and the <a class="el" href="page_deploy.html#op_speed">-opt_speed option</a> to prioritize performance at the cost of more complex basic blocks that cross control transfers.</li>
<li>The performance when starting up large desktop applications may be noticeably worse than native. Upcoming releases will address this issue.</li>
<li>The performance when running Java, .Net, Flash or similar managed execution applications can be noticeably worse then native. This can include applications that load these components as in-process plugins (such as Internet Explorer). Upcoming releases will address this issue.</li>
<li>When using DynamoRIO on all or many processes on a system simultaneously, memory usage may become a factor. Upcoming releases will address this issue.</li>
</ul>
<h2><a class="anchor" id="sec_limit_deploy"></a>
Deployment Limitations</h2>
<ul>
<li>The dr_config.lib library is not multi-thread safe. Users of the library should ensure that no more then one thread accesses the library at a time.</li>
<li>Other installed software that uses hooks may not always be interoperable with DynamoRIO.</li>
<li>Other installed software may conflict with DynamoRIO's use of the <code>\HKLM\SOFTWARE\Microsoft\Windows\WindowsNT\CurrentVersion\AppInit_DLLs</code> registry key (only very rarely an issue), which is used for the -syswide_on feature.</li>
<li>On Windows, the Enhanced Mitigation Experience Toolkit (EMET) may prevent applications from running under DynamoRIO (<a href="https://github.com/dynamorio/dynamorio/issues/1546">issue 1546</a>). Please disable EMET for the application if necessary.</li>
<li>On Windows 7 and Windows Server 2008 R2, the digital signature requirement for AppInit_DLLs libraries is disabled when systemwide injection is requested (-syswide_on). This can be a security concern.</li>
<li>On Windows 8 or 8.1, system wide injection (-syswide_on) is not yet supported.</li>
<li>Cygwin processes may not work with DynamoRIO due to cygwin's implementation of fork being incompatible with DynamoRIO.</li>
<li>A Windows application that does not statically link with user32.dll will not be run under control of DynamoRIO using system-wide injection unless its parent process (typically cmd.exe or explorer.exe, for manually launched applications) is already under DynamoRIO control. Only some small non-graphical applications do not link with user32.dll.</li>
<li>When invoking an application in any way that is not from a parent process under DynamoRIO control, DynamoRIO takes control a little later and in some rare cases the application has already created a new thread. This is in violation of the Windows specficiations, but cygwin processes do this. This new thread will not be under DynamoRIO control and can cause a variety of problems. In such cases it is best to invoke from a parent process under DynamoRIO control. However, for 32-bit applications on 64-bit Windows operating systems, DynamoRIO takes over later even from the parent. Future releases will address this limitation.</li>
<li>This release does not support running some Windows services under control of DynamoRIO: the "System" process, smss.exe, csrss.exe, and protected processes on Windows Vista.</li>
</ul>
<p><a class="anchor" id="limits_vista_service_messagebox"></a></p><ul>
<li>On Windows Vista most services are run in a separate session as a security feature. This means that neither DynamoRIO nor its client will be able to display a messagebox when running in said services (they have no associated visible window station). See <a class="el" href="dr__tools_8h.html#ae52f61049269c0531b66b8c41c69e09e">dr_messagebox()</a>.</li>
<li>On Windows Vista the code from certain dlls (found mostly in services) and the code subsequently called from those dlls is run natively and is not visible to the instrumentation APIs. This only applies to dlls that have a .pexe section (only 13 dlls have such a section in a standard Vista install) which seems to be associated with a likely obfuscation method involving kernel side components that this release has no other workaround for. <a class="anchor" id="limits_linux_preload"></a></li>
<li>On Linux, non-default late injection (requested via <code>-late</code> to drrun) is unable to run binaries with the suid or sgid permission bits set. Default injection is capable of executing these binaries, but if late injection is desired, one method of running these binaries is to place both libdrpreload.so and libdynamorio's full paths in /etc/ld.so.preload. You'll need to use a <a class="el" href="page_deploy.html#lin_deploy">separate configure step approach</a>. Don't forget to run drconfig to create a configuration for the application first; otherwise, libdrpreload.so will refuse to take control. This method of injection takes control part-way through initialization of the target application, rather than at the very beginning. Alternatively, you could run as root, or remove the suid and sgid bits: however, both of those solutions may open up security holes and are not recommended. If the suid or sgid binary is a leaf child process of the parent target application, another option is to run the problematic child process natively by either creating a configuration file for the child with the "-norun" parameter or running with the <a class="el" href="page_deploy.html#op_children">-no_follow_children</a> runtime option.</li>
<li>On Linux, the private loader will fail to load libpthread.so. Therefore clients and the libraries they use cannot link against libpthread.so.</li>
</ul>
<p> 
<table width=100% bgcolor="#000000" cellspacing=0 cellpadding=2 border=0>
  <tr><td><table width=100% bgcolor="#0000C0" cellspacing=0 cellpadding=1 border=0>
  <tr><td><table width=100% bgcolor="#0000C0" cellspacing=0 cellpadding=1 border=0>
  <tr><td></td></tr></table></td></tr></table></td></tr></table>
 </p>
<h1><a class="anchor" id="sec_future"></a>
Plans for Future Releases</h1>
<p>We hope to include the following major features in future releases:</p>
<ul>
<li>Libraries to facilitate building tools that use shadow memory, examine system calls, and insert heavyweight instrumentation.</li>
<li>Earliest Windows injection. Today drinject injects fairly late; from a parent process, injection is very early (before kernel32.dll is loaded), but we plan to provide injection at the very first user-mode instruction in the future.</li>
<li>Linux externally-triggered attaching.</li>
<li>Persistent and process-shared code caches.</li>
<li>Full control over trace building.</li>
</ul>
<p>To discuss current and future features, join the <a href="http://groups.google.com/group/dynamorio-users/">DynamoRIO Users group</a>. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.8.17-->
<!-- start footer part -->
<!--BEGIN GENERATE_TREEVIEW-->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer" style="float:none;text-align:center"><img border=0 src="favicon.png"> &nbsp;  DynamoRIO version 9.0.1 --- Mon Feb 14 2022 19:02:58 &nbsp; <img border=0 src="favicon.png">
</small></address>
