---
title: "/include/dr_os_utils.h File Reference"
layout: default
permalink: /dr__os__utils_8h.html
---
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DynamoRIO
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_43e0a1f539e00dcfa1a6bc4d4fee4fc2.html">home</a></li><li class="navelem"><a class="el" href="dir_1036706e55c22cab35bc1c58ee689f1d.html">runner</a></li><li class="navelem"><a class="el" href="dir_629f8151d55d307162ff2d619fb1783d.html">work</a></li><li class="navelem"><a class="el" href="dir_84b917e355554dd3f3793c21ab4ddcaf.html">dynamorio</a></li><li class="navelem"><a class="el" href="dir_afee7b8fe0b60d0be677a736c14882ae.html">dynamorio</a></li><li class="navelem"><a class="el" href="dir_489b6e853deb4fa1d1f97a1bc0ffc492.html">build_release-64</a></li><li class="navelem"><a class="el" href="dir_7d0abe6c542863e2b7fbc044a2f4f0d7.html">include</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">dr_os_utils.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Operating-system-specific querying routines.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct__dr__app__arg__t.html">_dr_app_arg_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct__dr__os__version__info__t.html">_dr_os_version_info_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct__dr__mem__info__t.html">_dr_mem_info_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ac2c501052e751bc9c72c622b1ca8b96c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__os__utils_8h.html#ac2c501052e751bc9c72c622b1ca8b96c">DR_MEMPROT_NONE</a>&#160;&#160;&#160;0x00</td></tr>
<tr class="separator:ac2c501052e751bc9c72c622b1ca8b96c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab430d92dd0d6338ec3e42b527ae91efb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__os__utils_8h.html#ab430d92dd0d6338ec3e42b527ae91efb">DR_MEMPROT_READ</a>&#160;&#160;&#160;0x01</td></tr>
<tr class="separator:ab430d92dd0d6338ec3e42b527ae91efb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1dafb99a4933112c603189bc091fa752"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__os__utils_8h.html#a1dafb99a4933112c603189bc091fa752">DR_MEMPROT_WRITE</a>&#160;&#160;&#160;0x02</td></tr>
<tr class="separator:a1dafb99a4933112c603189bc091fa752"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad98be75b6fde3dc1dbfb8bfda59fce66"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__os__utils_8h.html#ad98be75b6fde3dc1dbfb8bfda59fce66">DR_MEMPROT_EXEC</a>&#160;&#160;&#160;0x04</td></tr>
<tr class="separator:ad98be75b6fde3dc1dbfb8bfda59fce66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8bb4e765c888211477c17e73abf992f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__os__utils_8h.html#af8bb4e765c888211477c17e73abf992f">DR_MEMPROT_GUARD</a>&#160;&#160;&#160;0x08</td></tr>
<tr class="separator:af8bb4e765c888211477c17e73abf992f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0dcb0f62864c67d1aa74381035b5bbfe"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__os__utils_8h.html#a0dcb0f62864c67d1aa74381035b5bbfe">DR_MEMPROT_PRETEND_WRITE</a>&#160;&#160;&#160;0x10</td></tr>
<tr class="separator:a0dcb0f62864c67d1aa74381035b5bbfe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9c33a04e71ed6d6ec41e26013a005fd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__os__utils_8h.html#ac9c33a04e71ed6d6ec41e26013a005fd">DR_MEMPROT_VDSO</a>&#160;&#160;&#160;0x20</td></tr>
<tr class="separator:ac9c33a04e71ed6d6ec41e26013a005fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d467c1d283fdfa1f2081ba1e0d01b6e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__os__utils_8h.html#a7d467c1d283fdfa1f2081ba1e0d01b6e">PAGE_SIZE</a>&#160;&#160;&#160;<a class="el" href="dr__os__utils_8h.html#a71d692536f7dfe8f3ae7b53597c50aca">dr_page_size</a>()</td></tr>
<tr class="separator:a7d467c1d283fdfa1f2081ba1e0d01b6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adef0efe8b0b596d8f85a144c2f2c2c3a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__os__utils_8h.html#adef0efe8b0b596d8f85a144c2f2c2c3a">PAGE_START</a>(x)&#160;&#160;&#160;(((ptr_uint_t)(x)) &amp; ~(<a class="el" href="dr__os__utils_8h.html#a71d692536f7dfe8f3ae7b53597c50aca">dr_page_size</a>() - 1))</td></tr>
<tr class="separator:adef0efe8b0b596d8f85a144c2f2c2c3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb9ba447c606e5e58400ac7b6ef719d1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__os__utils_8h.html#adb9ba447c606e5e58400ac7b6ef719d1">DR_TRY_EXCEPT</a>(drcontext,  try_statement,  except_statement)</td></tr>
<tr class="separator:adb9ba447c606e5e58400ac7b6ef719d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:adfdd1e3337ce543e3031abb445aaacb1"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct__dr__app__arg__t.html">_dr_app_arg_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__os__utils_8h.html#adfdd1e3337ce543e3031abb445aaacb1">dr_app_arg_t</a></td></tr>
<tr class="separator:adfdd1e3337ce543e3031abb445aaacb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1074b84b2b9eb05337a431193789c9e2"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct__dr__os__version__info__t.html">_dr_os_version_info_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__os__utils_8h.html#a1074b84b2b9eb05337a431193789c9e2">dr_os_version_info_t</a></td></tr>
<tr class="separator:a1074b84b2b9eb05337a431193789c9e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4bb25312a86996379357f79a4c7c1c1"><td class="memItemLeft" align="right" valign="top">typedef void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__os__utils_8h.html#ad4bb25312a86996379357f79a4c7c1c1">dr_auxlib_handle_t</a></td></tr>
<tr class="separator:ad4bb25312a86996379357f79a4c7c1c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac429103cb983108880aee9b1377c430c"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__os__utils_8h.html#ac429103cb983108880aee9b1377c430c">dr_auxlib_routine_ptr_t</a>) ()</td></tr>
<tr class="separator:ac429103cb983108880aee9b1377c430c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24463a9c32e3efac726c6fc9e97a77d6"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct__dr__mem__info__t.html">_dr_mem_info_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__os__utils_8h.html#a24463a9c32e3efac726c6fc9e97a77d6">dr_mem_info_t</a></td></tr>
<tr class="separator:a24463a9c32e3efac726c6fc9e97a77d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ad051d9da5ddb2100eb450587e7551a70"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__os__utils_8h.html#ad051d9da5ddb2100eb450587e7551a70">dr_state_flags_t</a> { <br />
&#160;&#160;<a class="el" href="dr__os__utils_8h.html#ad051d9da5ddb2100eb450587e7551a70ade45f51ff07512196129df690c9351fc">DR_STATE_PEB</a> = 0x0001, 
<br />
&#160;&#160;<a class="el" href="dr__os__utils_8h.html#ad051d9da5ddb2100eb450587e7551a70a1e89b3980660dea49687e08fea96df09">DR_STATE_TEB_MISC</a> = 0x0002, 
<br />
&#160;&#160;<a class="el" href="dr__os__utils_8h.html#ad051d9da5ddb2100eb450587e7551a70a1075136763677e70239a776f8111b3c3">DR_STATE_STACK_BOUNDS</a> = 0x0004, 
<br />
&#160;&#160;<a class="el" href="dr__os__utils_8h.html#ad051d9da5ddb2100eb450587e7551a70a6f0f881ce02e1caf28ffbbc1246aa9a8">DR_STATE_ALL</a> = ~0
<br />
 }</td></tr>
<tr class="separator:ad051d9da5ddb2100eb450587e7551a70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89e2e3ce9a2265d4adeefdf951ac6a1a"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__os__utils_8h.html#a89e2e3ce9a2265d4adeefdf951ac6a1a">dr_app_arg_encoding_t</a> { <br />
&#160;&#160;<a class="el" href="dr__os__utils_8h.html#a89e2e3ce9a2265d4adeefdf951ac6a1aa94bfecd79ebb7757ecded397d930641d">DR_APP_ARG_CSTR_COMPAT</a>, 
<br />
&#160;&#160;<a class="el" href="dr__os__utils_8h.html#a89e2e3ce9a2265d4adeefdf951ac6a1aaffb34a6f011e02ae18333dd19faca830">DR_APP_ARG_UTF_16</a>
<br />
 }</td></tr>
<tr class="separator:a89e2e3ce9a2265d4adeefdf951ac6a1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a311ab26d3bdc2d6ff7830b6f3ae9760c"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__os__utils_8h.html#a311ab26d3bdc2d6ff7830b6f3ae9760c">dr_os_version_t</a> { <br />
&#160;&#160;<a class="el" href="dr__os__utils_8h.html#a311ab26d3bdc2d6ff7830b6f3ae9760ca438688fa3892c40ca47fb8b3c8ed2e89">DR_WINDOWS_VERSION_10_1803</a> = 105, 
<br />
&#160;&#160;<a class="el" href="dr__os__utils_8h.html#a311ab26d3bdc2d6ff7830b6f3ae9760caecd33f47bf0e37f538589fe46097bad5">DR_WINDOWS_VERSION_10_1709</a> = 104, 
<br />
&#160;&#160;<a class="el" href="dr__os__utils_8h.html#a311ab26d3bdc2d6ff7830b6f3ae9760ca2698c776a8acc3f599f342e45bf0b0fe">DR_WINDOWS_VERSION_10_1703</a> = 103, 
<br />
&#160;&#160;<a class="el" href="dr__os__utils_8h.html#a311ab26d3bdc2d6ff7830b6f3ae9760ca781e789a0171cf75fe5dedcfd9cb7f7c">DR_WINDOWS_VERSION_10_1607</a> = 102, 
<br />
&#160;&#160;<a class="el" href="dr__os__utils_8h.html#a311ab26d3bdc2d6ff7830b6f3ae9760ca2ce40ab4db406adf0613c77cc72112fd">DR_WINDOWS_VERSION_10_1511</a> = 101, 
<br />
&#160;&#160;<a class="el" href="dr__os__utils_8h.html#a311ab26d3bdc2d6ff7830b6f3ae9760ca7927b8c2058d3adf34e0e5c49474c979">DR_WINDOWS_VERSION_10</a> = 100, 
<br />
&#160;&#160;<a class="el" href="dr__os__utils_8h.html#a311ab26d3bdc2d6ff7830b6f3ae9760cacea85c24b6ec914a85dd58a39dde0d3e">DR_WINDOWS_VERSION_8_1</a> = 63, 
<br />
&#160;&#160;<a class="el" href="dr__os__utils_8h.html#a311ab26d3bdc2d6ff7830b6f3ae9760ca114432cbffadfec0fb011e9ef7ba8a87">DR_WINDOWS_VERSION_2012_R2</a> = DR_WINDOWS_VERSION_8_1, 
<br />
&#160;&#160;<a class="el" href="dr__os__utils_8h.html#a311ab26d3bdc2d6ff7830b6f3ae9760ca420fc7de0ba5c5b6dea013b4c2509ac0">DR_WINDOWS_VERSION_8</a> = 62, 
<br />
&#160;&#160;<a class="el" href="dr__os__utils_8h.html#a311ab26d3bdc2d6ff7830b6f3ae9760ca7c2a135c55d571883a94d9ff4e9da94f">DR_WINDOWS_VERSION_2012</a> = DR_WINDOWS_VERSION_8, 
<br />
&#160;&#160;<a class="el" href="dr__os__utils_8h.html#a311ab26d3bdc2d6ff7830b6f3ae9760ca8e8e36ac7efb1ad06cabb5f701306fde">DR_WINDOWS_VERSION_7</a> = 61, 
<br />
&#160;&#160;<a class="el" href="dr__os__utils_8h.html#a311ab26d3bdc2d6ff7830b6f3ae9760cae432c24e32ed3407f449f019d51d38ae">DR_WINDOWS_VERSION_2008_R2</a> = DR_WINDOWS_VERSION_7, 
<br />
&#160;&#160;<a class="el" href="dr__os__utils_8h.html#a311ab26d3bdc2d6ff7830b6f3ae9760cacb93ff69eabd6550b660012c55cacae1">DR_WINDOWS_VERSION_VISTA</a> = 60, 
<br />
&#160;&#160;<a class="el" href="dr__os__utils_8h.html#a311ab26d3bdc2d6ff7830b6f3ae9760ca252442772ce128b15408a140958c1c96">DR_WINDOWS_VERSION_2008</a> = DR_WINDOWS_VERSION_VISTA, 
<br />
&#160;&#160;<a class="el" href="dr__os__utils_8h.html#a311ab26d3bdc2d6ff7830b6f3ae9760caf960b684d92226cd35590c2804c8dfa6">DR_WINDOWS_VERSION_2003</a> = 52, 
<br />
&#160;&#160;<a class="el" href="dr__os__utils_8h.html#a311ab26d3bdc2d6ff7830b6f3ae9760ca4944bf33a5c3e637329fbdffe5051cee">DR_WINDOWS_VERSION_XP_X64</a> = DR_WINDOWS_VERSION_2003, 
<br />
&#160;&#160;<a class="el" href="dr__os__utils_8h.html#a311ab26d3bdc2d6ff7830b6f3ae9760ca3434e7522e1c3efc0fd898cf5f06c092">DR_WINDOWS_VERSION_XP</a> = 51, 
<br />
&#160;&#160;<a class="el" href="dr__os__utils_8h.html#a311ab26d3bdc2d6ff7830b6f3ae9760ca6364725219ede21bfbbf10d71fc844f0">DR_WINDOWS_VERSION_2000</a> = 50, 
<br />
&#160;&#160;<a class="el" href="dr__os__utils_8h.html#a311ab26d3bdc2d6ff7830b6f3ae9760caf3fa92ea36f47c6008fdbae9e78631b9">DR_WINDOWS_VERSION_NT</a> = 40
<br />
 }</td></tr>
<tr class="separator:a311ab26d3bdc2d6ff7830b6f3ae9760c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff97be516bbb1aecdb6bd043841aaa10"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__os__utils_8h.html#aff97be516bbb1aecdb6bd043841aaa10">dr_mem_type_t</a> { <br />
&#160;&#160;<a class="el" href="dr__os__utils_8h.html#aff97be516bbb1aecdb6bd043841aaa10a60e91c7b948d92d08b74ee0cd50dee3d">DR_MEMTYPE_FREE</a>, 
<br />
&#160;&#160;<a class="el" href="dr__os__utils_8h.html#aff97be516bbb1aecdb6bd043841aaa10a6edf083337f9c953747a2cf4461dcbf7">DR_MEMTYPE_IMAGE</a>, 
<br />
&#160;&#160;<a class="el" href="dr__os__utils_8h.html#aff97be516bbb1aecdb6bd043841aaa10ac0350de0d08726ea8a5a5f02bb7010b0">DR_MEMTYPE_DATA</a>, 
<br />
&#160;&#160;<a class="el" href="dr__os__utils_8h.html#aff97be516bbb1aecdb6bd043841aaa10aa23ff267355a0b49da1b77da5bcc4d29">DR_MEMTYPE_RESERVED</a>, 
<br />
&#160;&#160;<a class="el" href="dr__os__utils_8h.html#aff97be516bbb1aecdb6bd043841aaa10a990c1b40496fdfc22c89b67300c921ea">DR_MEMTYPE_ERROR</a>, 
<br />
&#160;&#160;<a class="el" href="dr__os__utils_8h.html#aff97be516bbb1aecdb6bd043841aaa10a4155a1d348b4dc103ef7d5cd1c6dc257">DR_MEMTYPE_ERROR_WINKERNEL</a>
<br />
 }</td></tr>
<tr class="separator:aff97be516bbb1aecdb6bd043841aaa10"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a166d041c41c9a313f56ecc1910feed9c"><td class="memItemLeft" align="right" valign="top">DR_API bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__os__utils_8h.html#a166d041c41c9a313f56ecc1910feed9c">dr_using_app_state</a> (void *drcontext)</td></tr>
<tr class="separator:a166d041c41c9a313f56ecc1910feed9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89abb45db2c1f35564c5fa6f6765f55f"><td class="memItemLeft" align="right" valign="top">DR_API void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__os__utils_8h.html#a89abb45db2c1f35564c5fa6f6765f55f">dr_switch_to_app_state</a> (void *drcontext)</td></tr>
<tr class="separator:a89abb45db2c1f35564c5fa6f6765f55f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4d9e164873e0bf191bfae8cc2c867f3"><td class="memItemLeft" align="right" valign="top">DR_API void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__os__utils_8h.html#ac4d9e164873e0bf191bfae8cc2c867f3">dr_switch_to_app_state_ex</a> (void *drcontext, <a class="el" href="dr__os__utils_8h.html#ad051d9da5ddb2100eb450587e7551a70">dr_state_flags_t</a> flags)</td></tr>
<tr class="separator:ac4d9e164873e0bf191bfae8cc2c867f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f08638719a695bcb95d101a03cfd8f3"><td class="memItemLeft" align="right" valign="top">DR_API void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__os__utils_8h.html#a3f08638719a695bcb95d101a03cfd8f3">dr_switch_to_dr_state</a> (void *drcontext)</td></tr>
<tr class="separator:a3f08638719a695bcb95d101a03cfd8f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b649488383757de1237c8caeb5f1c9b"><td class="memItemLeft" align="right" valign="top">DR_API void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__os__utils_8h.html#a8b649488383757de1237c8caeb5f1c9b">dr_switch_to_dr_state_ex</a> (void *drcontext, <a class="el" href="dr__os__utils_8h.html#ad051d9da5ddb2100eb450587e7551a70">dr_state_flags_t</a> flags)</td></tr>
<tr class="separator:a8b649488383757de1237c8caeb5f1c9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5af582761c71e103475166b24181bb4c"><td class="memItemLeft" align="right" valign="top">DR_API int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__os__utils_8h.html#a5af582761c71e103475166b24181bb4c">dr_get_app_args</a> (OUT <a class="el" href="dr__os__utils_8h.html#adfdd1e3337ce543e3031abb445aaacb1">dr_app_arg_t</a> *args_array, int args_count)</td></tr>
<tr class="separator:a5af582761c71e103475166b24181bb4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0f7565b305ddec7732dc8014e5cc152"><td class="memItemLeft" align="right" valign="top">DR_API int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__os__utils_8h.html#af0f7565b305ddec7732dc8014e5cc152">dr_num_app_args</a> (void)</td></tr>
<tr class="separator:af0f7565b305ddec7732dc8014e5cc152"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a4bcecff5d7b6cb97c8e381468ca99c"><td class="memItemLeft" align="right" valign="top">const DR_API char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__os__utils_8h.html#a5a4bcecff5d7b6cb97c8e381468ca99c">dr_app_arg_as_cstring</a> (IN <a class="el" href="dr__os__utils_8h.html#adfdd1e3337ce543e3031abb445aaacb1">dr_app_arg_t</a> *app_arg, char *buf, int buf_size)</td></tr>
<tr class="separator:a5a4bcecff5d7b6cb97c8e381468ca99c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef60db347b52f1344c23b63bcb020ff6"><td class="memItemLeft" align="right" valign="top">const DR_API char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__os__utils_8h.html#aef60db347b52f1344c23b63bcb020ff6">dr_get_application_name</a> (void)</td></tr>
<tr class="separator:aef60db347b52f1344c23b63bcb020ff6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af99715c7ad2497ad86f4769da0f19699"><td class="memItemLeft" align="right" valign="top">DR_API process_id_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__os__utils_8h.html#af99715c7ad2497ad86f4769da0f19699">dr_get_process_id</a> (void)</td></tr>
<tr class="separator:af99715c7ad2497ad86f4769da0f19699"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ecb37bc10ee3d174a9bf7737e5fd37d"><td class="memItemLeft" align="right" valign="top">DR_API process_id_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__os__utils_8h.html#a5ecb37bc10ee3d174a9bf7737e5fd37d">dr_get_process_id_from_drcontext</a> (void *drcontext)</td></tr>
<tr class="separator:a5ecb37bc10ee3d174a9bf7737e5fd37d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abaa5c24341c70a6ed925f73acb1da7e9"><td class="memItemLeft" align="right" valign="top">DR_API process_id_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__os__utils_8h.html#abaa5c24341c70a6ed925f73acb1da7e9">dr_get_parent_id</a> (void)</td></tr>
<tr class="separator:abaa5c24341c70a6ed925f73acb1da7e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c40e727eda07c4af602ec5bd49d21c3"><td class="memItemLeft" align="right" valign="top">DR_API bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__os__utils_8h.html#a6c40e727eda07c4af602ec5bd49d21c3">dr_get_os_version</a> (<a class="el" href="dr__os__utils_8h.html#a1074b84b2b9eb05337a431193789c9e2">dr_os_version_info_t</a> *info)</td></tr>
<tr class="separator:a6c40e727eda07c4af602ec5bd49d21c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2aa6f4436d293356dccc59c8d5e8df08"><td class="memItemLeft" align="right" valign="top">DR_API bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__os__utils_8h.html#a2aa6f4436d293356dccc59c8d5e8df08">dr_is_wow64</a> (void)</td></tr>
<tr class="separator:a2aa6f4436d293356dccc59c8d5e8df08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53e8fbee6d87378280e440c4c75e0635"><td class="memItemLeft" align="right" valign="top">DR_API void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__os__utils_8h.html#a53e8fbee6d87378280e440c4c75e0635">dr_get_app_PEB</a> (void)</td></tr>
<tr class="separator:a53e8fbee6d87378280e440c4c75e0635"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af71c6708c5b03e67687a40533a2e0f2d"><td class="memItemLeft" align="right" valign="top">DR_API process_id_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__os__utils_8h.html#af71c6708c5b03e67687a40533a2e0f2d">dr_convert_handle_to_pid</a> (HANDLE process_handle)</td></tr>
<tr class="separator:af71c6708c5b03e67687a40533a2e0f2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8eaacb8d6e7e0934088e74475c9e7b35"><td class="memItemLeft" align="right" valign="top">DR_API HANDLE&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__os__utils_8h.html#a8eaacb8d6e7e0934088e74475c9e7b35">dr_convert_pid_to_handle</a> (process_id_t pid)</td></tr>
<tr class="separator:a8eaacb8d6e7e0934088e74475c9e7b35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad63441e619a7b933e3198816cdc672c5"><td class="memItemLeft" align="right" valign="top">DR_API <a class="el" href="dr__os__utils_8h.html#ad4bb25312a86996379357f79a4c7c1c1">dr_auxlib_handle_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__os__utils_8h.html#ad63441e619a7b933e3198816cdc672c5">dr_load_aux_library</a> (const char *name, byte **lib_start, byte **lib_end)</td></tr>
<tr class="separator:ad63441e619a7b933e3198816cdc672c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2c609dbb7bc2e23a268946ccbaa622a"><td class="memItemLeft" align="right" valign="top">DR_API <a class="el" href="dr__os__utils_8h.html#ac429103cb983108880aee9b1377c430c">dr_auxlib_routine_ptr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__os__utils_8h.html#ab2c609dbb7bc2e23a268946ccbaa622a">dr_lookup_aux_library_routine</a> (<a class="el" href="dr__os__utils_8h.html#ad4bb25312a86996379357f79a4c7c1c1">dr_auxlib_handle_t</a> lib, const char *name)</td></tr>
<tr class="separator:ab2c609dbb7bc2e23a268946ccbaa622a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b8b8e8368257c45d6b5a973a963d19d"><td class="memItemLeft" align="right" valign="top">DR_API bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__os__utils_8h.html#a7b8b8e8368257c45d6b5a973a963d19d">dr_unload_aux_library</a> (<a class="el" href="dr__os__utils_8h.html#ad4bb25312a86996379357f79a4c7c1c1">dr_auxlib_handle_t</a> lib)</td></tr>
<tr class="separator:a7b8b8e8368257c45d6b5a973a963d19d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71d692536f7dfe8f3ae7b53597c50aca"><td class="memItemLeft" align="right" valign="top">DR_API size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__os__utils_8h.html#a71d692536f7dfe8f3ae7b53597c50aca">dr_page_size</a> (void)</td></tr>
<tr class="separator:a71d692536f7dfe8f3ae7b53597c50aca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a168a1ed2722d1c2565a1b7dafd7f71c6"><td class="memItemLeft" align="right" valign="top">DR_API bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__os__utils_8h.html#a168a1ed2722d1c2565a1b7dafd7f71c6">dr_memory_is_readable</a> (const byte *pc, size_t size)</td></tr>
<tr class="separator:a168a1ed2722d1c2565a1b7dafd7f71c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82f81fc8e9e98890159586260d6f346f"><td class="memItemLeft" align="right" valign="top">DR_API bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__os__utils_8h.html#a82f81fc8e9e98890159586260d6f346f">dr_query_memory</a> (const byte *pc, byte **base_pc, size_t *size, uint *prot)</td></tr>
<tr class="separator:a82f81fc8e9e98890159586260d6f346f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64bc438e6114c0e6137d65e4c9a8beb6"><td class="memItemLeft" align="right" valign="top">DR_API bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__os__utils_8h.html#a64bc438e6114c0e6137d65e4c9a8beb6">dr_query_memory_ex</a> (const byte *pc, OUT <a class="el" href="dr__os__utils_8h.html#a24463a9c32e3efac726c6fc9e97a77d6">dr_mem_info_t</a> *info)</td></tr>
<tr class="separator:a64bc438e6114c0e6137d65e4c9a8beb6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51f56e0bb6afba732c92cff9855287c0"><td class="memItemLeft" align="right" valign="top">DR_API size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__os__utils_8h.html#a51f56e0bb6afba732c92cff9855287c0">dr_virtual_query</a> (const byte *pc, MEMORY_BASIC_INFORMATION *mbi, size_t mbi_size)</td></tr>
<tr class="separator:a51f56e0bb6afba732c92cff9855287c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ceaf9328041825217ef55d2795cc177"><td class="memItemLeft" align="right" valign="top">DR_API bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__os__utils_8h.html#a7ceaf9328041825217ef55d2795cc177">dr_safe_read</a> (const void *base, size_t size, void *out_buf, size_t *bytes_read)</td></tr>
<tr class="separator:a7ceaf9328041825217ef55d2795cc177"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af188a647a8669c5ab49c135a7c5f05e4"><td class="memItemLeft" align="right" valign="top">DR_API bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__os__utils_8h.html#af188a647a8669c5ab49c135a7c5f05e4">dr_safe_write</a> (void *base, size_t size, const void *in_buf, size_t *bytes_written)</td></tr>
<tr class="separator:af188a647a8669c5ab49c135a7c5f05e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a759ede1d1db14ad09e6ea89f32de8a06"><td class="memItemLeft" align="right" valign="top">DR_API void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__os__utils_8h.html#a759ede1d1db14ad09e6ea89f32de8a06">dr_try_setup</a> (void *drcontext, void **try_cxt)</td></tr>
<tr class="separator:a759ede1d1db14ad09e6ea89f32de8a06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68016a87fcd13c583f5f201d07c0cf64"><td class="memItemLeft" align="right" valign="top">DR_API int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__os__utils_8h.html#a68016a87fcd13c583f5f201d07c0cf64">dr_try_start</a> (void *buf)</td></tr>
<tr class="separator:a68016a87fcd13c583f5f201d07c0cf64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a124b7d32263b641f8ff6db532874d802"><td class="memItemLeft" align="right" valign="top">DR_API void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__os__utils_8h.html#a124b7d32263b641f8ff6db532874d802">dr_try_stop</a> (void *drcontext, void *try_cxt)</td></tr>
<tr class="separator:a124b7d32263b641f8ff6db532874d802"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae01c2ac2f3df4c23f2131ed2c367ac9b"><td class="memItemLeft" align="right" valign="top">DR_API bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__os__utils_8h.html#ae01c2ac2f3df4c23f2131ed2c367ac9b">dr_memory_protect</a> (void *base, size_t size, uint new_prot)</td></tr>
<tr class="separator:ae01c2ac2f3df4c23f2131ed2c367ac9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a503f1faf758d1bda2618d4f9004be44a"><td class="memItemLeft" align="right" valign="top">DR_API bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__os__utils_8h.html#a503f1faf758d1bda2618d4f9004be44a">dr_memory_is_dr_internal</a> (const byte *pc)</td></tr>
<tr class="separator:a503f1faf758d1bda2618d4f9004be44a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9942f73414e24419ed66d28cefb06f1"><td class="memItemLeft" align="right" valign="top">DR_API bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dr__os__utils_8h.html#aa9942f73414e24419ed66d28cefb06f1">dr_memory_is_in_client</a> (const byte *pc)</td></tr>
<tr class="separator:aa9942f73414e24419ed66d28cefb06f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Operating-system-specific querying routines. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ad98be75b6fde3dc1dbfb8bfda59fce66"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad98be75b6fde3dc1dbfb8bfda59fce66">&#9670;&nbsp;</a></span>DR_MEMPROT_EXEC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DR_MEMPROT_EXEC&#160;&#160;&#160;0x04</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Execute privileges. </p>

</div>
</div>
<a id="af8bb4e765c888211477c17e73abf992f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8bb4e765c888211477c17e73abf992f">&#9670;&nbsp;</a></span>DR_MEMPROT_GUARD</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DR_MEMPROT_GUARD&#160;&#160;&#160;0x08</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Guard page (Windows only) </p>

</div>
</div>
<a id="ac2c501052e751bc9c72c622b1ca8b96c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2c501052e751bc9c72c622b1ca8b96c">&#9670;&nbsp;</a></span>DR_MEMPROT_NONE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DR_MEMPROT_NONE&#160;&#160;&#160;0x00</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>No read, write, or execute privileges. </p>

</div>
</div>
<a id="a0dcb0f62864c67d1aa74381035b5bbfe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0dcb0f62864c67d1aa74381035b5bbfe">&#9670;&nbsp;</a></span>DR_MEMPROT_PRETEND_WRITE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DR_MEMPROT_PRETEND_WRITE&#160;&#160;&#160;0x10</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>DR's default cache consistency strategy modifies the page protection of pages containing code, making them read-only. It pretends on application and client queries that the page is writable. On a write fault to such a region by the application or by client-added instrumentation, DR automatically handles the fault and makes the page writable. This requires flushing the code from the code cache, which can only be done safely when in an application context. Thus, a client writing to such a page is only supported when these criteria are met:</p>
<ol type="1">
<li>The client code must be in an application code cache context. This rules out all event callbacks (including the basic block event) except for the pre and post system call events and the nudge event.</li>
<li>The client must not hold any locks. An exception is a lock marked as an application lock (via <a class="el" href="dr__tools_8h.html#a8877efdba9869ab5b8b3b4169c9bc0ce">dr_mutex_mark_as_app()</a>, <a class="el" href="dr__tools_8h.html#a2c95bd55446ba4232ca591233200f275">dr_rwlock_mark_as_app()</a>, or <a class="el" href="dr__tools_8h.html#a9f5e7b4ab67d258d69d860c18e937468">dr_recurlock_mark_as_app()</a>).</li>
<li>The client code must not rely on returning to a particular point in the code cache, as that point might be flushed and removed during the write fault processing. This rules out a clean call (unless <a class="el" href="dr__ir__utils_8h.html#ac3aa7797e4e3ce2f741f99712bb704f5">dr_redirect_execution()</a> is used), but does allow something like <a class="el" href="group__drwrap.html#ga0ae2e383b0005a46848c7d0497be563a">drwrap_replace_native()</a> which uses a continuation strategy.</li>
</ol>
<p>A client write fault that does not meet the first two criteria will result in a fatal error report and an abort. It is up to the client to ensure it satisifies the third criterion.</p>
<p>Even when client writes do meet these criteria, for performance it's best for clients to avoid writing to such memory. </p>

</div>
</div>
<a id="ab430d92dd0d6338ec3e42b527ae91efb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab430d92dd0d6338ec3e42b527ae91efb">&#9670;&nbsp;</a></span>DR_MEMPROT_READ</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DR_MEMPROT_READ&#160;&#160;&#160;0x01</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read privileges. </p>

</div>
</div>
<a id="ac9c33a04e71ed6d6ec41e26013a005fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9c33a04e71ed6d6ec41e26013a005fd">&#9670;&nbsp;</a></span>DR_MEMPROT_VDSO</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DR_MEMPROT_VDSO&#160;&#160;&#160;0x20</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>In addition to the appropriate DR_MEMPROT_READ and/or DR_MEMPROT_EXEC flags, this flag will be set for the VDSO and VVAR pages on Linux. The VVAR pages may only be identified by DR on kernels that explicitly label the pages in the /proc/self/maps file (kernel 3.15 and above). In some cases, accessing the VVAR pages can cause problems (e.g., <a href="https://github.com/DynamoRIO/drmemory/issues/1778">https://github.com/DynamoRIO/drmemory/issues/1778</a>). </p>

</div>
</div>
<a id="a1dafb99a4933112c603189bc091fa752"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1dafb99a4933112c603189bc091fa752">&#9670;&nbsp;</a></span>DR_MEMPROT_WRITE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DR_MEMPROT_WRITE&#160;&#160;&#160;0x02</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Write privileges. </p>

</div>
</div>
<a id="adb9ba447c606e5e58400ac7b6ef719d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb9ba447c606e5e58400ac7b6ef719d1">&#9670;&nbsp;</a></span>DR_TRY_EXCEPT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DR_TRY_EXCEPT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">drcontext, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">try_statement, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">except_statement&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">    <span class="keywordflow">do</span> {                                                           \</div>
<div class="line">        void *try_cxt;                                             \</div>
<div class="line">        dr_try_setup(drcontext, &amp;try_cxt);                         \</div>
<div class="line">        if (<a class="code" href="dr__os__utils_8h.html#a68016a87fcd13c583f5f201d07c0cf64">dr_try_start</a>(try_cxt) == 0) {                          \</div>
<div class="line">            try_statement <a class="code" href="dr__os__utils_8h.html#a124b7d32263b641f8ff6db532874d802">dr_try_stop</a>(drcontext, try_cxt);         \</div>
<div class="line">        } <span class="keywordflow">else</span> {                                                   \</div>
<div class="line">            <span class="comment">/* roll back first in case except faults or returns */</span> \</div>
<div class="line">            dr_try_stop(drcontext, try_cxt);                       \</div>
<div class="line">            except_statement                                       \</div>
<div class="line">        }                                                          \</div>
<div class="line">    } <span class="keywordflow">while</span> (0)</div>
</div><!-- fragment --><p>Simple try..except support for executing operations that might fault and recovering if they do. Be careful with this feature as it has some limitations:</p><ul>
<li>do not use a return within a try statement (we do not have language support)</li>
<li>any automatic variables that you want to use in the except block should be declared volatile</li>
<li>no locks should be grabbed in a try statement (because there is no finally support to release them)</li>
<li>nesting is supported, but finally statements are not supported</li>
</ul>
<p>For fault-free reads in isolation, use <a class="el" href="dr__os__utils_8h.html#a7ceaf9328041825217ef55d2795cc177">dr_safe_read()</a> instead. <a class="el" href="dr__os__utils_8h.html#a7ceaf9328041825217ef55d2795cc177">dr_safe_read()</a> out-performs DR_TRY_EXCEPT.</p>
<p>For fault-free writes in isolation, <a class="el" href="dr__os__utils_8h.html#af188a647a8669c5ab49c135a7c5f05e4">dr_safe_write()</a> can be used, although on Windows it invokes a system call and can be less performant than DR_TRY_EXCEPT. </p>

</div>
</div>
<a id="a7d467c1d283fdfa1f2081ba1e0d01b6e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d467c1d283fdfa1f2081ba1e0d01b6e">&#9670;&nbsp;</a></span>PAGE_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PAGE_SIZE&#160;&#160;&#160;<a class="el" href="dr__os__utils_8h.html#a71d692536f7dfe8f3ae7b53597c50aca">dr_page_size</a>()</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Size of a page of memory. This uses a function call so be careful where performance is critical. </p>

</div>
</div>
<a id="adef0efe8b0b596d8f85a144c2f2c2c3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adef0efe8b0b596d8f85a144c2f2c2c3a">&#9670;&nbsp;</a></span>PAGE_START</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PAGE_START</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">x</td><td>)</td>
          <td>&#160;&#160;&#160;(((ptr_uint_t)(x)) &amp; ~(<a class="el" href="dr__os__utils_8h.html#a71d692536f7dfe8f3ae7b53597c50aca">dr_page_size</a>() - 1))</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Convenience macro to align to the start of a page of memory. It uses a function call so be careful where performance is critical. </p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="adfdd1e3337ce543e3031abb445aaacb1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adfdd1e3337ce543e3031abb445aaacb1">&#9670;&nbsp;</a></span>dr_app_arg_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct__dr__app__arg__t.html">_dr_app_arg_t</a> <a class="el" href="dr__os__utils_8h.html#adfdd1e3337ce543e3031abb445aaacb1">dr_app_arg_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Contains information regarding an application's command-line argument. </p>

</div>
</div>
<a id="ad4bb25312a86996379357f79a4c7c1c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4bb25312a86996379357f79a4c7c1c1">&#9670;&nbsp;</a></span>dr_auxlib_handle_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void* <a class="el" href="dr__os__utils_8h.html#ad4bb25312a86996379357f79a4c7c1c1">dr_auxlib_handle_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A handle to a loaded client auxiliary library. This is a different type than module_handle_t and is not necessarily the base address. </p>

</div>
</div>
<a id="ac429103cb983108880aee9b1377c430c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac429103cb983108880aee9b1377c430c">&#9670;&nbsp;</a></span>dr_auxlib_routine_ptr_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* dr_auxlib_routine_ptr_t) ()</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>An exported routine in a loaded client auxiliary library. </p>

</div>
</div>
<a id="a24463a9c32e3efac726c6fc9e97a77d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24463a9c32e3efac726c6fc9e97a77d6">&#9670;&nbsp;</a></span>dr_mem_info_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct__dr__mem__info__t.html">_dr_mem_info_t</a> <a class="el" href="dr__os__utils_8h.html#a24463a9c32e3efac726c6fc9e97a77d6">dr_mem_info_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Describes a memory region. Used by <a class="el" href="dr__os__utils_8h.html#a64bc438e6114c0e6137d65e4c9a8beb6">dr_query_memory_ex()</a>. </p>

</div>
</div>
<a id="a1074b84b2b9eb05337a431193789c9e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1074b84b2b9eb05337a431193789c9e2">&#9670;&nbsp;</a></span>dr_os_version_info_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct__dr__os__version__info__t.html">_dr_os_version_info_t</a> <a class="el" href="dr__os__utils_8h.html#a1074b84b2b9eb05337a431193789c9e2">dr_os_version_info_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Data structure used with <a class="el" href="dr__os__utils_8h.html#a6c40e727eda07c4af602ec5bd49d21c3">dr_get_os_version()</a> </p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a89e2e3ce9a2265d4adeefdf951ac6a1a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89e2e3ce9a2265d4adeefdf951ac6a1a">&#9670;&nbsp;</a></span>dr_app_arg_encoding_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="dr__os__utils_8h.html#a89e2e3ce9a2265d4adeefdf951ac6a1a">dr_app_arg_encoding_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Encodings of an application's command-line argument. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a89e2e3ce9a2265d4adeefdf951ac6a1aa94bfecd79ebb7757ecded397d930641d"></a>DR_APP_ARG_CSTR_COMPAT&#160;</td><td class="fielddoc"><p>C String Encoding. </p>
</td></tr>
<tr><td class="fieldname"><a id="a89e2e3ce9a2265d4adeefdf951ac6a1aaffb34a6f011e02ae18333dd19faca830"></a>DR_APP_ARG_UTF_16&#160;</td><td class="fielddoc"><p>UTF 16 String Encoding. </p>
</td></tr>
</table>

</div>
</div>
<a id="aff97be516bbb1aecdb6bd043841aaa10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff97be516bbb1aecdb6bd043841aaa10">&#9670;&nbsp;</a></span>dr_mem_type_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="dr__os__utils_8h.html#aff97be516bbb1aecdb6bd043841aaa10">dr_mem_type_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Flags describing memory used by <a class="el" href="dr__os__utils_8h.html#a64bc438e6114c0e6137d65e4c9a8beb6">dr_query_memory_ex()</a>. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="aff97be516bbb1aecdb6bd043841aaa10a60e91c7b948d92d08b74ee0cd50dee3d"></a>DR_MEMTYPE_FREE&#160;</td><td class="fielddoc"><p>No memory is allocated here </p>
</td></tr>
<tr><td class="fieldname"><a id="aff97be516bbb1aecdb6bd043841aaa10a6edf083337f9c953747a2cf4461dcbf7"></a>DR_MEMTYPE_IMAGE&#160;</td><td class="fielddoc"><p>An executable file is mapped here </p>
</td></tr>
<tr><td class="fieldname"><a id="aff97be516bbb1aecdb6bd043841aaa10ac0350de0d08726ea8a5a5f02bb7010b0"></a>DR_MEMTYPE_DATA&#160;</td><td class="fielddoc"><p>Some other data is allocated here </p>
</td></tr>
<tr><td class="fieldname"><a id="aff97be516bbb1aecdb6bd043841aaa10aa23ff267355a0b49da1b77da5bcc4d29"></a>DR_MEMTYPE_RESERVED&#160;</td><td class="fielddoc"><p>Reserved address space with no physical storage </p>
</td></tr>
<tr><td class="fieldname"><a id="aff97be516bbb1aecdb6bd043841aaa10a990c1b40496fdfc22c89b67300c921ea"></a>DR_MEMTYPE_ERROR&#160;</td><td class="fielddoc"><p>Query failed for unspecified reason </p>
</td></tr>
<tr><td class="fieldname"><a id="aff97be516bbb1aecdb6bd043841aaa10a4155a1d348b4dc103ef7d5cd1c6dc257"></a>DR_MEMTYPE_ERROR_WINKERNEL&#160;</td><td class="fielddoc"><p>Query failed due to the address being located in Windows kernel space. No further information is available so iteration must stop. </p>
</td></tr>
</table>

</div>
</div>
<a id="a311ab26d3bdc2d6ff7830b6f3ae9760c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a311ab26d3bdc2d6ff7830b6f3ae9760c">&#9670;&nbsp;</a></span>dr_os_version_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="dr__os__utils_8h.html#a311ab26d3bdc2d6ff7830b6f3ae9760c">dr_os_version_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Windows versions </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a311ab26d3bdc2d6ff7830b6f3ae9760ca438688fa3892c40ca47fb8b3c8ed2e89"></a>DR_WINDOWS_VERSION_10_1803&#160;</td><td class="fielddoc"><p>Windows 10 1803 major update. </p>
</td></tr>
<tr><td class="fieldname"><a id="a311ab26d3bdc2d6ff7830b6f3ae9760caecd33f47bf0e37f538589fe46097bad5"></a>DR_WINDOWS_VERSION_10_1709&#160;</td><td class="fielddoc"><p>Windows 10 1709 major update. </p>
</td></tr>
<tr><td class="fieldname"><a id="a311ab26d3bdc2d6ff7830b6f3ae9760ca2698c776a8acc3f599f342e45bf0b0fe"></a>DR_WINDOWS_VERSION_10_1703&#160;</td><td class="fielddoc"><p>Windows 10 1703 major update. </p>
</td></tr>
<tr><td class="fieldname"><a id="a311ab26d3bdc2d6ff7830b6f3ae9760ca781e789a0171cf75fe5dedcfd9cb7f7c"></a>DR_WINDOWS_VERSION_10_1607&#160;</td><td class="fielddoc"><p>Windows 10 1607 major update. </p>
</td></tr>
<tr><td class="fieldname"><a id="a311ab26d3bdc2d6ff7830b6f3ae9760ca2ce40ab4db406adf0613c77cc72112fd"></a>DR_WINDOWS_VERSION_10_1511&#160;</td><td class="fielddoc"><p>Windows 10 TH2 1511. For future Windows updates that change system call numbers, we'll perform our own artificial minor version number update as done here, and use the YYMM version as the sub-name, as officially the OS version will supposedly remain 10.0 forever. </p>
</td></tr>
<tr><td class="fieldname"><a id="a311ab26d3bdc2d6ff7830b6f3ae9760ca7927b8c2058d3adf34e0e5c49474c979"></a>DR_WINDOWS_VERSION_10&#160;</td><td class="fielddoc"><p>Windows 10 pre-TH2 </p>
</td></tr>
<tr><td class="fieldname"><a id="a311ab26d3bdc2d6ff7830b6f3ae9760cacea85c24b6ec914a85dd58a39dde0d3e"></a>DR_WINDOWS_VERSION_8_1&#160;</td><td class="fielddoc"><p>Windows 8.1 </p>
</td></tr>
<tr><td class="fieldname"><a id="a311ab26d3bdc2d6ff7830b6f3ae9760ca114432cbffadfec0fb011e9ef7ba8a87"></a>DR_WINDOWS_VERSION_2012_R2&#160;</td><td class="fielddoc"><p>Windows Server 2012 R2 </p>
</td></tr>
<tr><td class="fieldname"><a id="a311ab26d3bdc2d6ff7830b6f3ae9760ca420fc7de0ba5c5b6dea013b4c2509ac0"></a>DR_WINDOWS_VERSION_8&#160;</td><td class="fielddoc"><p>Windows 8 </p>
</td></tr>
<tr><td class="fieldname"><a id="a311ab26d3bdc2d6ff7830b6f3ae9760ca7c2a135c55d571883a94d9ff4e9da94f"></a>DR_WINDOWS_VERSION_2012&#160;</td><td class="fielddoc"><p>Windows Server 2012 </p>
</td></tr>
<tr><td class="fieldname"><a id="a311ab26d3bdc2d6ff7830b6f3ae9760ca8e8e36ac7efb1ad06cabb5f701306fde"></a>DR_WINDOWS_VERSION_7&#160;</td><td class="fielddoc"><p>Windows 7 </p>
</td></tr>
<tr><td class="fieldname"><a id="a311ab26d3bdc2d6ff7830b6f3ae9760cae432c24e32ed3407f449f019d51d38ae"></a>DR_WINDOWS_VERSION_2008_R2&#160;</td><td class="fielddoc"><p>Windows Server 2008 R2 </p>
</td></tr>
<tr><td class="fieldname"><a id="a311ab26d3bdc2d6ff7830b6f3ae9760cacb93ff69eabd6550b660012c55cacae1"></a>DR_WINDOWS_VERSION_VISTA&#160;</td><td class="fielddoc"><p>Windows Vista </p>
</td></tr>
<tr><td class="fieldname"><a id="a311ab26d3bdc2d6ff7830b6f3ae9760ca252442772ce128b15408a140958c1c96"></a>DR_WINDOWS_VERSION_2008&#160;</td><td class="fielddoc"><p>Windows Server 2008 </p>
</td></tr>
<tr><td class="fieldname"><a id="a311ab26d3bdc2d6ff7830b6f3ae9760caf960b684d92226cd35590c2804c8dfa6"></a>DR_WINDOWS_VERSION_2003&#160;</td><td class="fielddoc"><p>Windows Server 2003 </p>
</td></tr>
<tr><td class="fieldname"><a id="a311ab26d3bdc2d6ff7830b6f3ae9760ca4944bf33a5c3e637329fbdffe5051cee"></a>DR_WINDOWS_VERSION_XP_X64&#160;</td><td class="fielddoc"><p>Windows XP 64-bit </p>
</td></tr>
<tr><td class="fieldname"><a id="a311ab26d3bdc2d6ff7830b6f3ae9760ca3434e7522e1c3efc0fd898cf5f06c092"></a>DR_WINDOWS_VERSION_XP&#160;</td><td class="fielddoc"><p>Windows XP </p>
</td></tr>
<tr><td class="fieldname"><a id="a311ab26d3bdc2d6ff7830b6f3ae9760ca6364725219ede21bfbbf10d71fc844f0"></a>DR_WINDOWS_VERSION_2000&#160;</td><td class="fielddoc"><p>Windows 2000 </p>
</td></tr>
<tr><td class="fieldname"><a id="a311ab26d3bdc2d6ff7830b6f3ae9760caf3fa92ea36f47c6008fdbae9e78631b9"></a>DR_WINDOWS_VERSION_NT&#160;</td><td class="fielddoc"><p>Windows NT </p>
</td></tr>
</table>

</div>
</div>
<a id="ad051d9da5ddb2100eb450587e7551a70"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad051d9da5ddb2100eb450587e7551a70">&#9670;&nbsp;</a></span>dr_state_flags_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="dr__os__utils_8h.html#ad051d9da5ddb2100eb450587e7551a70">dr_state_flags_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Flags that control the behavior of <a class="el" href="dr__os__utils_8h.html#ac4d9e164873e0bf191bfae8cc2c867f3">dr_switch_to_app_state_ex()</a> and <a class="el" href="dr__os__utils_8h.html#a8b649488383757de1237c8caeb5f1c9b">dr_switch_to_dr_state_ex()</a>. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ad051d9da5ddb2100eb450587e7551a70ade45f51ff07512196129df690c9351fc"></a>DR_STATE_PEB&#160;</td><td class="fielddoc"><p>Switch the PEB pointer. </p>
</td></tr>
<tr><td class="fieldname"><a id="ad051d9da5ddb2100eb450587e7551a70a1e89b3980660dea49687e08fea96df09"></a>DR_STATE_TEB_MISC&#160;</td><td class="fielddoc"><p>Switch miscellaneous TEB fields. </p>
</td></tr>
<tr><td class="fieldname"><a id="ad051d9da5ddb2100eb450587e7551a70a1075136763677e70239a776f8111b3c3"></a>DR_STATE_STACK_BOUNDS&#160;</td><td class="fielddoc"><p>Switch the TEB stack bounds fields. </p>
</td></tr>
<tr><td class="fieldname"><a id="ad051d9da5ddb2100eb450587e7551a70a6f0f881ce02e1caf28ffbbc1246aa9a8"></a>DR_STATE_ALL&#160;</td><td class="fielddoc"><p>Switch all state. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a5a4bcecff5d7b6cb97c8e381468ca99c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a4bcecff5d7b6cb97c8e381468ca99c">&#9670;&nbsp;</a></span>dr_app_arg_as_cstring()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const DR_API char* dr_app_arg_as_cstring </td>
          <td>(</td>
          <td class="paramtype">IN <a class="el" href="dr__os__utils_8h.html#adfdd1e3337ce543e3031abb445aaacb1">dr_app_arg_t</a> *&#160;</td>
          <td class="paramname"><em>app_arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>buf_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the passed argument <code>app_arg</code> as a string. <code>buf</code> is used only if needed, and therefore the caller should not assume that the string is in the <code>buf</code>. In other words, always use the returned value to refer to the string. Returns NULL on error such as when <code>buf</code> is needed as storage and the size of the buffer <code>buf_size</code> is not sufficient.</p>
<p>To obtain a suitable upper-bound size of the string buffer, get the size of the argument from the <a class="el" href="dr__os__utils_8h.html#adfdd1e3337ce543e3031abb445aaacb1">dr_app_arg_t</a> value retrieved via <a class="el" href="dr__os__utils_8h.html#a5af582761c71e103475166b24181bb4c">dr_get_app_args()</a>.</p>
<dl class="section note"><dt>Note</dt><dd>Currently, this function is only available on Unix with early injection.</dd>
<dd>
An error code may be obtained via <a class="el" href="dr__tools_8h.html#a908074540820a8140bbc46cb3c020778">dr_get_error_code()</a> when this routine fails. </dd></dl>

</div>
</div>
<a id="af71c6708c5b03e67687a40533a2e0f2d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af71c6708c5b03e67687a40533a2e0f2d">&#9670;&nbsp;</a></span>dr_convert_handle_to_pid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_API process_id_t dr_convert_handle_to_pid </td>
          <td>(</td>
          <td class="paramtype">HANDLE&#160;</td>
          <td class="paramname"><em>process_handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Converts a process handle to a process id. </p><dl class="section return"><dt>Returns</dt><dd>Process id if successful; INVALID_PROCESS_ID on failure. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>Windows only. </dd></dl>

</div>
</div>
<a id="a8eaacb8d6e7e0934088e74475c9e7b35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8eaacb8d6e7e0934088e74475c9e7b35">&#9670;&nbsp;</a></span>dr_convert_pid_to_handle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_API HANDLE dr_convert_pid_to_handle </td>
          <td>(</td>
          <td class="paramtype">process_id_t&#160;</td>
          <td class="paramname"><em>pid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Converts a process id to a process handle. </p><dl class="section return"><dt>Returns</dt><dd>Process handle if successful; INVALID_HANDLE_VALUE on failure. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>Windows only. </dd></dl>

</div>
</div>
<a id="a5af582761c71e103475166b24181bb4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5af582761c71e103475166b24181bb4c">&#9670;&nbsp;</a></span>dr_get_app_args()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_API int dr_get_app_args </td>
          <td>(</td>
          <td class="paramtype">OUT <a class="el" href="dr__os__utils_8h.html#adfdd1e3337ce543e3031abb445aaacb1">dr_app_arg_t</a> *&#160;</td>
          <td class="paramname"><em>args_array</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>args_count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Provides information about the app's arguments by setting <code>args_array</code> up to the count denoted by <code>args_count</code>. Therefore, <code>args_count</code> is not the size of the buffer in bytes but the number of <a class="el" href="dr__os__utils_8h.html#adfdd1e3337ce543e3031abb445aaacb1">dr_app_arg_t</a> values that <code>args_array</code> can store. Returns the number of args set or -1 on error.</p>
<p>Use <a class="el" href="dr__os__utils_8h.html#a5a4bcecff5d7b6cb97c8e381468ca99c">dr_app_arg_as_cstring()</a> to get the argument as a string.</p>
<p>Use <a class="el" href="dr__os__utils_8h.html#af0f7565b305ddec7732dc8014e5cc152">dr_num_app_args()</a> to query the total number of command-line arguments passed to the application.</p>
<dl class="section note"><dt>Note</dt><dd>Currently, this function is only available on Unix with early injection.</dd>
<dd>
An error code may be obtained via <a class="el" href="dr__tools_8h.html#a908074540820a8140bbc46cb3c020778">dr_get_error_code()</a> when this routine fails. </dd></dl>

</div>
</div>
<a id="a53e8fbee6d87378280e440c4c75e0635"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53e8fbee6d87378280e440c4c75e0635">&#9670;&nbsp;</a></span>dr_get_app_PEB()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_API void* dr_get_app_PEB </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns a pointer to the application's Process Environment Block (PEB). DR swaps to a private PEB when running client code, in order to isolate the client and its dependent libraries from the application, so conventional methods of reading the PEB will obtain the private PEB instead of the application PEB. </p><dl class="section note"><dt>Note</dt><dd>Windows only. </dd></dl>

</div>
</div>
<a id="aef60db347b52f1344c23b63bcb020ff6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef60db347b52f1344c23b63bcb020ff6">&#9670;&nbsp;</a></span>dr_get_application_name()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const DR_API char* dr_get_application_name </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the image name (without path) of the current application. </p>

</div>
</div>
<a id="a6c40e727eda07c4af602ec5bd49d21c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c40e727eda07c4af602ec5bd49d21c3">&#9670;&nbsp;</a></span>dr_get_os_version()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_API bool dr_get_os_version </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="dr__os__utils_8h.html#a1074b84b2b9eb05337a431193789c9e2">dr_os_version_info_t</a> *&#160;</td>
          <td class="paramname"><em>info</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns information about the version of the operating system. Returns whether successful. </p><dl class="section note"><dt>Note</dt><dd>Windows only. </dd>
<dd>
The Windows API routine GetVersionEx may hide distinctions between versions, such as between Windows 8 and Windows 8.1. DR reports the true low-level version. </dd></dl>

</div>
</div>
<a id="abaa5c24341c70a6ed925f73acb1da7e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abaa5c24341c70a6ed925f73acb1da7e9">&#9670;&nbsp;</a></span>dr_get_parent_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_API process_id_t dr_get_parent_id </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the process id of the parent of the current process. </p><dl class="section note"><dt>Note</dt><dd>Linux only. </dd></dl>

</div>
</div>
<a id="af99715c7ad2497ad86f4769da0f19699"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af99715c7ad2497ad86f4769da0f19699">&#9670;&nbsp;</a></span>dr_get_process_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_API process_id_t dr_get_process_id </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the process id of the current process. </p>

</div>
</div>
<a id="a5ecb37bc10ee3d174a9bf7737e5fd37d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ecb37bc10ee3d174a9bf7737e5fd37d">&#9670;&nbsp;</a></span>dr_get_process_id_from_drcontext()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_API process_id_t dr_get_process_id_from_drcontext </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>drcontext</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the process id of the process associated with drcontext <code>drcontext</code>. The returned value may be different from <a class="el" href="dr__os__utils_8h.html#af99715c7ad2497ad86f4769da0f19699">dr_get_process_id()</a> if the passed context was created in a different process, which may happen in thread exit callbacks. </p>

</div>
</div>
<a id="a2aa6f4436d293356dccc59c8d5e8df08"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2aa6f4436d293356dccc59c8d5e8df08">&#9670;&nbsp;</a></span>dr_is_wow64()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_API bool dr_is_wow64 </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns true if this process is a 32-bit process operating on a 64-bit Windows kernel, known as Windows-On-Windows-64, or WOW64. Returns false otherwise. </p><dl class="section note"><dt>Note</dt><dd>Windows only. </dd></dl>

</div>
</div>
<a id="ad63441e619a7b933e3198816cdc672c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad63441e619a7b933e3198816cdc672c5">&#9670;&nbsp;</a></span>dr_load_aux_library()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_API <a class="el" href="dr__os__utils_8h.html#ad4bb25312a86996379357f79a4c7c1c1">dr_auxlib_handle_t</a> dr_load_aux_library </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte **&#160;</td>
          <td class="paramname"><em>lib_start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte **&#160;</td>
          <td class="paramname"><em>lib_end</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Loads the library with the given path as an auxiliary client library. The library is not treated as an application module but as an extension of DR. The library will be included in <a class="el" href="dr__os__utils_8h.html#aa9942f73414e24419ed66d28cefb06f1">dr_memory_is_in_client()</a> and any faults in the library will be considered client faults. The bounds of the loaded library are returned in the optional out variables. On failure, returns NULL.</p>
<p>If only a filename and not a full path is given, this routine will search for the library in the standard search locations for DR's private loader. </p>

</div>
</div>
<a id="ab2c609dbb7bc2e23a268946ccbaa622a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab2c609dbb7bc2e23a268946ccbaa622a">&#9670;&nbsp;</a></span>dr_lookup_aux_library_routine()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_API <a class="el" href="dr__os__utils_8h.html#ac429103cb983108880aee9b1377c430c">dr_auxlib_routine_ptr_t</a> dr_lookup_aux_library_routine </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="dr__os__utils_8h.html#ad4bb25312a86996379357f79a4c7c1c1">dr_auxlib_handle_t</a>&#160;</td>
          <td class="paramname"><em>lib</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Looks up the exported routine with the given name in the given client auxiliary library loaded by <a class="el" href="dr__os__utils_8h.html#ad63441e619a7b933e3198816cdc672c5">dr_load_aux_library()</a>. Returns NULL on failure. </p>

</div>
</div>
<a id="a503f1faf758d1bda2618d4f9004be44a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a503f1faf758d1bda2618d4f9004be44a">&#9670;&nbsp;</a></span>dr_memory_is_dr_internal()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_API bool dr_memory_is_dr_internal </td>
          <td>(</td>
          <td class="paramtype">const byte *&#160;</td>
          <td class="paramname"><em>pc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns true iff pc is memory allocated by DR for its own purposes, and would not exist if the application were run natively. </p>

</div>
</div>
<a id="aa9942f73414e24419ed66d28cefb06f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9942f73414e24419ed66d28cefb06f1">&#9670;&nbsp;</a></span>dr_memory_is_in_client()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_API bool dr_memory_is_in_client </td>
          <td>(</td>
          <td class="paramtype">const byte *&#160;</td>
          <td class="paramname"><em>pc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns true iff pc is located inside a client library, an Extension library used by a client, or an auxiliary client library (see <a class="el" href="dr__os__utils_8h.html#ad63441e619a7b933e3198816cdc672c5">dr_load_aux_library()</a>). </p>

</div>
</div>
<a id="a168a1ed2722d1c2565a1b7dafd7f71c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a168a1ed2722d1c2565a1b7dafd7f71c6">&#9670;&nbsp;</a></span>dr_memory_is_readable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_API bool dr_memory_is_readable </td>
          <td>(</td>
          <td class="paramtype">const byte *&#160;</td>
          <td class="paramname"><em>pc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Checks to see that all bytes with addresses in the range [<code>pc</code>, <code>pc</code> + <code>size</code> - 1] are readable and that reading from that range won't generate an exception (see also <a class="el" href="dr__os__utils_8h.html#a7ceaf9328041825217ef55d2795cc177">dr_safe_read()</a> and <a class="el" href="dr__os__utils_8h.html#adb9ba447c606e5e58400ac7b6ef719d1">DR_TRY_EXCEPT()</a>). </p><dl class="section note"><dt>Note</dt><dd>Nothing guarantees that the memory will stay readable for any length of time. </dd>
<dd>
On Linux, especially if the app is in the middle of loading a library and has not properly set up the .bss yet, a page that seems readable can still generate SIGBUS if beyond the end of an mmapped file. Use <a class="el" href="dr__os__utils_8h.html#a7ceaf9328041825217ef55d2795cc177">dr_safe_read()</a> or <a class="el" href="dr__os__utils_8h.html#adb9ba447c606e5e58400ac7b6ef719d1">DR_TRY_EXCEPT()</a> to avoid such problems. </dd></dl>

</div>
</div>
<a id="ae01c2ac2f3df4c23f2131ed2c367ac9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae01c2ac2f3df4c23f2131ed2c367ac9b">&#9670;&nbsp;</a></span>dr_memory_protect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_API bool dr_memory_protect </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>base</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint&#160;</td>
          <td class="paramname"><em>new_prot</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Modifies the memory protections of the region from <code>start</code> through <code>start</code> + <code>size</code>. Modification of memory allocated by DR or of the DR or client libraries themselves is allowed under the assumption that the client knows what it is doing. Modification of the ntdll.dll library on Windows is not allowed. Returns true if successful. </p>

</div>
</div>
<a id="af0f7565b305ddec7732dc8014e5cc152"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0f7565b305ddec7732dc8014e5cc152">&#9670;&nbsp;</a></span>dr_num_app_args()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_API int dr_num_app_args </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the number of command-line arguments passed to the application.</p>
<dl class="section note"><dt>Note</dt><dd>Currently, this function is only available on Unix with early injection.</dd>
<dd>
An error code may be obtained via <a class="el" href="dr__tools_8h.html#a908074540820a8140bbc46cb3c020778">dr_get_error_code()</a> when this routine fails. </dd></dl>

</div>
</div>
<a id="a71d692536f7dfe8f3ae7b53597c50aca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71d692536f7dfe8f3ae7b53597c50aca">&#9670;&nbsp;</a></span>dr_page_size()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_API size_t dr_page_size </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the size of a page of memory. </p>

</div>
</div>
<a id="a82f81fc8e9e98890159586260d6f346f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a82f81fc8e9e98890159586260d6f346f">&#9670;&nbsp;</a></span>dr_query_memory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_API bool dr_query_memory </td>
          <td>(</td>
          <td class="paramtype">const byte *&#160;</td>
          <td class="paramname"><em>pc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte **&#160;</td>
          <td class="paramname"><em>base_pc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint *&#160;</td>
          <td class="paramname"><em>prot</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>An os neutral method for querying a memory address. Returns true iff a memory region containing <code>pc</code> is found. If found additional information about the memory region is returned in the optional out arguments <code>base_pc</code>, <code>size</code>, and <code>prot</code> where <code>base_pc</code> is the start address of the memory region continaing <code>pc</code>, <code>size</code> is the size of said memory region and <code>prot</code> is an ORed combination of DR_MEMPROT_* flags describing its current protection.</p>
<dl class="section note"><dt>Note</dt><dd>To examine only application memory, skip memory for which <a class="el" href="dr__os__utils_8h.html#a503f1faf758d1bda2618d4f9004be44a">dr_memory_is_dr_internal()</a> or <a class="el" href="dr__os__utils_8h.html#aa9942f73414e24419ed66d28cefb06f1">dr_memory_is_in_client()</a> returns true.</dd>
<dd>
DR may mark writable code pages as read-only but pretend they're writable. When this happens, it will include both <a class="el" href="dr__os__utils_8h.html#a1dafb99a4933112c603189bc091fa752">DR_MEMPROT_WRITE</a> and <a class="el" href="dr__os__utils_8h.html#a0dcb0f62864c67d1aa74381035b5bbfe">DR_MEMPROT_PRETEND_WRITE</a> in <code>prot</code>. </dd></dl>

</div>
</div>
<a id="a64bc438e6114c0e6137d65e4c9a8beb6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64bc438e6114c0e6137d65e4c9a8beb6">&#9670;&nbsp;</a></span>dr_query_memory_ex()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_API bool dr_query_memory_ex </td>
          <td>(</td>
          <td class="paramtype">const byte *&#160;</td>
          <td class="paramname"><em>pc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">OUT <a class="el" href="dr__os__utils_8h.html#a24463a9c32e3efac726c6fc9e97a77d6">dr_mem_info_t</a> *&#160;</td>
          <td class="paramname"><em>info</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Provides additional information beyond <a class="el" href="dr__os__utils_8h.html#a82f81fc8e9e98890159586260d6f346f">dr_query_memory()</a>. Returns true if it was able to obtain information (including about free regions) and sets the fields of <code>info</code>. This routine can be used to iterate over the entire address space. Such an iteration should stop on reaching the top of the address space, or on reaching kernel memory (look for <a class="el" href="dr__os__utils_8h.html#aff97be516bbb1aecdb6bd043841aaa10a4155a1d348b4dc103ef7d5cd1c6dc257">DR_MEMTYPE_ERROR_WINKERNEL</a>) on Windows.</p>
<p>Returns false on failure and sets info-&gt;type to a DR_MEMTYPE_ERROR* code indicating the reason for failure.</p>
<dl class="section note"><dt>Note</dt><dd>To examine only application memory, skip memory for which <a class="el" href="dr__os__utils_8h.html#a503f1faf758d1bda2618d4f9004be44a">dr_memory_is_dr_internal()</a> returns true.</dd>
<dd>
DR may mark writable code pages as read-only but pretend they're writable. When this happens, it will include both <a class="el" href="dr__os__utils_8h.html#a1dafb99a4933112c603189bc091fa752">DR_MEMPROT_WRITE</a> and <a class="el" href="dr__os__utils_8h.html#a0dcb0f62864c67d1aa74381035b5bbfe">DR_MEMPROT_PRETEND_WRITE</a> in <code>info-&gt;prot</code>. </dd></dl>

</div>
</div>
<a id="a7ceaf9328041825217ef55d2795cc177"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ceaf9328041825217ef55d2795cc177">&#9670;&nbsp;</a></span>dr_safe_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_API bool dr_safe_read </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>base</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>out_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>bytes_read</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Safely reads <code>size</code> bytes from address <code>base</code> into buffer <code>out_buf</code>. Reading is done without the possibility of an exception occurring. Returns true if the entire <code>size</code> bytes were read; otherwise returns false and if <code>bytes_read</code> is non-NULL returns the partial number of bytes read in <code>bytes_read</code>. </p><dl class="section note"><dt>Note</dt><dd>See also <a class="el" href="dr__os__utils_8h.html#adb9ba447c606e5e58400ac7b6ef719d1">DR_TRY_EXCEPT()</a>. </dd></dl>

</div>
</div>
<a id="af188a647a8669c5ab49c135a7c5f05e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af188a647a8669c5ab49c135a7c5f05e4">&#9670;&nbsp;</a></span>dr_safe_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_API bool dr_safe_write </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>base</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>in_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>bytes_written</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Safely writes <code>size</code> bytes from buffer <code>in_buf</code> to address <code>base</code>. Writing is done without the possibility of an exception occurring. Returns true if the entire <code>size</code> bytes were written; otherwise returns false and if <code>bytes_written</code> is non-NULL returns the partial number of bytes written in <code>bytes_written</code>. </p><dl class="section note"><dt>Note</dt><dd>See also <a class="el" href="dr__os__utils_8h.html#adb9ba447c606e5e58400ac7b6ef719d1">DR_TRY_EXCEPT()</a>. </dd></dl>

</div>
</div>
<a id="a89abb45db2c1f35564c5fa6f6765f55f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89abb45db2c1f35564c5fa6f6765f55f">&#9670;&nbsp;</a></span>dr_switch_to_app_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_API void dr_switch_to_app_state </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>drcontext</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Equivalent to dr_switch_to_app_state_ex(drcontext, DR_STATE_ALL). </p>

</div>
</div>
<a id="ac4d9e164873e0bf191bfae8cc2c867f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4d9e164873e0bf191bfae8cc2c867f3">&#9670;&nbsp;</a></span>dr_switch_to_app_state_ex()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_API void dr_switch_to_app_state_ex </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>drcontext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="dr__os__utils_8h.html#ad051d9da5ddb2100eb450587e7551a70">dr_state_flags_t</a>&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Swaps to the application version of any system state for the given thread. This is meant to be used prior to examining application memory, when private libraries are in use and there are two versions of system state. Invoking non-DR library routines while the application state is in place can lead to unpredictable results: call <a class="el" href="dr__os__utils_8h.html#a3f08638719a695bcb95d101a03cfd8f3">dr_switch_to_dr_state()</a> (or the _ex version) before doing so.</p>
<p>This function does not affect whether the current machine context (registers) contains application state or not.</p>
<p>The <code>flags</code> argument allows selecting a subset of the state to swap. </p>

</div>
</div>
<a id="a3f08638719a695bcb95d101a03cfd8f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f08638719a695bcb95d101a03cfd8f3">&#9670;&nbsp;</a></span>dr_switch_to_dr_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_API void dr_switch_to_dr_state </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>drcontext</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Equivalent to dr_switch_to_dr_state_ex(drcontext, DR_STATE_ALL). </p>

</div>
</div>
<a id="a8b649488383757de1237c8caeb5f1c9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b649488383757de1237c8caeb5f1c9b">&#9670;&nbsp;</a></span>dr_switch_to_dr_state_ex()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_API void dr_switch_to_dr_state_ex </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>drcontext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="dr__os__utils_8h.html#ad051d9da5ddb2100eb450587e7551a70">dr_state_flags_t</a>&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Should only be called after calling <a class="el" href="dr__os__utils_8h.html#a89abb45db2c1f35564c5fa6f6765f55f">dr_switch_to_app_state()</a> (or the _ex version), or in certain cases where a client is running its own code in an application state. Swaps from the application version of system state for the given thread back to the DR and client version.</p>
<p>This function does not affect whether the current machine context (registers) contains application state or not.</p>
<p>A client must call <a class="el" href="dr__os__utils_8h.html#a3f08638719a695bcb95d101a03cfd8f3">dr_switch_to_dr_state()</a> in order to safely call private library routines if it is running in an application context where <a class="el" href="dr__os__utils_8h.html#a166d041c41c9a313f56ecc1910feed9c">dr_using_app_state()</a> returns true. On Windows, this is the case for any application context, as the system state is always swapped. On Linux, however, execution of application code in the code cache only swaps the machine context and not the system state. Thus, on Linux, while in the code cache, <a class="el" href="dr__os__utils_8h.html#a166d041c41c9a313f56ecc1910feed9c">dr_using_app_state()</a> will return false, and it is safe to invoke private library routines without calling <a class="el" href="dr__os__utils_8h.html#a3f08638719a695bcb95d101a03cfd8f3">dr_switch_to_dr_state()</a>. Only if client or client-invoked code will examine a segment selector or descriptor does the state need to be swapped. A state swap is much more expensive on Linux (it requires a system call) than on Windows.</p>
<p>The same flags that were passed to <a class="el" href="dr__os__utils_8h.html#ac4d9e164873e0bf191bfae8cc2c867f3">dr_switch_to_app_state_ex()</a> should be passed here. </p>

</div>
</div>
<a id="a759ede1d1db14ad09e6ea89f32de8a06"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a759ede1d1db14ad09e6ea89f32de8a06">&#9670;&nbsp;</a></span>dr_try_setup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_API void dr_try_setup </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>drcontext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>try_cxt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Do not call this directly: use the DR_TRY_EXCEPT macro instead. </p>

</div>
</div>
<a id="a68016a87fcd13c583f5f201d07c0cf64"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68016a87fcd13c583f5f201d07c0cf64">&#9670;&nbsp;</a></span>dr_try_start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_API int dr_try_start </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Do not call this directly: use the DR_TRY_EXCEPT macro instead. </p>

</div>
</div>
<a id="a124b7d32263b641f8ff6db532874d802"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a124b7d32263b641f8ff6db532874d802">&#9670;&nbsp;</a></span>dr_try_stop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_API void dr_try_stop </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>drcontext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>try_cxt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Do not call this directly: use the DR_TRY_EXCEPT macro instead. </p>

</div>
</div>
<a id="a7b8b8e8368257c45d6b5a973a963d19d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b8b8e8368257c45d6b5a973a963d19d">&#9670;&nbsp;</a></span>dr_unload_aux_library()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_API bool dr_unload_aux_library </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="dr__os__utils_8h.html#ad4bb25312a86996379357f79a4c7c1c1">dr_auxlib_handle_t</a>&#160;</td>
          <td class="paramname"><em>lib</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Unloads the given library, which must have been loaded by <a class="el" href="dr__os__utils_8h.html#ad63441e619a7b933e3198816cdc672c5">dr_load_aux_library()</a>. Returns whether successful. </p>

</div>
</div>
<a id="a166d041c41c9a313f56ecc1910feed9c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a166d041c41c9a313f56ecc1910feed9c">&#9670;&nbsp;</a></span>dr_using_app_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_API bool dr_using_app_state </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>drcontext</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns whether the given thread indicated by <code>drcontext</code> is currently using the application version of its system state. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="dr__os__utils_8h.html#a3f08638719a695bcb95d101a03cfd8f3">dr_switch_to_dr_state()</a>, <a class="el" href="dr__os__utils_8h.html#a89abb45db2c1f35564c5fa6f6765f55f">dr_switch_to_app_state()</a>.</dd></dl>
<p>This function does not indicate whether the machine context (registers) contains application state or not.</p>
<p>On Linux, DR very rarely switches the system state, while on Windows DR switches the system state to the DR and client version on every event callback or clean call. </p>

</div>
</div>
<a id="a51f56e0bb6afba732c92cff9855287c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51f56e0bb6afba732c92cff9855287c0">&#9670;&nbsp;</a></span>dr_virtual_query()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DR_API size_t dr_virtual_query </td>
          <td>(</td>
          <td class="paramtype">const byte *&#160;</td>
          <td class="paramname"><em>pc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MEMORY_BASIC_INFORMATION *&#160;</td>
          <td class="paramname"><em>mbi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>mbi_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Equivalent to the win32 API function VirtualQuery(). See that routine for a description of arguments and return values. </p><dl class="section note"><dt>Note</dt><dd>Windows only.</dd>
<dd>
DR may mark writable code pages as read-only but pretend they're writable. When this happens, this routine will indicate that the memory is writable. Call <a class="el" href="dr__os__utils_8h.html#a82f81fc8e9e98890159586260d6f346f">dr_query_memory()</a> or <a class="el" href="dr__os__utils_8h.html#a64bc438e6114c0e6137d65e4c9a8beb6">dr_query_memory_ex()</a> before attempting to write to application memory to ensure it's not read-only underneath. </dd></dl>

</div>
</div>
</div><!-- contents -->
<div class="ttc" id="adr__os__utils_8h_html_a124b7d32263b641f8ff6db532874d802"><div class="ttname"><a href="dr__os__utils_8h.html#a124b7d32263b641f8ff6db532874d802">dr_try_stop</a></div><div class="ttdeci">DR_API void dr_try_stop(void *drcontext, void *try_cxt)</div></div>
<div class="ttc" id="adr__os__utils_8h_html_a68016a87fcd13c583f5f201d07c0cf64"><div class="ttname"><a href="dr__os__utils_8h.html#a68016a87fcd13c583f5f201d07c0cf64">dr_try_start</a></div><div class="ttdeci">DR_API int dr_try_start(void *buf)</div></div>
<!-- HTML footer for doxygen 1.8.17-->
<!-- start footer part -->
<!--BEGIN GENERATE_TREEVIEW-->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer" style="float:none;text-align:center"><img border=0 src="favicon.png"> &nbsp;  DynamoRIO version 9.0.1 --- Mon Feb 14 2022 19:02:57 &nbsp; <img border=0 src="favicon.png">
</small></address>
